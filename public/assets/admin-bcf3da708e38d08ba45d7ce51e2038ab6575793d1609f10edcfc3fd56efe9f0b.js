function readImage(){if(this.files&&this.files[0]){var t=new FileReader;t.onload=function(t){document.getElementById("preview-img").src=t.target.result,document.getElementById("nameImage").textContent=document.getElementById("validationImage").value},t.readAsDataURL(this.files[0])}}!function(n){"function"==typeof define&&define.amd?define(["jquery"],function(t){return n(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e||(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),n(e,t,t.document)}:n(jQuery,window,document)}(function(I,v,b,O){function o(e){var n,r,i={};I.each(e,function(t){(n=t.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(n[1]+" ")&&(r=t.replace(n[0],n[2].toLowerCase()),i[r]=t,"o"===n[1]&&o(e[t]))}),e._hungarianMap=i}function w(e,n,r){var i;e._hungarianMap||o(e),I.each(n,function(t){(i=e._hungarianMap[t])===O||!r&&n[i]!==O||("o"===i.charAt(0)?(n[i]||(n[i]={}),I.extend(!0,n[i],n[t]),w(e[i],n[i],r)):n[i]=n[t])})}function A(t){var e=$t.defaults.oLanguage,n=e.sDecimal;if(n&&Wt(n),t){var r=t.sZeroRecords;!t.sEmptyTable&&r&&"No data available in table"===e.sEmptyTable&&It(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&r&&"Loading..."===e.sLoadingRecords&&It(t,t,"sZeroRecords","sLoadingRecords"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands),(t=t.sDecimal)&&n!==t&&Wt(t)}}function C(t){if(ce(t,"ordering","bSort"),ce(t,"orderMulti","bSortMulti"),ce(t,"orderClasses","bSortClasses"),ce(t,"orderCellsTop","bSortCellsTop"),ce(t,"order","aaSorting"),ce(t,"orderFixed","aaSortingFixed"),ce(t,"paging","bPaginate"),ce(t,"pagingType","sPaginationType"),ce(t,"pageLength","iDisplayLength"),ce(t,"searching","bFilter"),"boolean"==typeof t.sScrollX&&(t.sScrollX=t.sScrollX?"100%":""),"boolean"==typeof t.scrollX&&(t.scrollX=t.scrollX?"100%":""),t=t.aoSearchCols)for(var e=0,n=t.length;e<n;e++)t[e]&&w($t.models.oSearch,t[e])}function x(t){ce(t,"orderable","bSortable"),ce(t,"orderData","aDataSort"),ce(t,"orderSequence","asSorting"),ce(t,"orderDataType","sortDataType");var e=t.aDataSort;"number"==typeof e&&!Array.isArray(e)&&(t.aDataSort=[e])}function S(t){if(!$t.__browser){var e={};$t.__browser=e;var n=I("<div/>").css({position:"fixed",top:0,left:-1*I(v).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(I("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(I("<div/>").css({width:"100%",height:10}))).appendTo("body"),r=n.children(),i=r.children();e.barWidth=r[0].offsetWidth-r[0].clientWidth,e.bScrollOversize=100===i[0].offsetWidth&&100!==r[0].clientWidth,e.bScrollbarLeft=1!==Math.round(i.offset().left),e.bBounding=!!n[0].getBoundingClientRect().width,n.remove()}I.extend(t.oBrowser,$t.__browser),t.oScroll.iBarWidth=$t.__browser.barWidth}function n(t,e,n,r,i,o){var a,s=!1;for(n!==O&&(a=n,s=!0);r!==i;)t.hasOwnProperty(r)&&(a=s?e(a,t[r],r,t):t[r],s=!0,r+=o);return a}function _(t,e){var n=$t.defaults.column,r=t.aoColumns.length;n=I.extend({},$t.models.oColumn,n,{nTh:e||b.createElement("th"),sTitle:n.sTitle?n.sTitle:e?e.innerHTML:"",aDataSort:n.aDataSort?n.aDataSort:[r],mData:n.mData?n.mData:r,idx:r});t.aoColumns.push(n),(n=t.aoPreSearchCols)[r]=I.extend({},$t.models.oSearch,n[r]),D(t,r,I(e).data())}function D(t,e,n){e=t.aoColumns[e];var r=t.oClasses,i=I(e.nTh);if(!e.sWidthOrig){e.sWidthOrig=i.attr("width")||null;var o=(i.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);o&&(e.sWidthOrig=o[1])}n!==O&&null!==n&&(x(n),w($t.defaults.column,n,!0),n.mDataProp!==O&&!n.mData&&(n.mData=n.mDataProp),n.sType&&(e._sManualType=n.sType),n.className&&!n.sClass&&(n.sClass=n.className),n.sClass&&i.addClass(n.sClass),I.extend(e,n),It(e,n,"sWidth","sWidthOrig"),n.iDataSort!==O&&(e.aDataSort=[n.iDataSort]),It(e,n,"aDataSort"));var a=e.mData,s=N(a),l=e.mRender?N(e.mRender):null;n=function(t){return"string"==typeof t&&-1!==t.indexOf("@")};e._bAttrSrc=I.isPlainObject(a)&&(n(a.sort)||n(a.type)||n(a.filter)),e._setter=null,e.fnGetData=function(t,e,n){var r=s(t,e,O,n);return l&&e?l(r,e,t,n):r},e.fnSetData=function(t,e,n){return f(a)(t,e,n)},"number"!=typeof a&&(t._rowReadObject=!0),t.oFeatures.bSort||(e.bSortable=!1,i.addClass(r.sSortableNone)),t=-1!==I.inArray("asc",e.asSorting),n=-1!==I.inArray("desc",e.asSorting),e.bSortable&&(t||n)?t&&!n?(e.sSortingClass=r.sSortableAsc,e.sSortingClassJUI=r.sSortJUIAscAllowed):!t&&n?(e.sSortingClass=r.sSortableDesc,e.sSortingClassJUI=r.sSortJUIDescAllowed):(e.sSortingClass=r.sSortable,e.sSortingClassJUI=r.sSortJUI):(e.sSortingClass=r.sSortableNone,e.sSortingClassJUI="")}function F(t){if(!1!==t.oFeatures.bAutoWidth){var e=t.aoColumns;mt(t);for(var n=0,r=e.length;n<r;n++)e[n].nTh.style.width=e[n].sWidth}(""!==(e=t.oScroll).sY||""!==e.sX)&&ft(t),Nt(t,null,"column-sizing",[t])}function P(t,e){var n=T(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function u(t,e){var n=T(t,"bVisible");return-1!==(n=I.inArray(e,n))?n:null}function y(t){var n=0;return I.each(t.aoColumns,function(t,e){e.bVisible&&"none"!==I(e.nTh).css("display")&&n++}),n}function T(t,n){var r=[];return I.map(t.aoColumns,function(t,e){t[n]&&r.push(e)}),r}function a(t){var e,n,r,i,o,a,s,l,u,c=t.aoColumns,h=t.aoData,d=$t.ext.type.detect;for(e=0,n=c.length;e<n;e++)if(u=[],!(s=c[e]).sType&&s._sManualType)s.sType=s._sManualType;else if(!s.sType){for(r=0,i=d.length;r<i;r++){for(o=0,a=h.length;o<a&&(u[o]===O&&(u[o]=k(t,o,e,"type")),(l=d[r](u[o],t))||r===d.length-1)&&"html"!==l;o++);if(l){s.sType=l;break}}s.sType||(s.sType="string")}}function E(t,e,n,r){var i,o,a,s,l,u,c=t.aoColumns;if(e)for(i=e.length-1;0<=i;i--){var h=(u=e[i]).targets!==O?u.targets:u.aTargets;for(Array.isArray(h)||(h=[h]),o=0,a=h.length;o<a;o++)if("number"==typeof h[o]&&0<=h[o]){for(;c.length<=h[o];)_(t);r(h[o],u)}else if("number"==typeof h[o]&&h[o]<0)r(c.length+h[o],u);else if("string"==typeof h[o])for(s=0,l=c.length;s<l;s++)("_all"==h[o]||I(c[s].nTh).hasClass(h[o]))&&r(s,u)}if(n)for(i=0,t=n.length;i<t;i++)r(i,n[i])}function R(t,e,n,r){var i=t.aoData.length,o=I.extend(!0,{},$t.models.oRow,{src:n?"dom":"data",idx:i});o._aData=e,t.aoData.push(o);for(var a=t.aoColumns,s=0,l=a.length;s<l;s++)a[s].sType=null;return t.aiDisplayMaster.push(i),(e=t.rowIdFn(e))!==O&&(t.aIds[e]=o),(n||!t.oFeatures.bDeferRender)&&m(t,i,n,r),i}function L(n,t){var r;return t instanceof I||(t=I(t)),t.map(function(t,e){return r=l(n,e),R(n,r.data,e,r.cells)})}function k(t,e,n,r){var i=t.iDraw,o=t.aoColumns[n],a=t.aoData[e]._aData,s=o.sDefaultContent,l=o.fnGetData(a,r,{settings:t,row:e,col:n});if(l===O)return t.iDrawError!=i&&null===s&&(kt(t,0,"Requested unknown parameter "+("function"==typeof o.mData?"{function}":"'"+o.mData+"'")+" for row "+e+", column "+n,4),t.iDrawError=i),s;if(l!==a&&null!==l||null===s||r===O){if("function"==typeof l)return l.call(a)}else l=s;return null===l&&"display"==r?"":l}function r(t,e,n,r){t.aoColumns[n].fnSetData(t.aoData[e]._aData,r,{settings:t,row:e,col:n})}function c(t){return I.map(t.match(/(\\.|[^\.])+/g)||[""],function(t){return t.replace(/\\\./g,".")})}function N(i){if(I.isPlainObject(i)){var o={};return I.each(i,function(t,e){e&&(o[t]=N(e))}),function(t,e,n,r){var i=o[e]||o._;return i!==O?i(t,e,n,r):t}}if(null===i)return function(t){return t};if("function"==typeof i)return function(t,e,n,r){return i(t,e,n,r)};if("string"!=typeof i||-1===i.indexOf(".")&&-1===i.indexOf("[")&&-1===i.indexOf("("))return function(t){return t[i]};var s=function(t,e,n){var r,i;if(""!==n)for(var o=0,a=(i=c(n)).length;o<a;o++){if(n=i[o].match(he),r=i[o].match(de),n){if(i[o]=i[o].replace(he,""),""!==i[o]&&(t=t[i[o]]),r=[],i.splice(0,o+1),i=i.join("."),Array.isArray(t))for(o=0,a=t.length;o<a;o++)r.push(s(t[o],e,i));t=""===(t=n[0].substring(1,n[0].length-1))?r:r.join(t);break}if(r)i[o]=i[o].replace(de,""),t=t[i[o]]();else{if(null===t||t[i[o]]===O)return O;t=t[i[o]]}}return t};return function(t,e){return s(t,e,i)}}function f(r){if(I.isPlainObject(r))return f(r._);if(null===r)return function(){};if("function"==typeof r)return function(t,e,n){r(t,"set",e,n)};if("string"!=typeof r||-1===r.indexOf(".")&&-1===r.indexOf("[")&&-1===r.indexOf("("))return function(t,e){t[r]=e};var l=function(t,e,n){var r;r=(n=c(n))[n.length-1];for(var i,o,a=0,s=n.length-1;a<s;a++){if("__proto__"===n[a]||"constructor"===n[a])throw Error("Cannot set prototype values");if(i=n[a].match(he),o=n[a].match(de),i){if(n[a]=n[a].replace(he,""),t[n[a]]=[],(r=n.slice()).splice(0,a+1),i=r.join("."),Array.isArray(e))for(o=0,s=e.length;o<s;o++)l(r={},e[o],i),t[n[a]].push(r);else t[n[a]]=e;return}o&&(n[a]=n[a].replace(de,""),t=t[n[a]](e)),null!==t[n[a]]&&t[n[a]]!==O||(t[n[a]]={}),t=t[n[a]]}r.match(de)?t[r.replace(de,"")](e):t[r.replace(he,"")]=e};return function(t,e){return l(t,e,r)}}function g(t){return ie(t.aoData,"_aData")}function s(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0,t.aIds={}}function h(t,e,n){for(var r=-1,i=0,o=t.length;i<o;i++)t[i]==e?r=i:t[i]>e&&t[i]--;-1!=r&&n===O&&t.splice(r,1)}function i(n,r,t,e){var i,o=n.aoData[r],a=function(t,e){for(;t.childNodes.length;)t.removeChild(t.firstChild);t.innerHTML=k(n,r,e,"display")};if("dom"!==t&&(t&&"auto"!==t||"dom"!==o.src)){var s=o.anCells;if(s)if(e!==O)a(s[e],e);else for(t=0,i=s.length;t<i;t++)a(s[t],t)}else o._aData=l(n,o,e,e===O?O:o._aData).data;if(o._aSortData=null,o._aFilterData=null,a=n.aoColumns,e!==O)a[e].sType=null;else{for(t=0,i=a.length;t<i;t++)a[t].sType=null;d(n,o)}}function l(t,e,n,r){var i,o,a,s=[],l=e.firstChild,u=0,c=t.aoColumns,h=t._rowReadObject,d=(r=r!==O?r:h?{}:[],function(t,e){if("string"==typeof t){var n=t.indexOf("@");-1!==n&&(n=t.substring(n+1),f(t)(r,e.getAttribute(n)))}}),p=function(t){n!==O&&n!==u||(o=c[u],a=t.innerHTML.trim(),o&&o._bAttrSrc?(f(o.mData._)(r,a),d(o.mData.sort,t),d(o.mData.type,t),d(o.mData.filter,t)):h?(o._setter||(o._setter=f(o.mData)),o._setter(r,a)):r[u]=a),u++};if(l)for(;l;)"TD"!=(i=l.nodeName.toUpperCase())&&"TH"!=i||(p(l),s.push(l)),l=l.nextSibling;else for(l=0,i=(s=e.anCells).length;l<i;l++)p(s[l]);return(e=e.firstChild?e:e.nTr)&&(e=e.getAttribute("id"))&&f(t.rowId)(r,e),{data:r,cells:s}}function m(t,e,n,r){var i,o,a,s,l,u=t.aoData[e],c=u._aData,h=[];if(null===u.nTr){for(i=n||b.createElement("tr"),u.nTr=i,u.anCells=h,i._DT_RowIndex=e,d(t,u),a=0,s=t.aoColumns.length;a<s;a++)o=t.aoColumns[a],(u=(l=!n)?b.createElement(o.sCellType):r[a])._DT_CellIndex={row:e,column:a},h.push(u),!l&&(!o.mRender&&o.mData===a||I.isPlainObject(o.mData)&&o.mData._===a+".display")||(u.innerHTML=k(t,e,a,"display")),o.sClass&&(u.className+=" "+o.sClass),o.bVisible&&!n?i.appendChild(u):!o.bVisible&&n&&u.parentNode.removeChild(u),o.fnCreatedCell&&o.fnCreatedCell.call(t.oInstance,u,k(t,e,a),c,e,a);Nt(t,"aoRowCreatedCallback",null,[i,c,e,h])}}function d(t,e){var n=e.nTr,r=e._aData;if(n){var i=t.rowIdFn(r);i&&(n.id=i),r.DT_RowClass&&(i=r.DT_RowClass.split(" "),e.__rowc=e.__rowc?le(e.__rowc.concat(i)):i,I(n).removeClass(e.__rowc.join(" ")).addClass(r.DT_RowClass)),r.DT_RowAttr&&I(n).attr(r.DT_RowAttr),r.DT_RowData&&I(n).data(r.DT_RowData)}}function p(t){var e,n,r,i,o,a=t.nTHead,s=t.nTFoot,l=0===I("th, td",a).length,u=t.oClasses,c=t.aoColumns;for(l&&(i=I("<tr/>").appendTo(a)),e=0,n=c.length;e<n;e++)o=c[e],r=I(o.nTh).addClass(o.sClass),l&&r.appendTo(i),t.oFeatures.bSort&&(r.addClass(o.sSortingClass),!1!==o.bSortable&&(r.attr("tabindex",t.iTabIndex).attr("aria-controls",t.sTableId),_t(t,o.nTh,e))),o.sTitle!=r[0].innerHTML&&r.html(o.sTitle),Bt(t,"header")(t,r,o,u);if(l&&W(t.aoHeader,a),I(a).children("tr").attr("role","row"),I(a).children("tr").children("th, td").addClass(u.sHeaderTH),I(s).children("tr").children("th, td").addClass(u.sFooterTH),null!==s)for(e=0,n=(t=t.aoFooter[0]).length;e<n;e++)(o=c[e]).nTf=t[e].cell,o.sClass&&I(o.nTf).addClass(o.sClass)}function M(t,e,n){var r,i,o,a,s=[],l=[],u=t.aoColumns.length;if(e){for(n===O&&(n=!1),r=0,i=e.length;r<i;r++){for(s[r]=e[r].slice(),s[r].nTr=e[r].nTr,o=u-1;0<=o;o--)!t.aoColumns[o].bVisible&&!n&&s[r].splice(o,1);l.push([])}for(r=0,i=s.length;r<i;r++){if(t=s[r].nTr)for(;o=t.firstChild;)t.removeChild(o);for(o=0,e=s[r].length;o<e;o++)if(a=u=1,l[r][o]===O){for(t.appendChild(s[r][o].cell),l[r][o]=1;s[r+u]!==O&&s[r][o].cell==s[r+u][o].cell;)l[r+u][o]=1,u++;for(;s[r][o+a]!==O&&s[r][o].cell==s[r][o+a].cell;){for(n=0;n<u;n++)l[r+n][o+a]=1;a++}I(s[r][o].cell).attr("rowspan",u).attr("colspan",a)}}}}function B(t){var e=Nt(t,"aoPreDrawCallback","preDraw",[t]);if(-1!==I.inArray(!1,e))dt(t,!1);else{e=[];var n=0,r=t.asStripeClasses,i=r.length,o=t.oLanguage,a=t.iInitDisplayStart,s="ssp"==jt(t),l=t.aiDisplay;t.bDrawing=!0,a!==O&&-1!==a&&(t._iDisplayStart=s?a:a>=t.fnRecordsDisplay()?0:a,t.iInitDisplayStart=-1);a=t._iDisplayStart;var u=t.fnDisplayEnd();if(t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,dt(t,!1);else if(s){if(!t.bDestroying&&!U(t))return}else t.iDraw++;if(0!==l.length)for(o=s?t.aoData.length:u,s=s?0:a;s<o;s++){var c=l[s],h=t.aoData[c];null===h.nTr&&m(t,c);var d=h.nTr;if(0!==i){var p=r[n%i];h._sRowStripe!=p&&(I(d).removeClass(h._sRowStripe).addClass(p),h._sRowStripe=p)}Nt(t,"aoRowCallback",null,[d,h._aData,n,s,c]),e.push(d),n++}else n=o.sZeroRecords,1==t.iDraw&&"ajax"==jt(t)?n=o.sLoadingRecords:o.sEmptyTable&&0===t.fnRecordsTotal()&&(n=o.sEmptyTable),e[0]=I("<tr/>",{"class":i?r[0]:""}).append(I("<td />",{valign:"top",colSpan:y(t),"class":t.oClasses.sRowEmpty}).html(n))[0];Nt(t,"aoHeaderCallback","header",[I(t.nTHead).children("tr")[0],g(t),a,u,l]),Nt(t,"aoFooterCallback","footer",[I(t.nTFoot).children("tr")[0],g(t),a,u,l]),(r=I(t.nTBody)).children().detach(),r.append(I(e)),Nt(t,"aoDrawCallback","draw",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}}function j(t,e){var n=t.oFeatures,r=n.bFilter;n.bSort&&Ct(t),r?G(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),!0!==e&&(t._iDisplayStart=0),t._drawHold=e,B(t),t._drawHold=!1}function V(t){var e=t.oClasses,n=I(t.nTable),r=(n=I("<div/>").insertBefore(n),t.oFeatures),i=I("<div/>",{id:t.sTableId+"_wrapper","class":e.sWrapper+(t.nTFoot?"":" "+e.sNoFooter)});t.nHolding=n[0],t.nTableWrapper=i[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var o,a,s,l,u,c,h=t.sDom.split(""),d=0;d<h.length;d++){if(o=null,"<"==(a=h[d])){if(s=I("<div/>")[0],"'"==(l=h[d+1])||'"'==l){for(u="",c=2;h[d+c]!=l;)u+=h[d+c],c++;"H"==u?u=e.sJUIHeader:"F"==u&&(u=e.sJUIFooter),-1!=u.indexOf(".")?(l=u.split("."),s.id=l[0].substr(1,l[0].length-1),s.className=l[1]):"#"==u.charAt(0)?s.id=u.substr(1,u.length-1):s.className=u,d+=c}i.append(s),i=I(s)}else if(">"==a)i=i.parent();else if("l"==a&&r.bPaginate&&r.bLengthChange)o=lt(t);else if("f"==a&&r.bFilter)o=J(t);else if("r"==a&&r.bProcessing)o=ht(t);else if("t"==a)o=pt(t);else if("i"==a&&r.bInfo)o=nt(t);else if("p"==a&&r.bPaginate)o=ut(t);else if(0!==$t.ext.feature.length)for(c=0,l=(s=$t.ext.feature).length;c<l;c++)if(a==s[c].cFeature){o=s[c].fnInit(t);break}o&&((s=t.aanFeatures)[a]||(s[a]=[]),s[a].push(o),i.append(o))}n.replaceWith(i),t.nHolding=null}function W(t,e){var n,r,i,o,a,s,l,u,c,h,d=I(e).children("tr");for(t.splice(0,t.length),i=0,s=d.length;i<s;i++)t.push([]);for(i=0,s=d.length;i<s;i++)for(r=(n=d[i]).firstChild;r;){if("TD"==r.nodeName.toUpperCase()||"TH"==r.nodeName.toUpperCase()){for(u=(u=1*r.getAttribute("colspan"))&&0!==u&&1!==u?u:1,c=(c=1*r.getAttribute("rowspan"))&&0!==c&&1!==c?c:1,o=0,a=t[i];a[o];)o++;for(l=o,h=1===u,a=0;a<u;a++)for(o=0;o<c;o++)t[i+o][l+a]={cell:r,unique:h},t[i+o].nTr=n}r=r.nextSibling}}function q(t,e,n){var r=[];n||(n=t.aoHeader,e&&W(n=[],e));e=0;for(var i=n.length;e<i;e++)for(var o=0,a=n[e].length;o<a;o++)!n[e][o].unique||r[o]&&t.bSortCellsTop||(r[o]=n[e][o].cell);return r}function H(r,t,e){if(Nt(r,"aoServerParams","serverParams",[t]),t&&Array.isArray(t)){var i={},o=/(.*?)\[\]$/;I.each(t,function(t,e){var n=e.name.match(o);n?(n=n[0],i[n]||(i[n]=[]),i[n].push(e.value)):i[e.name]=e.value}),t=i}var n,a=r.ajax,s=r.oInstance,l=function(t){Nt(r,null,"xhr",[r,t,r.jqXHR]),e(t)};if(I.isPlainObject(a)&&a.data){var u="function"==typeof(n=a.data)?n(t,r):n;t="function"==typeof n&&u?u:I.extend(!0,t,u);delete a.data}u={data:t,success:function(t){var e=t.error||t.sError;e&&kt(r,0,e),r.json=t,l(t)},dataType:"json",cache:!1,type:r.sServerMethod,error:function(t,e){var n=Nt(r,null,"xhr",[r,null,r.jqXHR]);-1===I.inArray(!0,n)&&("parsererror"==e?kt(r,0,"Invalid JSON response",1):4===t.readyState&&kt(r,0,"Ajax error",7)),dt(r,!1)}},r.oAjaxData=t,Nt(r,null,"preXhr",[r,t]),r.fnServerData?r.fnServerData.call(s,r.sAjaxSource,I.map(t,function(t,e){return{name:e,value:t}}),l,r):r.sAjaxSource||"string"==typeof a?r.jqXHR=I.ajax(I.extend(u,{url:a||r.sAjaxSource})):"function"==typeof a?r.jqXHR=a.call(s,t,l,r):(r.jqXHR=I.ajax(I.extend(u,a)),a.data=n)}function U(e){return!e.bAjaxDataGet||(e.iDraw++,dt(e,!0),H(e,t(e),function(t){z(e,t)}),!1)}function t(t){var e,n,r,i,o=t.aoColumns,a=o.length,s=t.oFeatures,l=t.oPreviousSearch,u=t.aoPreSearchCols,c=[],h=At(t);e=t._iDisplayStart,n=!1!==s.bPaginate?t._iDisplayLength:-1;var d=function(t,e){c.push({name:t,value:e})};d("sEcho",t.iDraw),d("iColumns",a),d("sColumns",ie(o,"sName").join(",")),d("iDisplayStart",e),d("iDisplayLength",n);var p={draw:t.iDraw,columns:[],order:[],start:e,length:n,search:{value:l.sSearch,regex:l.bRegex}};for(e=0;e<a;e++)r=o[e],i=u[e],n="function"==typeof r.mData?"function":r.mData,p.columns.push({data:n,name:r.sName,searchable:r.bSearchable,orderable:r.bSortable,search:{value:i.sSearch,regex:i.bRegex}}),d("mDataProp_"+e,n),s.bFilter&&(d("sSearch_"+e,i.sSearch),d("bRegex_"+e,i.bRegex),d("bSearchable_"+e,r.bSearchable)),s.bSort&&d("bSortable_"+e,r.bSortable);return s.bFilter&&(d("sSearch",l.sSearch),d("bRegex",l.bRegex)),s.bSort&&(I.each(h,function(t,e){p.order.push({column:e.col,dir:e.dir}),d("iSortCol_"+t,e.col),d("sSortDir_"+t,e.dir)}),d("iSortingCols",h.length)),null===(o=$t.ext.legacy.ajax)?t.sAjaxSource?c:p:o?c:p}function z(t,e){var n=$(t,e),r=e.sEcho!==O?e.sEcho:e.draw,i=e.iTotalRecords!==O?e.iTotalRecords:e.recordsTotal,o=e.iTotalDisplayRecords!==O?e.iTotalDisplayRecords:e.recordsFiltered;if(r!==O){if(1*r<t.iDraw)return;t.iDraw=1*r}for(s(t),t._iRecordsTotal=parseInt(i,10),t._iRecordsDisplay=parseInt(o,10),r=0,i=n.length;r<i;r++)R(t,n[r]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,B(t),t._bInitComplete||at(t,e),t.bAjaxDataGet=!0,dt(t,!1)}function $(t,e){var n=I.isPlainObject(t.ajax)&&t.ajax.dataSrc!==O?t.ajax.dataSrc:t.sAjaxDataProp;return"data"===n?e.aaData||e[n]:""!==n?N(n)(e):e}function J(n){var t=n.oClasses,e=n.sTableId,r=n.oLanguage,i=n.oPreviousSearch,o=n.aanFeatures,a='<input type="search" class="'+t.sFilterInput+'"/>',s=(s=r.sSearch).match(/_INPUT_/)?s.replace("_INPUT_",a):s+a,l=(t=I("<div/>",{id:o.f?null:e+"_filter","class":t.sFilter}).append(I("<label/>").append(s)),function(){var t=this.value?this.value:"";t!=i.sSearch&&(G(n,{sSearch:t,bRegex:i.bRegex,bSmart:i.bSmart,bCaseInsensitive:i.bCaseInsensitive}),n._iDisplayStart=0,B(n))}),u=(o=null!==n.searchDelay?n.searchDelay:"ssp"===jt(n)?400:0,I("input",t).val(i.sSearch).attr("placeholder",r.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",o?ve(l,o):l).on("mouseup",function(){setTimeout(function(){l.call(u[0])},10)}).on("keypress.DT",function(t){if(13==t.keyCode)return!1}).attr("aria-controls",e));return I(n.nTable).on("search.dt.DT",function(t,e){if(n===e)try{u[0]!==b.activeElement&&u.val(i.sSearch)}catch(r){}}),t[0]}function G(t,e,n){var r=t.oPreviousSearch,i=t.aoPreSearchCols,o=function(t){r.sSearch=t.sSearch,r.bRegex=t.bRegex,r.bSmart=t.bSmart,r.bCaseInsensitive=t.bCaseInsensitive};if(a(t),"ssp"!=jt(t)){for(Z(t,e.sSearch,n,e.bEscapeRegex!==O?!e.bEscapeRegex:e.bRegex,e.bSmart,e.bCaseInsensitive),o(e),e=0;e<i.length;e++)X(t,i[e].sSearch,e,i[e].bEscapeRegex!==O?!i[e].bEscapeRegex:i[e].bRegex,i[e].bSmart,i[e].bCaseInsensitive);K(t)}else o(e);t.bFiltered=!0,Nt(t,null,"search",[t])}function K(t){for(var e,n,r=$t.ext.search,i=t.aiDisplay,o=0,a=r.length;o<a;o++){for(var s=[],l=0,u=i.length;l<u;l++)n=i[l],e=t.aoData[n],r[o](t,e._aFilterData,n,e._aData,l)&&s.push(n);i.length=0,I.merge(i,s)}}function X(t,e,n,r,i,o){if(""!==e){var a=[],s=t.aiDisplay;for(r=Y(e,r,i,o),i=0;i<s.length;i++)e=t.aoData[s[i]]._aFilterData[n],r.test(e)&&a.push(s[i]);t.aiDisplay=a}}function Z(t,e,n,r,i,o){i=Y(e,r,i,o);var a,s=t.oPreviousSearch.sSearch,l=t.aiDisplayMaster;o=[];if(0!==$t.ext.search.length&&(n=!0),a=Q(t),e.length<=0)t.aiDisplay=l.slice();else{for((a||n||r||s.length>e.length||0!==e.indexOf(s)||t.bSorted)&&(t.aiDisplay=l.slice()),e=t.aiDisplay,n=0;n<e.length;n++)i.test(t.aoData[e[n]]._sFilterRow)&&o.push(e[n]);t.aiDisplay=o}}function Y(t,e,n,r){return t=e?t:pe(t),n&&(t="^(?=.*?"+I.map(t.match(/"[^"]+"|[^ ]+/g)||[""],function(t){if('"'===t.charAt(0)){var e=t.match(/^"(.*)"$/);t=e?e[1]:t}return t.replace('"',"")}).join(")(?=.*?")+").*$"),RegExp(t,r?"i":"")}function Q(t){var e,n,r,i,o,a,s,l,u=t.aoColumns,c=$t.ext.type.search;for(e=!1,n=0,i=t.aoData.length;n<i;n++)if(!(l=t.aoData[n])._aFilterData){for(a=[],r=0,o=u.length;r<o;r++)(e=u[r]).bSearchable?(s=k(t,n,r,"filter"),c[e.sType]&&(s=c[e.sType](s)),null===s&&(s=""),"string"!=typeof s&&s.toString&&(s=s.toString())):s="",s.indexOf&&-1!==s.indexOf("&")&&(fe.innerHTML=s,s=ge?fe.textContent:fe.innerText),s.replace&&(s=s.replace(/[\r\n\u2028]/g,"")),a.push(s);l._aFilterData=a,l._sFilterRow=a.join("  "),e=!0}return e}function tt(t){return{search:t.sSearch,smart:t.bSmart,regex:t.bRegex,caseInsensitive:t.bCaseInsensitive}}function et(t){return{sSearch:t.search,bSmart:t.smart,bRegex:t.regex,bCaseInsensitive:t.caseInsensitive}}function nt(t){var e=t.sTableId,n=t.aanFeatures.i,r=I("<div/>",{"class":t.oClasses.sInfo,id:n?null:e+"_info"});return n||(t.aoDrawCallback.push({fn:rt,sName:"information"}),r.attr("role","status").attr("aria-live","polite"),I(t.nTable).attr("aria-describedby",e+"_info")),r[0]}function rt(t){var e=t.aanFeatures.i;if(0!==e.length){var n=t.oLanguage,r=t._iDisplayStart+1,i=t.fnDisplayEnd(),o=t.fnRecordsTotal(),a=t.fnRecordsDisplay(),s=a?n.sInfo:n.sInfoEmpty;a!==o&&(s+=" "+n.sInfoFiltered),s=it(t,s+=n.sInfoPostFix),null!==(n=n.fnInfoCallback)&&(s=n.call(t.oInstance,t,r,i,o,a,s)),I(e).html(s)}}function it(t,e){var n=t.fnFormatNumber,r=t._iDisplayStart+1,i=t._iDisplayLength,o=t.fnRecordsDisplay(),a=-1===i;return e.replace(/_START_/g,n.call(t,r)).replace(/_END_/g,n.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,n.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(t,o)).replace(/_PAGE_/g,n.call(t,a?1:Math.ceil(r/i))).replace(/_PAGES_/g,n.call(t,a?1:Math.ceil(o/i)))}function ot(n){var r,t,e,i=n.iInitDisplayStart,o=n.aoColumns;t=n.oFeatures;var a=n.bDeferLoading;if(n.bInitialised){for(V(n),p(n),M(n,n.aoHeader),M(n,n.aoFooter),dt(n,!0),t.bAutoWidth&&mt(n),r=0,t=o.length;r<t;r++)(e=o[r]).sWidth&&(e.nTh.style.width=wt(e.sWidth));Nt(n,null,"preInit",[n]),j(n),("ssp"!=(o=jt(n))||a)&&("ajax"==o?H(n,[],function(t){var e=$(n,t);for(r=0;r<e.length;r++)R(n,e[r]);n.iInitDisplayStart=i,j(n),dt(n,!1),at(n,t)},n):(dt(n,!1),at(n)))}else setTimeout(function(){ot(n)},200)}function at(t,e){t._bInitComplete=!0,(e||t.oInit.aaData)&&F(t),Nt(t,null,"plugin-init",[t,e]),Nt(t,"aoInitComplete","init",[t,e])}function st(t,e){var n=parseInt(e,10);t._iDisplayLength=n,Mt(t),Nt(t,null,"length",[t,n])}function lt(r){for(var t=r.oClasses,e=r.sTableId,n=r.aLengthMenu,i=(o=Array.isArray(n[0]))?n[0]:n,o=(n=o?n[1]:n,I("<select/>",{name:e+"_length","aria-controls":e,"class":t.sLengthSelect})),a=0,s=i.length;a<s;a++)o[0][a]=new Option("number"==typeof n[a]?r.fnFormatNumber(n[a]):n[a],i[a]);var l=I("<div><label/></div>").addClass(t.sLength);return r.aanFeatures.l||(l[0].id=e+"_length"),l.children().append(r.oLanguage.sLengthMenu.replace("_MENU_",o[0].outerHTML)),I("select",l).val(r._iDisplayLength).on("change.DT",function(){st(r,I(this).val()),B(r)}),I(r.nTable).on("length.dt.DT",function(t,e,n){r===e&&I("select",l).val(n)}),l[0]}function ut(t){var e=t.sPaginationType,a=$t.ext.pager[e],s="function"==typeof a,l=function(t){B(t)},u=(e=I("<div/>").addClass(t.oClasses.sPaging+e)[0],t.aanFeatures);return s||a.fnInit(t,e,l),u.p||(e.id=t.sTableId+"_paginate",t.aoDrawCallback.push({fn:function(t){if(s){var e,n=t._iDisplayStart,r=t._iDisplayLength,i=t.fnRecordsDisplay(),o=(n=(o=-1===r)?0:Math.ceil(n/r),r=o?1:Math.ceil(i/r),i=a(n,r),0);for(e=u.p.length;o<e;o++)Bt(t,"pageButton")(t,u.p[o],o,i,n,r)}else a.fnUpdate(t,l)},sName:"pagination"})),e}function ct(t,e,n){var r=t._iDisplayStart,i=t._iDisplayLength,o=t.fnRecordsDisplay();return 0===o||-1===i?r=0:"number"==typeof e?o<(r=e*i)&&(r=0):"first"==e?r=0:"previous"==e?(r=0<=i?r-i:0)<0&&(r=0):"next"==e?r+i<o&&(r+=i):"last"==e?r=Math.floor((o-1)/i)*i:kt(t,0,"Unknown paging action: "+e,5),e=t._iDisplayStart!==r,t._iDisplayStart=r,e&&(Nt(t,null,"page",[t]),n&&B(t)),e}function ht(t){return I("<div/>",{id:t.aanFeatures.r?null:t.sTableId+"_processing","class":t.oClasses.sProcessing}).html(t.oLanguage.sProcessing).insertBefore(t.nTable)[0]}function dt(t,e){t.oFeatures.bProcessing&&I(t.aanFeatures.r).css("display",e?"block":"none"),Nt(t,null,"processing",[t,e])}function pt(t){(c=I(t.nTable)).attr("role","grid");var e=t.oScroll;if(""===e.sX&&""===e.sY)return t.nTable;var n=e.sX,r=e.sY,i=t.oClasses,o=c.children("caption"),a=o.length?o[0]._captionSide:null,s=I(c[0].cloneNode(!1)),l=I(c[0].cloneNode(!1)),u=c.children("tfoot");u.length||(u=null),s=I("<div/>",{"class":i.sScrollWrapper}).append(I("<div/>",{"class":i.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:n?n?wt(n):null:"100%"}).append(I("<div/>",{"class":i.sScrollHeadInner}).css({"box-sizing":"content-box",width:e.sXInner||"100%"}).append(s.removeAttr("id").css("margin-left",0).append("top"===a?o:null).append(c.children("thead"))))).append(I("<div/>",{"class":i.sScrollBody}).css({position:"relative",overflow:"auto",width:n?wt(n):null}).append(c)),u&&s.append(I("<div/>",{"class":i.sScrollFoot}).css({overflow:"hidden",border:0,width:n?n?wt(n):null:"100%"}).append(I("<div/>",{"class":i.sScrollFootInner}).append(l.removeAttr("id").css("margin-left",0).append("bottom"===a?o:null).append(c.children("tfoot")))));var c,h=(c=s.children())[0],d=(i=c[1],u?c[2]:null);return n&&I(i).on("scroll.DT",function(){var t=this.scrollLeft;h.scrollLeft=t,u&&(d.scrollLeft=t)}),I(i).css("max-height",r),e.bCollapse||I(i).css("height",r),t.nScrollHead=h,t.nScrollBody=i,t.nScrollFoot=d,t.aoDrawCallback.push({fn:ft,sName:"scrolling"}),s[0]}function ft(n){var t,e,r,i,o,a=(u=n.oScroll).sX,s=u.sXInner,l=u.sY,u=u.iBarWidth,c=I(n.nScrollHead),h=c[0].style,d=(f=c.children("div"))[0].style,p=f.children("table"),f=n.nScrollBody,g=I(f),m=f.style,v=I(n.nScrollFoot).children("div"),y=v.children("table"),b=I(n.nTHead),w=I(n.nTable),A=w[0],C=A.style,x=n.nTFoot?I(n.nTFoot):null,S=n.oBrowser,_=S.bScrollOversize,D=ie(n.aoColumns,"nTh"),T=[],E=[],R=[],L=[],k=function(t){(t=t.style).paddingTop="0",t.paddingBottom="0",t.borderTopWidth="0",t.borderBottomWidth="0",t.height=0};e=f.scrollHeight>f.clientHeight,n.scrollBarVis!==e&&n.scrollBarVis!==O?(n.scrollBarVis=e,F(n)):(n.scrollBarVis=e,w.children("thead, tfoot").remove(),x&&(r=x.clone().prependTo(w),t=x.find("tr"),r=r.find("tr")),i=b.clone().prependTo(w),b=b.find("tr"),e=i.find("tr"),i.find("th, td").removeAttr("tabindex"),a||(m.width="100%",c[0].style.width="100%"),I.each(q(n,i),function(t,e){o=P(n,t),e.style.width=n.aoColumns[o].sWidth}),x&&gt(function(t){t.style.width=""},r),c=w.outerWidth(),""===a?(C.width="100%",_&&(w.find("tbody").height()>f.offsetHeight||"scroll"==g.css("overflow-y"))&&(C.width=wt(w.outerWidth()-u)),c=w.outerWidth()):""!==s&&(C.width=wt(s),c=w.outerWidth()),gt(k,e),gt(function(t){R.push(t.innerHTML),T.push(wt(I(t).css("width")))},e),gt(function(t,e){-1!==I.inArray(t,D)&&(t.style.width=T[e])},b),I(e).height(0),x&&(gt(k,r),gt(function(t){L.push(t.innerHTML),E.push(wt(I(t).css("width")))},r),gt(function(t,e){t.style.width=E[e]},t),I(r).height(0)),gt(function(t,e){t.innerHTML='<div class="dataTables_sizing">'+R[e]+"</div>",t.childNodes[0].style.height="0",t.childNodes[0].style.overflow="hidden",t.style.width=T[e]},e),x&&gt(function(t,e){t.innerHTML='<div class="dataTables_sizing">'+L[e]+"</div>",t.childNodes[0].style.height="0",t.childNodes[0].style.overflow="hidden",t.style.width=E[e]},r),w.outerWidth()<c?(t=f.scrollHeight>f.offsetHeight||"scroll"==g.css("overflow-y")?c+u:c,_&&(f.scrollHeight>f.offsetHeight||"scroll"==g.css("overflow-y"))&&(C.width=wt(t-u)),(""===a||""!==s)&&kt(n,1,"Possible column misalignment",6)):t="100%",m.width=wt(t),h.width=wt(t),x&&(n.nScrollFoot.style.width=wt(t)),!l&&_&&(m.height=wt(A.offsetHeight+u)),a=w.outerWidth(),p[0].style.width=wt(a),d.width=wt(a),s=w.height()>f.clientHeight||"scroll"==g.css("overflow-y"),d[l="padding"+(S.bScrollbarLeft?"Left":"Right")]=s?u+"px":"0px",x&&(y[0].style.width=wt(a),v[0].style.width=wt(a),v[0].style[l]=s?u+"px":"0px"),w.children("colgroup").insertBefore(w.children("thead")),g.trigger("scroll"),!n.bSorted&&!n.bFiltered||n._drawHold||(f.scrollTop=0))}function gt(t,e,n){for(var r,i,o=0,a=0,s=e.length;a<s;){for(r=e[a].firstChild,i=n?n[a].firstChild:null;r;)1===r.nodeType&&(n?t(r,i,o):t(r,o),o++),r=r.nextSibling,i=n?i.nextSibling:null;a++}}function mt(t){var e,n,r=t.nTable,i=t.aoColumns,o=(g=t.oScroll).sY,a=g.sX,s=g.sXInner,l=i.length,u=T(t,"bVisible"),c=I("th",t.nTHead),h=r.getAttribute("width"),d=r.parentNode,p=!1,f=t.oBrowser,g=f.bScrollOversize;for((e=r.style.width)&&-1!==e.indexOf("%")&&(h=e),e=0;e<u.length;e++)null!==(n=i[u[e]]).sWidth&&(n.sWidth=vt(n.sWidthOrig,d),p=!0);if(g||!p&&!a&&!o&&l==y(t)&&l==c.length)for(e=0;e<l;e++)null!==(u=P(t,e))&&(i[u].sWidth=wt(c.eq(e).width()));else{(l=I(r).clone().css("visibility","hidden").removeAttr("id")).find("tbody tr").remove();var m=I("<tr/>").appendTo(l.find("tbody"));for(l.find("thead, tfoot").remove(),l.append(I(t.nTHead).clone()).append(I(t.nTFoot).clone()),l.find("tfoot th, tfoot td").css("width",""),c=q(t,l.find("thead")[0]),e=0;e<u.length;e++)n=i[u[e]],c[e].style.width=null!==n.sWidthOrig&&""!==n.sWidthOrig?wt(n.sWidthOrig):"",n.sWidthOrig&&a&&I(c[e]).append(I("<div/>").css({width:n.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(t.aoData.length)for(e=0;e<u.length;e++)n=i[p=u[e]],I(yt(t,p)).clone(!1).append(n.sContentPadding).appendTo(m);for(I("[name]",l).removeAttr("name"),n=I("<div/>").css(a||o?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(l).appendTo(d),a&&s?l.width(s):a?(l.css("width","auto"),l.removeAttr("width"),l.width()<d.clientWidth&&h&&l.width(d.clientWidth)):o?l.width(d.clientWidth):h&&l.width(h),e=o=0;e<u.length;e++)s=(d=I(c[e])).outerWidth()-d.width(),o+=d=f.bBounding?Math.ceil(c[e].getBoundingClientRect().width):d.outerWidth(),i[u[e]].sWidth=wt(d-s);r.style.width=wt(o),n.remove()}h&&(r.style.width=wt(h)),!h&&!a||t._reszEvt||(r=function(){I(v).on("resize.DT-"+t.sInstance,ve(function(){F(t)}))},g?setTimeout(r,1e3):r(),t._reszEvt=!0)}function vt(t,e){if(!t)return 0;var n=I("<div/>").css("width",wt(t)).appendTo(e||b.body),r=n[0].offsetWidth;return n.remove(),r}function yt(t,e){var n=bt(t,e);if(n<0)return null;var r=t.aoData[n];return r.nTr?r.anCells[e]:I("<td/>").html(k(t,n,e,"display"))[0]}function bt(t,e){for(var n,r=-1,i=-1,o=0,a=t.aoData.length;o<a;o++)(n=(n=(n=k(t,o,e,"display")+"").replace(me,"")).replace(/&nbsp;/g," ")).length>r&&(r=n.length,i=o);return i}function wt(t){return null===t?"0px":"number"==typeof t?t<0?"0px":t+"px":t.match(/\d$/)?t+"px":t}function At(t){var e,n,r,i,o,a,s=[],l=t.aoColumns;e=t.aaSortingFixed,n=I.isPlainObject(e);var u=[];for(r=function(t){t.length&&!Array.isArray(t[0])?u.push(t):I.merge(u,t)},Array.isArray(e)&&r(e),n&&e.pre&&r(e.pre),r(t.aaSorting),n&&e.post&&r(e.post),t=0;t<u.length;t++)for(e=0,n=(r=l[a=u[t][0]].aDataSort).length;e<n;e++)o=l[i=r[e]].sType||"string",u[t]._idx===O&&(u[t]._idx=I.inArray(u[t][1],l[i].asSorting)),s.push({src:a,col:i,dir:u[t][1],index:u[t]._idx,type:o,formatter:$t.ext.type.order[o+"-pre"]});return s}function Ct(t){var e,n,r,u,c=[],h=$t.ext.type.order,d=t.aoData,i=0,o=t.aiDisplayMaster;for(a(t),e=0,n=(u=At(t)).length;e<n;e++)(r=u[e]).formatter&&i++,Tt(t,r.col);if("ssp"!=jt(t)&&0!==u.length){for(e=0,n=o.length;e<n;e++)c[o[e]]=e;i===u.length?o.sort(function(t,e){var n,r,i,o,a=u.length,s=d[t]._aSortData,l=d[e]._aSortData;for(i=0;i<a;i++)if(0!==(n=(n=s[(o=u[i]).col])<(r=l[o.col])?-1:r<n?1:0))return"asc"===o.dir?n:-n;return(n=c[t])<(r=c[e])?-1:r<n?1:0}):o.sort(function(t,e){var n,r,i,o,a=u.length,s=d[t]._aSortData,l=d[e]._aSortData;for(i=0;i<a;i++)if(n=s[(o=u[i]).col],r=l[o.col],0!==(n=(o=h[o.type+"-"+o.dir]||h["string-"+o.dir])(n,r)))return n;return(n=c[t])<(r=c[e])?-1:r<n?1:0})}t.bSorted=!0}function xt(t){for(var e,n,r=t.aoColumns,i=At(t),o=(t=t.oLanguage.oAria,0),a=r.length;o<a;o++){var s=(n=r[o]).asSorting;e=n.sTitle.replace(/<.*?>/g,"");var l=n.nTh
;l.removeAttribute("aria-sort"),n.bSortable&&(0<i.length&&i[0].col==o?(l.setAttribute("aria-sort","asc"==i[0].dir?"ascending":"descending"),n=s[i[0].index+1]||s[0]):n=s[0],e+="asc"===n?t.sSortAscending:t.sSortDescending),l.setAttribute("aria-label",e)}}function St(t,e,n,r){var i=t.aaSorting,o=t.aoColumns[e].asSorting,a=function(t,e){var n=t._idx;return n===O&&(n=I.inArray(t[1],o)),n+1<o.length?n+1:e?null:0};"number"==typeof i[0]&&(i=t.aaSorting=[i]),n&&t.oFeatures.bSortMulti?-1!==(n=I.inArray(e,ie(i,"0")))?(null===(e=a(i[n],!0))&&1===i.length&&(e=0),null===e?i.splice(n,1):(i[n][1]=o[e],i[n]._idx=e)):(i.push([e,o[0],0]),i[i.length-1]._idx=0):i.length&&i[0][0]==e?(e=a(i[0]),i.length=1,i[0][1]=o[e],i[0]._idx=e):(i.length=0,i.push([e,o[0]]),i[0]._idx=0),j(t),"function"==typeof r&&r(t)}function _t(e,t,n,r){var i=e.aoColumns[n];Ft(t,{},function(t){!1!==i.bSortable&&(e.oFeatures.bProcessing?(dt(e,!0),setTimeout(function(){St(e,n,t.shiftKey,r),"ssp"!==jt(e)&&dt(e,!1)},0)):St(e,n,t.shiftKey,r))})}function Dt(t){var e,n,r=t.aLastSort,i=t.oClasses.sSortColumn,o=At(t),a=t.oFeatures;if(a.bSort&&a.bSortClasses){for(a=0,e=r.length;a<e;a++)n=r[a].src,I(ie(t.aoData,"anCells",n)).removeClass(i+(a<2?a+1:3));for(a=0,e=o.length;a<e;a++)n=o[a].src,I(ie(t.aoData,"anCells",n)).addClass(i+(a<2?a+1:3))}t.aLastSort=o}function Tt(t,e){var n,r=t.aoColumns[e],i=$t.ext.order[r.sSortDataType];i&&(n=i.call(t.oInstance,t,e,u(t,e)));for(var o,a=$t.ext.type.order[r.sType+"-pre"],s=0,l=t.aoData.length;s<l;s++)(r=t.aoData[s])._aSortData||(r._aSortData=[]),(!r._aSortData[e]||i)&&(o=i?n[s]:k(t,s,e,"sort"),r._aSortData[e]=a?a(o):o)}function Et(n){if(n.oFeatures.bStateSave&&!n.bDestroying){var t={time:+new Date,start:n._iDisplayStart,length:n._iDisplayLength,order:I.extend(!0,[],n.aaSorting),search:tt(n.oPreviousSearch),columns:I.map(n.aoColumns,function(t,e){return{visible:t.bVisible,search:tt(n.aoPreSearchCols[e])}})};Nt(n,"aoStateSaveParams","stateSaveParams",[n,t]),n.oSavedState=t,n.fnStateSaveCallback.call(n.oInstance,n,t)}}function Rt(n,t,r){var i,o,a=n.aoColumns;t=function(t){if(t&&t.time){var e=Nt(n,"aoStateLoadParams","stateLoadParams",[n,t]);if(-1===I.inArray(!1,e)&&!(0<(e=n.iStateDuration)&&t.time<+new Date-1e3*e||t.columns&&a.length!==t.columns.length)){if(n.oLoadedState=I.extend(!0,{},t),t.start!==O&&(n._iDisplayStart=t.start,n.iInitDisplayStart=t.start),t.length!==O&&(n._iDisplayLength=t.length),t.order!==O&&(n.aaSorting=[],I.each(t.order,function(t,e){n.aaSorting.push(e[0]>=a.length?[0,e[1]]:e)})),t.search!==O&&I.extend(n.oPreviousSearch,et(t.search)),t.columns)for(i=0,o=t.columns.length;i<o;i++)(e=t.columns[i]).visible!==O&&(a[i].bVisible=e.visible),e.search!==O&&I.extend(n.aoPreSearchCols[i],et(e.search));Nt(n,"aoStateLoaded","stateLoaded",[n,t])}}r()};if(n.oFeatures.bStateSave){var e=n.fnStateLoadCallback.call(n.oInstance,n,t);e!==O&&t(e)}else r()}function Lt(t){var e=$t.settings;return-1!==(t=I.inArray(t,ie(e,"nTable")))?e[t]:null}function kt(t,e,n,r){if(n="DataTables warning: "+(t?"table id="+t.sTableId+" - ":"")+n,r&&(n+=". For more information about this error, please see http://datatables.net/tn/"+r),e)v.console&&console.log&&console.log(n);else if(e=(e=$t.ext).sErrMode||e.errMode,t&&Nt(t,null,"error",[t,r,n]),"alert"==e)alert(n);else{if("throw"==e)throw Error(n);"function"==typeof e&&e(t,r,n)}}function It(n,r,t,e){Array.isArray(t)?I.each(t,function(t,e){Array.isArray(e)?It(n,r,e[0],e[1]):It(n,r,e)}):(e===O&&(e=t),r[t]!==O&&(n[e]=r[t]))}function Ot(t,e,n){var r,i;for(i in e)e.hasOwnProperty(i)&&(r=e[i],I.isPlainObject(r)?(I.isPlainObject(t[i])||(t[i]={}),I.extend(!0,t[i],r)):t[i]=n&&"data"!==i&&"aaData"!==i&&Array.isArray(r)?r.slice():r);return t}function Ft(e,t,n){I(e).on("click.DT",t,function(t){I(e).trigger("blur"),n(t)}).on("keypress.DT",t,function(t){13===t.which&&(t.preventDefault(),n(t))}).on("selectstart.DT",function(){return!1})}function Pt(t,e,n,r){n&&t[e].push({fn:n,sName:r})}function Nt(e,t,n,r){var i=[];return t&&(i=I.map(e[t].slice().reverse(),function(t){return t.fn.apply(e.oInstance,r)})),null!==n&&(t=I.Event(n+".dt"),I(e.nTable).trigger(t,r),i.push(t.result)),i}function Mt(t){var e=t._iDisplayStart,n=t.fnDisplayEnd(),r=t._iDisplayLength;n<=e&&(e=n-r),e-=e%r,(-1===r||e<0)&&(e=0),t._iDisplayStart=e}function Bt(t,e){var n=t.renderer,r=$t.ext.renderer[e];return I.isPlainObject(n)&&n[e]?r[n[e]]||r._:"string"==typeof n&&r[n]||r._}function jt(t){return t.oFeatures.bServerSide?"ssp":t.ajax||t.sAjaxSource?"ajax":"dom"}function Vt(t,e){var n=[],r=(n=ke.numbers_length,Math.floor(n/2));return e<=n?n=ae(0,e):t<=r?((n=ae(0,n-2)).push("ellipsis"),n.push(e-1)):(e-1-r<=t?n=ae(e-(n-2),e):((n=ae(t-r+2,t+r-1)).push("ellipsis"),n.push(e-1)),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function Wt(n){I.each({num:function(t){return Ie(t,n)},"num-fmt":function(t){return Ie(t,n,Yt)},"html-num":function(t){return Ie(t,n,Kt)},"html-num-fmt":function(t){return Ie(t,n,Kt,Yt)}},function(t,e){qt.type.order[t+n+"-pre"]=e,t.match(/^html\-/)&&(qt.type.search[t+n]=qt.type.search.html)})}function e(e){return function(){var t=[Lt(this[$t.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return $t.ext.internal[e].apply(this,t)}}var qt,Ht,Ut,zt,$t=function(m){this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new Ht(t?Lt(this[qt.iApiIndex]):this)},this.fnAddData=function(t,e){var n=this.api(!0),r=Array.isArray(t)&&(Array.isArray(t[0])||I.isPlainObject(t[0]))?n.rows.add(t):n.row.add(t);return(e===O||e)&&n.draw(),r.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),n=e.settings()[0],r=n.oScroll;t===O||t?e.draw(!1):(""!==r.sX||""!==r.sY)&&ft(n)},this.fnClearTable=function(t){var e=this.api(!0).clear();(t===O||t)&&e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,n){var r=this.api(!0),i=(t=r.rows(t)).settings()[0],o=i.aoData[t[0][0]];return t.remove(),e&&e.call(this,i,o),(n===O||n)&&r.draw(),o},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(t)},this.fnFilter=function(t,e,n,r,i,o){i=this.api(!0),null===e||e===O?i.search(t,n,r,o):i.column(e).search(t,n,r,o),i.draw()},this.fnGetData=function(t,e){var n=this.api(!0);if(t===O)return n.data().toArray();var r=t.nodeName?t.nodeName.toLowerCase():"";return e!==O||"td"==r||"th"==r?n.cell(t,e).data():n.row(t).data()||null},this.fnGetNodes=function(t){var e=this.api(!0);return t!==O?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),n=t.nodeName.toUpperCase();return"TR"==n?e.row(t).index():"TD"==n||"TH"==n?[(t=e.cell(t).index()).row,t.columnVisible,t.column]:null},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,n){return this.api(!0).row(t).child(e,n).show().child()[0]},this.fnPageChange=function(t,e){var n=this.api(!0).page(t);(e===O||e)&&n.draw(!1)},this.fnSetColumnVis=function(t,e,n){t=this.api(!0).column(t).visible(e),(n===O||n)&&t.columns.adjust().draw()},this.fnSettings=function(){return Lt(this[qt.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,n){this.api(!0).order.listener(t,e,n)},this.fnUpdate=function(t,e,n,r,i){var o=this.api(!0);return n===O||null===n?o.row(e).data(t):o.cell(e,n).data(t),(i===O||i)&&o.columns.adjust(),(r===O||r)&&o.draw(),0},this.fnVersionCheck=qt.fnVersionCheck;var v=this,y=m===O,b=this.length;for(var t in y&&(m={}),this.oApi=this.internal=qt.internal,$t.ext.internal)t&&(this[t]=e(t));return this.each(function(){var n,t={},r=1<b?Ot(t,m,!0):m,i=0,o=(t=this.getAttribute("id"),!1),e=$t.defaults,a=I(this);if("table"!=this.nodeName.toLowerCase())kt(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{C(e),x(e.column),w(e,e,!0),w(e.column,e.column,!0),w(e,I.extend(r,a.data()),!0);var s=$t.settings;i=0;for(n=s.length;i<n;i++){var l=s[i];if(l.nTable==this||l.nTHead&&l.nTHead.parentNode==this||l.nTFoot&&l.nTFoot.parentNode==this){var u=r.bRetrieve!==O?r.bRetrieve:e.bRetrieve;if(y||u)return l.oInstance;if(r.bDestroy!==O?r.bDestroy:e.bDestroy){l.oInstance.fnDestroy();break}return void kt(l,0,"Cannot reinitialise DataTable",3)}if(l.sTableId==this.id){s.splice(i,1);break}}null!==t&&""!==t||(this.id=t="DataTables_Table_"+$t.ext._unique++);var c=I.extend(!0,{},$t.models.oSettings,{sDestroyWidth:a[0].style.width,sInstance:t,sTableId:t});c.nTable=this,c.oApi=v.internal,c.oInit=r,s.push(c),c.oInstance=1===v.length?v:a.dataTable(),C(r),A(r.oLanguage),r.aLengthMenu&&!r.iDisplayLength&&(r.iDisplayLength=Array.isArray(r.aLengthMenu[0])?r.aLengthMenu[0][0]:r.aLengthMenu[0]),r=Ot(I.extend(!0,{},e),r),It(c.oFeatures,r,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" ")),It(c,r,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),It(c.oScroll,r,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),It(c.oLanguage,r,"fnInfoCallback"),Pt(c,"aoDrawCallback",r.fnDrawCallback,"user"),Pt(c,"aoServerParams",r.fnServerParams,"user"),Pt(c,"aoStateSaveParams",r.fnStateSaveParams,"user"),Pt(c,"aoStateLoadParams",r.fnStateLoadParams,"user"),Pt(c,"aoStateLoaded",r.fnStateLoaded,"user"),Pt(c,"aoRowCallback",r.fnRowCallback,"user"),Pt(c,"aoRowCreatedCallback",r.fnCreatedRow,"user"),Pt(c,"aoHeaderCallback",r.fnHeaderCallback,"user"),Pt(c,"aoFooterCallback",r.fnFooterCallback,"user"),Pt(c,"aoInitComplete",r.fnInitComplete,"user"),Pt(c,"aoPreDrawCallback",r.fnPreDrawCallback,"user"),c.rowIdFn=N(r.rowId),S(c);var h=c.oClasses;I.extend(h,$t.ext.classes,r.oClasses),a.addClass(h.sTable),c.iInitDisplayStart===O&&(c.iInitDisplayStart=r.iDisplayStart,c._iDisplayStart=r.iDisplayStart),null!==r.iDeferLoading&&(c.bDeferLoading=!0,t=Array.isArray(r.iDeferLoading),c._iRecordsDisplay=t?r.iDeferLoading[0]:r.iDeferLoading,c._iRecordsTotal=t?r.iDeferLoading[1]:r.iDeferLoading);var d=c.oLanguage;I.extend(!0,d,r.oLanguage),d.sUrl&&(I.ajax({dataType:"json",url:d.sUrl,success:function(t){A(t),w(e.oLanguage,t),I.extend(!0,d,t),ot(c)},error:function(){ot(c)}}),o=!0),null===r.asStripeClasses&&(c.asStripeClasses=[h.sStripeOdd,h.sStripeEven]);t=c.asStripeClasses;var p=a.children("tbody").find("tr").eq(0);if(-1!==I.inArray(!0,I.map(t,function(t){return p.hasClass(t)}))&&(I("tbody tr",this).removeClass(t.join(" ")),c.asDestroyStripes=t.slice()),t=[],0!==(s=this.getElementsByTagName("thead")).length&&(W(c.aoHeader,s[0]),t=q(c)),null===r.aoColumns)for(s=[],i=0,n=t.length;i<n;i++)s.push(null);else s=r.aoColumns;for(i=0,n=s.length;i<n;i++)_(c,t?t[i]:null);if(E(c,r.aoColumnDefs,s,function(t,e){D(c,t,e)}),p.length){var f=function(t,e){return null!==t.getAttribute("data-"+e)?e:null};I(p[0]).children("th, td").each(function(t,e){var n=c.aoColumns[t];if(n.mData===t){var r=f(e,"sort")||f(e,"order"),i=f(e,"filter")||f(e,"search");null===r&&null===i||(n.mData={_:t+".display",sort:null!==r?t+".@data-"+r:O,type:null!==r?t+".@data-"+r:O,filter:null!==i?t+".@data-"+i:O},D(c,t))}})}var g=c.oFeatures;t=function(){if(r.aaSorting===O){var t=c.aaSorting;for(i=0,n=t.length;i<n;i++)t[i][1]=c.aoColumns[i].asSorting[0]}Dt(c),g.bSort&&Pt(c,"aoDrawCallback",function(){if(c.bSorted){var t=At(c),n={};I.each(t,function(t,e){n[e.src]=e.dir}),Nt(c,null,"order",[c,t,n]),xt(c)}}),Pt(c,"aoDrawCallback",function(){(c.bSorted||"ssp"===jt(c)||g.bDeferRender)&&Dt(c)},"sc");t=a.children("caption").each(function(){this._captionSide=I(this).css("caption-side")});var e=a.children("thead");if(0===e.length&&(e=I("<thead/>").appendTo(a)),c.nTHead=e[0],0===(e=a.children("tbody")).length&&(e=I("<tbody/>").appendTo(a)),c.nTBody=e[0],0===(e=a.children("tfoot")).length&&0<t.length&&(""!==c.oScroll.sX||""!==c.oScroll.sY)&&(e=I("<tfoot/>").appendTo(a)),0===e.length||0===e.children().length?a.addClass(h.sNoFooter):0<e.length&&(c.nTFoot=e[0],W(c.aoFooter,c.nTFoot)),r.aaData)for(i=0;i<r.aaData.length;i++)R(c,r.aaData[i]);else(c.bDeferLoading||"dom"==jt(c))&&L(c,I(c.nTBody).children("tr"));c.aiDisplay=c.aiDisplayMaster.slice(),!(c.bInitialised=!0)===o&&ot(c)};r.bStateSave?(g.bStateSave=!0,Pt(c,"aoDrawCallback",Et,"state_save"),Rt(c,r,t)):t()}}),v=null,this},Jt={},Gt=/[\r\n\u2028]/g,Kt=/<.*?>/g,Xt=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,Zt=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),Yt=/['\u00A0,$\xa3\u20ac\xa5%\u2009\u202F\u20BD\u20a9\u20BArfk\u0243\u039e]/gi,Qt=function(t){return!t||!0===t||"-"===t},te=function(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null},ee=function(t,e){return Jt[e]||(Jt[e]=RegExp(pe(e),"g")),"string"==typeof t&&"."!==e?t.replace(/\./g,"").replace(Jt[e],"."):t},ne=function(t,e,n){var r="string"==typeof t;return!!Qt(t)||(e&&r&&(t=ee(t,e)),n&&r&&(t=t.replace(Yt,"")),!isNaN(parseFloat(t))&&isFinite(t))},re=function(t,e,n){return!!Qt(t)||((Qt(t)||"string"==typeof t)&&!!ne(t.replace(Kt,""),e,n)||null)},ie=function(t,e,n){var r=[],i=0,o=t.length;if(n!==O)for(;i<o;i++)t[i]&&t[i][e]&&r.push(t[i][e][n]);else for(;i<o;i++)t[i]&&r.push(t[i][e]);return r},oe=function(t,e,n,r){var i=[],o=0,a=e.length;if(r!==O)for(;o<a;o++)t[e[o]][n]&&i.push(t[e[o]][n][r]);else for(;o<a;o++)i.push(t[e[o]][n]);return i},ae=function(t,e){var n,r=[];e===O?(e=0,n=t):(n=e,e=t);for(var i=e;i<n;i++)r.push(i);return r},se=function(t){for(var e=[],n=0,r=t.length;n<r;n++)t[n]&&e.push(t[n]);return e},le=function(t){var e;t:{if(!(t.length<2))for(var n=(e=t.slice().sort())[0],r=1,i=e.length;r<i;r++){if(e[r]===n){e=!1;break t}n=e[r]}e=!0}if(e)return t.slice();e=[];i=t.length;var o,a=0;r=0;t:for(;r<i;r++){for(n=t[r],o=0;o<a;o++)if(e[o]===n)continue t;e.push(n),a++}return e},ue=function(t,e){if(Array.isArray(e))for(var n=0;n<e.length;n++)ue(t,e[n]);else t.push(e);return t};Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),$t.util={throttle:function(r,t){var i,o,a=t!==O?t:200;return function(){var t=this,e=+new Date,n=arguments;i&&e<i+a?(clearTimeout(o),o=setTimeout(function(){i=O,r.apply(t,n)},a)):(i=e,r.apply(t,n))}},escapeRegex:function(t){return t.replace(Zt,"\\$1")}};var ce=function(t,e,n){t[e]!==O&&(t[n]=t[e])},he=/\[.*?\]$/,de=/\(\)$/,pe=$t.util.escapeRegex,fe=I("<div>")[0],ge=fe.textContent!==O,me=/<.*?>/g,ve=$t.util.throttle,ye=[],be=Array.prototype,we=function(t){var e,n,r=$t.settings,i=I.map(r,function(t){return t.nTable});return t?t.nTable&&t.oApi?[t]:t.nodeName&&"table"===t.nodeName.toLowerCase()?-1!==(e=I.inArray(t,i))?[r[e]]:null:t&&"function"==typeof t.settings?t.settings().toArray():("string"==typeof t?n=I(t):t instanceof I&&(n=t),n?n.map(function(){return-1!==(e=I.inArray(this,i))?r[e]:null}).toArray():void 0):[]};Ht=function(t,e){if(!(this instanceof Ht))return new Ht(t,e);var n=[],r=function(t){(t=we(t))&&n.push.apply(n,t)};if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)r(t[i]);else r(t);this.context=le(n),e&&I.merge(this,e),this.selector={rows:null,cols:null,opts:null},Ht.extend(this,this,ye)},$t.Api=Ht,I.extend(Ht.prototype,{any:function(){return 0!==this.count()},concat:be.concat,context:[],count:function(){return this.flatten().length},each:function(t){for(var e=0,n=this.length;e<n;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new Ht(e[t],this[t]):null},filter:function(t){var e=[];if(be.filter)e=be.filter.call(this,t,this);else for(var n=0,r=this.length;n<r;n++)t.call(this,this[n],n,this)&&e.push(this[n]);return new Ht(this.context,e)},flatten:function(){var t=[];return new Ht(this.context,t.concat.apply(t,this.toArray()))},join:be.join,indexOf:be.indexOf||function(t,e){for(var n=e||0,r=this.length;n<r;n++)if(this[n]===t)return n;return-1},iterator:function(t,e,n,r){var i,o,a,s,l,u,c,h=[],d=this.context,p=this.selector;for("string"==typeof t&&(r=n,n=e,e=t,t=!1),o=0,a=d.length;o<a;o++){var f=new Ht(d[o]);if("table"===e)(i=n.call(f,d[o],o))!==O&&h.push(i);else if("columns"===e||"rows"===e)(i=n.call(f,d[o],this[o],o))!==O&&h.push(i);else if("column"===e||"column-rows"===e||"row"===e||"cell"===e)for(c=this[o],"column-rows"===e&&(u=De(d[o],p.opts)),s=0,l=c.length;s<l;s++)i=c[s],(i="cell"===e?n.call(f,d[o],i.row,i.column,o,s):n.call(f,d[o],i,o,s,u))!==O&&h.push(i)}return h.length||r?((e=(t=new Ht(d,t?h.concat.apply([],h):h)).selector).rows=p.rows,e.cols=p.cols,e.opts=p.opts,t):this},lastIndexOf:be.lastIndexOf||function(t,e){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(be.map)e=be.map.call(this,t,this);else for(var n=0,r=this.length;n<r;n++)e.push(t.call(this,this[n],n));return new Ht(this.context,e)},pluck:function(e){return this.map(function(t){return t[e]})},pop:be.pop,push:be.push,reduce:be.reduce||function(t,e){return n(this,t,e,0,this.length,1)},reduceRight:be.reduceRight||function(t,e){return n(this,t,e,this.length-1,-1,-1)},reverse:be.reverse,selector:null,shift:be.shift,slice:function(){return new Ht(this.context,this)},sort:be.sort,splice:be.splice,toArray:function(){return be.slice.call(this)},to$:function(){return I(this)},toJQuery:function(){return I(this)},unique:function(){return new Ht(this.context,le(this))},unshift:be.unshift}),Ht.extend=function(t,e,n){if(n.length&&e&&(e instanceof Ht||e.__dt_wrapper)){var r,i,o,a=function(e,n,r){return function(){var t=n.apply(e,arguments);return Ht.extend(t,t,r.methodExt),t}};for(r=0,i=n.length;r<i;r++)e[(o=n[r]).name]="function"===o.type?a(t,o.val,o):"object"===o.type?{}:o.val,e[o.name].__dt_wrapper=!0,Ht.extend(t,e[o.name],o.propExt)}},Ht.register=Ut=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)Ht.register(t[n],e);else{var i,o,a=t.split("."),s=ye;for(n=0,r=a.length;n<r;n++){var l;i=(o=-1!==a[n].indexOf("()"))?a[n].replace("()",""):a[n];t:{l=0;for(var u=s.length;l<u;l++)if(s[l].name===i){l=s[l];break t}l=null}l||(l={name:i,val:{},methodExt:[],propExt:[],type:"object"},s.push(l)),n===r-1?(l.val=e,l.type="function"==typeof e?"function":I.isPlainObject(e)?"object":"other"):s=o?l.methodExt:l.propExt}}},Ht.registerPlural=zt=function(t,e,n){Ht.register(t,n),Ht.register(e,function(){var t=n.apply(this,arguments);return t===this?this:t instanceof Ht?t.length?Array.isArray(t[0])?new Ht(t.context,t[0]):t[0]:O:t})};var Ae=function(t,e){if(Array.isArray(t))return I.map(t,function(t){return Ae(t,e)});if("number"==typeof t)return[e[t]];var n=I.map(e,function(t){return t.nTable});return I(n).filter(t).map(function(){var t=I.inArray(this,n);return e[t]}).toArray()};Ut("tables()",function(t){return t!==O&&null!==t?new Ht(Ae(t,this.context)):this}),Ut("table()",function(t){var e=(t=this.tables(t)).context;return e.length?new Ht(e[0]):t}),zt("tables().nodes()","table().node()",function(){return this.iterator("table",function(t){return t.nTable},1)}),zt("tables().body()","table().body()",function(){return this.iterator("table",function(t){return t.nTBody},1)}),zt("tables().header()","table().header()",function(){return this.iterator("table",function(t){return t.nTHead},1)}),zt("tables().footer()","table().footer()",function(){return this.iterator("table",function(t){return t.nTFoot},1)}),zt("tables().containers()","table().container()",function(){return this.iterator("table",function(t){return t.nTableWrapper},1)}),Ut("draw()",function(e){return this.iterator("table",function(t){"page"===e?B(t):("string"==typeof e&&(e="full-hold"!==e),j(t,!1===e))})}),Ut("page()",function(e){return e===O?this.page.info().page:this.iterator("table",function(t){ct(t,e)})}),Ut("page.info()",function(){if(0===this.context.length)return O;var t=this.context[0],e=t._iDisplayStart,n=t.oFeatures.bPaginate?t._iDisplayLength:-1,r=t.fnRecordsDisplay(),i=-1===n;return{page:i?0:Math.floor(e/n),pages:i?1:Math.ceil(r/n),start:e,end:t.fnDisplayEnd(),length:n,recordsTotal:t.fnRecordsTotal(),recordsDisplay:r,serverSide:"ssp"===jt(t)}}),Ut("page.len()",function(e){return e===O?0!==this.context.length?this.context[0]._iDisplayLength:O:this.iterator("table",function(t){st(t,e)})});var Ce=function(r,i,t){if(t){var e=new Ht(r);e.one("draw",function(){t(e.ajax.json())})}if("ssp"==jt(r))j(r,i);else{dt(r,!0);var n=r.jqXHR;n&&4!==n.readyState&&n.abort(),H(r,[],function(t){s(r);for(var e=0,n=(t=$(r,t)).length;e<n;e++)R(r,t[e]);j(r,i),dt(r,!1)})}};Ut("ajax.json()",function(){var t=this.context;if(0<t.length)return t[0].json}),Ut("ajax.params()",function(){var t=this.context;if(0<t.length)return t[0].oAjaxData}),Ut("ajax.reload()",function(e,n){return this.iterator("table",function(t){Ce(t,!1===n,e)})}),Ut("ajax.url()",function(e){var t=this.context;return e===O?0===t.length?O:(t=t[0]).ajax?I.isPlainObject(t.ajax)?t.ajax.url:t.ajax:t.sAjaxSource:this.iterator("table",function(t){I.isPlainObject(t.ajax)?t.ajax.url=e:t.ajax=e})}),Ut("ajax.url().load()",function(e,n){return this.iterator("table",function(t){Ce(t,!1===n,e)})});var xe=function(t,e,n,r,i){var o,a,s,l,u,c,h=[];for(s=typeof e,e&&"string"!==s&&"function"!==s&&e.length!==O||(e=[e]),s=0,l=e.length;s<l;s++)for(u=0,c=(a=e[s]&&e[s].split&&!e[s].match(/[\[\(:]/)?e[s].split(","):[e[s]]).length;u<c;u++)(o=n("string"==typeof a[u]?a[u].trim():a[u]))&&o.length&&(h=h.concat(o));if((t=qt.selector[t]).length)for(s=0,l=t.length;s<l;s++)h=t[s](r,i,h);return le(h)},Se=function(t){return t||(t={}),t.filter&&t.search===O&&(t.search=t.filter),I.extend({search:"none",order:"current",page:"all"},t)},_e=function(t){for(var e=0,n=t.length;e<n;e++)if(0<t[e].length)return t[0]=t[e],t[0].length=1,t.length=1,t.context=[t.context[e]],t;return t.length=0,t},De=function(t,e){var n,r,i,o=[],a=t.aiDisplay;i=t.aiDisplayMaster;var s=e.search;if(n=e.order,r=e.page,"ssp"==jt(t))return"removed"===s?[]:ae(0,i.length);if("current"==r)for(n=t._iDisplayStart,r=t.fnDisplayEnd();n<r;n++)o.push(a[n]);else if("current"==n||"applied"==n){if("none"==s)o=i.slice();else if("applied"==s)o=a.slice();else if("removed"==s){var l={};for(n=0,r=a.length;n<r;n++)l[a[n]]=null;o=I.map(i,function(t){return l.hasOwnProperty(t)?null:t})}}else if("index"==n||"original"==n)for(n=0,r=t.aoData.length;n<r;n++)"none"==s?o.push(n):(-1===(i=I.inArray(n,a))&&"removed"==s||0<=i&&"applied"==s)&&o.push(n);return o};Ut("rows()",function(t,e){t===O?t="":I.isPlainObject(t)&&(e=t,t="");e=Se(e);var n=this.iterator("table",function(i){var o,a=e;return xe("row",t,function(n){var t=te(n),r=i.aoData;if(null!==t&&!a)return[t];if(o||(o=De(i,a)),null!==t&&-1!==I.inArray(t,o))return[t];if(null===n||n===O||""===n)return o;if("function"==typeof n)return I.map(o,function(t){var e=r[t];return n(t,e._aData,e.nTr)?t:null});if(n.nodeName){t=n._DT_RowIndex;var e=n._DT_CellIndex;return t!==O?r[t]&&r[t].nTr===n?[t]:[]:e?r[e.row]&&r[e.row].nTr===n.parentNode?[e.row]:[]:(t=I(n).closest("*[data-dt-row]")).length?[t.data("dt-row")]:[]}return"string"==typeof n&&"#"===n.charAt(0)&&(t=i.aIds[n.replace(/^#/,"")])!==O?[t.idx]:(t=se(oe(i.aoData,o,"nTr")),I(t).filter(n).map(function(){return this._DT_RowIndex}).toArray())},i,a)},1);return n.selector.rows=t,n.selector.opts=e,n}),Ut("rows().nodes()",function(){return this.iterator("row",function(t,e){return t.aoData[e].nTr||O},1)}),Ut("rows().data()",function(){return this.iterator(!0,"rows",function(t,e){return oe(t.aoData,e,"_aData")},1)}),zt("rows().cache()","row().cache()",function(r){return this.iterator("row",function(t,e){var n=t.aoData[e];return"search"===r?n._aFilterData:n._aSortData},1)}),zt("rows().invalidate()","row().invalidate()",function(n){return this.iterator("row",function(t,e){i(t,e,n)})}),zt("rows().indexes()","row().index()",function(){return this.iterator("row",function(t,e){return e},1)}),zt("rows().ids()","row().id()",function(t){for(var e=[],n=this.context,r=0,i=n.length;r<i;r++)for(var o=0,a=this[r].length;o<a;o++){var s=n[r].rowIdFn(n[r].aoData[this[r][o]]._aData);e.push((!0===t?"#":"")+s)}return new Ht(n,e)}),zt("rows().remove()","row().remove()",function(){var c=this;return this.iterator("row",function(t,e,n){var r,i,o,a,s,l=t.aoData,u=l[e];for(l.splice(e,1),r=0,i=l.length;r<i;r++)if(s=(o=l[r]).anCells,null!==o.nTr&&(o.nTr._DT_RowIndex=r),null!==s)for(o=0,a=s.length;o<a;o++)s[o]._DT_CellIndex.row=r;h(t.aiDisplayMaster,e),h(t.aiDisplay,e),h(c[n],e,!1),0<t._iRecordsDisplay&&t._iRecordsDisplay--,Mt(t),(e=t.rowIdFn(u._aData))!==O&&delete t.aIds[e]}),this.iterator("table",function(t){for(var e=0,n=t.aoData.length;e<n;e++)t.aoData[e].idx=e}),this}),Ut("rows.add()",function(o){var t=this.iterator("table",function(t){var e,n,r,i=[];for(n=0,r=o.length;n<r;n++)(e=o[n]).nodeName&&"TR"===e.nodeName.toUpperCase()?i.push(L(t,e)[0]):i.push(R(t,e));return i},1),e=this.rows(-1);return e.pop(),I.merge(e,t),e}),Ut("row()",function(t,e){return _e(this.rows(t,e))}),Ut("row().data()",function(t){var e=this.context;if(t===O)return e.length&&this.length?e[0].aoData[this[0]]._aData:O;var n=e[0].aoData[this[0]];return n._aData=t,Array.isArray(t)&&n.nTr&&n.nTr.id&&f(e[0].rowId)(t,n.nTr.id),i(e[0],this[0],"data"),this}),Ut("row().node()",function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]].nTr||null}),Ut("row.add()",function(e){e instanceof I&&e.length&&(e=e[0]);var t=this.iterator("table",function(t){return e.nodeName&&"TR"===e.nodeName.toUpperCase()?L(t,e)[0]:R(t,e)});return this.row(t[0])});var Te=function(t,e){var n=t.context;n.length&&(n=n[0].aoData[e!==O?e:t[0]])&&n._details&&(n._details.remove(),n._detailsShow=O,n._details=O)},Ee=function(t,e){var n=t.context;if(n.length&&t.length){var r=n[0].aoData[t[0]];if(r._details){(r._detailsShow=e)?r._details.insertAfter(r.nTr):r._details.detach();var a=n[0],i=new Ht(a),s=a.aoData;i.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),0<ie(s,"_details").length&&(i.on("draw.dt.DT_details",function(t,e){a===e&&i.rows({page:"current"}).eq(0).each(function(t){(t=s[t])._detailsShow&&t._details.insertAfter(t.nTr)})}),i.on("column-visibility.dt.DT_details",function(t,e){if(a===e)for(var n,r=y(e),i=0,o=s.length;i<o;i++)(n=s[i])._details&&n._details.children("td[colspan]").attr("colspan",r)}),i.on("destroy.dt.DT_details",function(t,e){if(a===e)for(var n=0,r=s.length;n<r;n++)s[n]._details&&Te(i,n)}))}}};Ut("row().child()",function(t,e){var n=this.context;if(t===O)return n.length&&this.length?n[0].aoData[this[0]]._details:O;if(!0===t)this.child.show();else if(!1===t)Te(this);else if(n.length&&this.length){var i=n[0],o=(n=n[0].aoData[this[0]],[]),a=function(t,e){if(Array.isArray(t)||t instanceof I)for(var n=0,r=t.length;n<r;n++)a(t[n],e);else t.nodeName&&"tr"===t.nodeName.toLowerCase()?o.push(t):(n=I("<tr><td></td></tr>").addClass(e),I("td",n).addClass(e).html(t)[0].colSpan=y(i),o.push(n[0]))};a(t,e),n._details&&n._details.detach(),n._details=I(o),n._detailsShow&&n._details.insertAfter(n.nTr)}return this}),Ut(["row().child.show()","row().child().show()"],function(){return Ee(this,!0),this}),Ut(["row().child.hide()","row().child().hide()"],function(){return Ee(this,!1),this}),Ut(["row().child.remove()","row().child().remove()"],function(){return Te(this),this}),Ut("row().child.isShown()",function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]]._detailsShow||!1});var Re=/^([^:]+):(name|visIdx|visible)$/,Le=function(t,e,n,r,i){n=[],r=0;for(var o=i.length;r<o;r++)n.push(k(t,i[r],e));return n};Ut("columns()",function(e,n){e===O?e="":I.isPlainObject(e)&&(n=e,e="");n=Se(n);var t=this.iterator("table",function(o){var t=e,a=n,s=o.aoColumns,l=ie(s,"sName"),u=ie(s,"nTh");return xe("column",t,function(n){var t=te(n);if(""===n)return ae(s.length);if(null!==t)return[0<=t?t:s.length+t];if("function"==typeof n){var r=De(o,a);return I.map(s,function(t,e){return n(e,Le(o,e,0,0,r),u[e])?e:null})}var i="string"==typeof n?n.match(Re):"";if(i)switch(i[2]){case"visIdx":case"visible":if((t=parseInt(i[1],10))<0){var e=I.map(s,function(t,e){return t.bVisible?e:null});return[e[e.length+t]]}return[P(o,t)];case"name":return I.map(l,function(t,e){return t===i[1]?e:null});default:return[]}return n.nodeName&&n._DT_CellIndex?[n._DT_CellIndex.column]:(t=I(u).filter(n).map(function(){return I.inArray(this,u)}).toArray()).length||!n.nodeName?t:(t=I(n).closest("*[data-dt-column]")).length?[t.data("dt-column")]:[]},o,a)},1);return t.selector.cols=e,t.selector.opts=n,t}),zt("columns().header()","column().header()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTh},1)}),zt("columns().footer()","column().footer()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTf},1)}),zt("columns().data()","column().data()",function(){return this.iterator("column-rows",Le,1)}),zt("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].mData},1)}),zt("columns().cache()","column().cache()",function(o){return this.iterator("column-rows",function(t,e,n,r,i){return oe(t.aoData,i,"search"===o?"_aFilterData":"_aSortData",e)},1)}),zt("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(t,e,n,r,i){return oe(t.aoData,i,"anCells",e)},1)}),zt("columns().visible()","column().visible()",function(u,n){var e=this,t=this.iterator("column",function(t,e){if(u===O)return t.aoColumns[e].bVisible;var n,r,i,o=t.aoColumns,a=o[e],s=t.aoData;if(u!==O&&a.bVisible!==u){if(u){var l=I.inArray(!0,ie(o,"bVisible"),e+1);for(n=0,r=s.length;n<r;n++)i=s[n].nTr,o=s[n].anCells,i&&i.insertBefore(o[e],o[l]||null)}else I(ie(t.aoData,"anCells",e)).detach();a.bVisible=u}});return u!==O&&this.iterator("table",function(t){M(t,t.aoHeader),M(t,t.aoFooter),t.aiDisplay.length||I(t.nTBody).find("td[colspan]").attr("colspan",y(t)),Et(t),e.iterator("column",function(t,e){Nt(t,null,"column-visibility",[t,e,u,n])}),(n===O||n)&&e.columns.adjust()}),t}),zt("columns().indexes()","column().index()",function(n){return this.iterator("column",function(t,e){return"visible"===n?u(t,e):e},1)}),Ut("columns.adjust()",function(){return this.iterator("table",function(t){F(t)},1)}),Ut("column.index()",function(t,e){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===t||"toData"===t)return P(n,e);if("fromData"===t||"toVisible"===t)return u(n,e)}}),Ut("column()",function(t,e){return _e(this.columns(t,e))}),Ut("cells()",function(g,t,m){if(I.isPlainObject(g)&&(g.row===O?(m=g,g=null):(m=t,t=null)),I.isPlainObject(t)&&(m=t,t=null),null===t||t===O)return this.iterator("table",function(n){var r,i,o,a,s,l,u,t=g,e=Se(m),c=n.aoData,h=De(n,e),d=se(oe(c,h,"anCells")),p=I(ue([],d)),f=n.aoColumns.length;return xe("cell",t,function(t){var e="function"==typeof t;if(null===t||t===O||e){for(i=[],o=0,a=h.length;o<a;o++)for(r=h[o],s=0;s<f;s++)l={row:r,column:s},e?(u=c[r],t(l,k(n,r,s),u.anCells?u.anCells[s]:null)&&i.push(l)):i.push(l);return i}return I.isPlainObject(t)?t.column!==O&&t.row!==O&&-1!==I.inArray(t.row,h)?[t]:[]:(e=p.filter(t).map(function(t,e){return{row:e._DT_CellIndex.row,column:e._DT_CellIndex.column}}).toArray()).length||!t.nodeName?e:(u=I(t).closest("*[data-dt-row]")).length?[{row:u.data("dt-row"),column:u.data("dt-column")}]:[]},n,e)});var r,i,o,a,e=m?{page:m.page,order:m.order,search:m.search}:{},s=this.columns(t,e),l=this.rows(g,e);e=this.iterator("table",function(t,e){var n=[];for(r=0,i=l[e].length;r<i;r++)for(o=0,a=s[e].length;o<a;o++)n.push({row:l[e][r],column:s[e][o]});return n},1),e=m&&m.selected?this.cells(e,m):e;return I.extend(e.selector,{cols:t,rows:g,opts:m}),e}),zt("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(t,e,n){return(t=t.aoData[e])&&t.anCells?t.anCells[n]:O},1)}),Ut("cells().data()",function(){return this.iterator("cell",function(t,e,n){return k(t,e,n)},1)}),zt("cells().cache()","cell().cache()",function(r){return r="search"===r?"_aFilterData":"_aSortData",this.iterator("cell",function(t,e,n){return t.aoData[e][r][n]},1)}),zt("cells().render()","cell().render()",function(r){return this.iterator("cell",function(t,e,n){return k(t,e,n,r)},1)}),zt("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(t,e,n){return{row:e,column:n,columnVisible:u(t,n)}},1)}),zt("cells().invalidate()","cell().invalidate()",function(r
){return this.iterator("cell",function(t,e,n){i(t,e,r,n)})}),Ut("cell()",function(t,e,n){return _e(this.cells(t,e,n))}),Ut("cell().data()",function(t){var e=this.context,n=this[0];return t===O?e.length&&n.length?k(e[0],n[0].row,n[0].column):O:(r(e[0],n[0].row,n[0].column,t),i(e[0],n[0].row,"data",n[0].column),this)}),Ut("order()",function(e,t){var n=this.context;return e===O?0!==n.length?n[0].aaSorting:O:("number"==typeof e?e=[[e,t]]:e.length&&!Array.isArray(e[0])&&(e=Array.prototype.slice.call(arguments)),this.iterator("table",function(t){t.aaSorting=e.slice()}))}),Ut("order.listener()",function(e,n,r){return this.iterator("table",function(t){_t(t,e,n,r)})}),Ut("order.fixed()",function(e){if(e)return this.iterator("table",function(t){t.aaSortingFixed=I.extend(!0,{},e)});var t=(t=this.context).length?t[0].aaSortingFixed:O;return Array.isArray(t)?{pre:t}:t}),Ut(["columns().order()","column().order()"],function(r){var i=this;return this.iterator("table",function(t,e){var n=[];I.each(i[e],function(t,e){n.push([e,r])}),t.aaSorting=n})}),Ut("search()",function(e,n,r,i){var t=this.context;return e===O?0!==t.length?t[0].oPreviousSearch.sSearch:O:this.iterator("table",function(t){t.oFeatures.bFilter&&G(t,I.extend({},t.oPreviousSearch,{sSearch:e+"",bRegex:null!==n&&n,bSmart:null===r||r,bCaseInsensitive:null===i||i}),1)})}),zt("columns().search()","column().search()",function(r,i,o,a){return this.iterator("column",function(t,e){var n=t.aoPreSearchCols;if(r===O)return n[e].sSearch;t.oFeatures.bFilter&&(I.extend(n[e],{sSearch:r+"",bRegex:null!==i&&i,bSmart:null===o||o,bCaseInsensitive:null===a||a}),G(t,t.oPreviousSearch,1))})}),Ut("state()",function(){return this.context.length?this.context[0].oSavedState:null}),Ut("state.clear()",function(){return this.iterator("table",function(t){t.fnStateSaveCallback.call(t.oInstance,t,{})})}),Ut("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),Ut("state.save()",function(){return this.iterator("table",function(t){Et(t)})}),$t.versionCheck=$t.fnVersionCheck=function(t){for(var e,n,r=$t.version.split("."),i=0,o=(t=t.split(".")).length;i<o;i++)if((e=parseInt(r[i],10)||0)!==(n=parseInt(t[i],10)||0))return n<e;return!0},$t.isDataTable=$t.fnIsDataTable=function(t){var i=I(t).get(0),o=!1;return t instanceof $t.Api||(I.each($t.settings,function(t,e){var n=e.nScrollHead?I("table",e.nScrollHead)[0]:null,r=e.nScrollFoot?I("table",e.nScrollFoot)[0]:null;e.nTable!==i&&n!==i&&r!==i||(o=!0)}),o)},$t.tables=$t.fnTables=function(e){var t=!1;I.isPlainObject(e)&&(t=e.api,e=e.visible);var n=I.map($t.settings,function(t){if(!e||e&&I(t.nTable).is(":visible"))return t.nTable});return t?new Ht(n):n},$t.camelToHungarian=w,Ut("$()",function(t,e){var n=this.rows(e).nodes();n=I(n);return I([].concat(n.filter(t).toArray(),n.find(t).toArray()))}),I.each(["on","one","off"],function(t,n){Ut(n+"()",function(){var t=Array.prototype.slice.call(arguments);t[0]=I.map(t[0].split(/\s/),function(t){return t.match(/\.dt\b/)?t:t+".dt"}).join(" ");var e=I(this.tables().nodes());return e[n].apply(e,t),this})}),Ut("clear()",function(){return this.iterator("table",function(t){s(t)})}),Ut("settings()",function(){return new Ht(this.context,this.context)}),Ut("init()",function(){var t=this.context;return t.length?t[0].oInit:null}),Ut("data()",function(){return this.iterator("table",function(t){return ie(t.aoData,"_aData")}).flatten()}),Ut("destroy()",function(h){return h=h||!1,this.iterator("table",function(e){var n,t=e.nTableWrapper.parentNode,r=e.oClasses,i=e.nTable,o=e.nTBody,a=e.nTHead,s=e.nTFoot,l=I(i),u=(o=I(o),I(e.nTableWrapper)),c=I.map(e.aoData,function(t){return t.nTr});e.bDestroying=!0,Nt(e,"aoDestroyCallback","destroy",[e]),h||new Ht(e).columns().visible(!0),u.off(".DT").find(":not(tbody *)").off(".DT"),I(v).off(".DT-"+e.sInstance),i!=a.parentNode&&(l.children("thead").detach(),l.append(a)),s&&i!=s.parentNode&&(l.children("tfoot").detach(),l.append(s)),e.aaSorting=[],e.aaSortingFixed=[],Dt(e),I(c).removeClass(e.asStripeClasses.join(" ")),I("th, td",a).removeClass(r.sSortable+" "+r.sSortableAsc+" "+r.sSortableDesc+" "+r.sSortableNone),o.children().detach(),o.append(c),l[a=h?"remove":"detach"](),u[a](),!h&&t&&(t.insertBefore(i,e.nTableReinsertBefore),l.css("width",e.sDestroyWidth).removeClass(r.sTable),(n=e.asDestroyStripes.length)&&o.children().each(function(t){I(this).addClass(e.asDestroyStripes[t%n])})),-1!==(t=I.inArray(e,$t.settings))&&$t.settings.splice(t,1)})}),I.each(["column","row","cell"],function(t,l){Ut(l+"s().every()",function(o){var a=this.selector.opts,s=this;return this.iterator(l,function(t,e,n,r,i){o.call(s[l](e,"cell"===l?n:a,"cell"===l?a:O),e,n,r,i)})})}),Ut("i18n()",function(t,e,n){var r=this.context[0];return(t=N(t)(r.oLanguage))===O&&(t=e),n!==O&&I.isPlainObject(t)&&(t=t[n]!==O?t[n]:t._),t.replace("%d",n)}),$t.version="1.10.23",$t.settings=[],$t.models={},$t.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},$t.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},$t.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},$t.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(t){try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(e){return{}}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(t,e){try{(-1===t.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+t.sInstance+"_"+location.pathname,JSON.stringify(e))}catch(n){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:I.extend({},$t.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},o($t.defaults),$t.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},o($t.defaults.column),$t.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:O,oAjaxData:O,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==jt(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==jt(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var t=this._iDisplayLength,e=this._iDisplayStart,n=e+t,r=this.aiDisplay.length,i=this.oFeatures,o=i.bPaginate;return i.bServerSide?!1===o||-1===t?e+r:Math.min(e+t,this._iRecordsDisplay):!o||r<n||-1===t?r:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},$t.ext=qt={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:$t.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:$t.version},I.extend(qt,{afnFiltering:qt.search,aTypes:qt.type.detect,ofnSearch:qt.type.search,oSort:qt.type.order,afnSortData:qt.order,aoFeatures:qt.feature,oApi:qt.internal,oStdClasses:qt.classes,oPagination:qt.pager}),I.extend($t.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var ke=$t.ext.pager;I.extend(ke,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(t,e){return[Vt(t,e)]},simple_numbers:function(t,e){return["previous",Vt(t,e),"next"]},full_numbers:function(t,e){return["first","previous",Vt(t,e),"next","last"]},first_last_numbers:function(t,e){return["first",Vt(t,e),"last"]},_numbers:Vt,numbers_length:7}),I.extend(!0,$t.ext.renderer,{pageButton:{_:function(l,t,u,e,c,h){var d,p,n,f=l.oClasses,g=l.oLanguage.oPaginate,m=l.oLanguage.oAria.paginate||{},v=0,y=function(t,e){var n,r,i,o,a=f.sPageButtonDisabled,s=function(t){ct(l,t.data.action,!0)};for(n=0,r=e.length;n<r;n++)if(o=e[n],Array.isArray(o))i=I("<"+(o.DT_el||"div")+"/>").appendTo(t),y(i,o);else{switch(d=null,p=o,i=l.iTabIndex,o){case"ellipsis":t.append('<span class="ellipsis">&#x2026;</span>');break;case"first":d=g.sFirst,0===c&&(i=-1,p=p+" "+a);break;case"previous":d=g.sPrevious,0===c&&(i=-1,p=p+" "+a);break;case"next":d=g.sNext,0!==h&&c!==h-1||(i=-1,p=p+" "+a);break;case"last":d=g.sLast,0!==h&&c!==h-1||(i=-1,p=p+" "+a);break;default:d=l.fnFormatNumber(o+1),p=c===o?f.sPageButtonActive:""}null!==d&&(Ft(i=I("<a>",{"class":f.sPageButton+" "+p,"aria-controls":l.sTableId,"aria-label":m[o],"data-dt-idx":v,tabindex:i,id:0===u&&"string"==typeof o?l.sTableId+"_"+o:null}).html(d).appendTo(t),{action:o},s),v++)}};try{n=I(t).find(b.activeElement).data("dt-idx")}catch(Ht){}y(I(t).empty(),e),n!==O&&I(t).find("[data-dt-idx="+n+"]").trigger("focus")}}}),I.extend($t.ext.type.detect,[function(t,e){var n=e.oLanguage.sDecimal;return ne(t,n)?"num"+n:null},function(t){if(t&&!(t instanceof Date)&&!Xt.test(t))return null;var e=Date.parse(t);return null!==e&&!isNaN(e)||Qt(t)?"date":null},function(t,e){var n=e.oLanguage.sDecimal;return ne(t,n,!0)?"num-fmt"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return re(t,n)?"html-num"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return re(t,n,!0)?"html-num-fmt"+n:null},function(t){return Qt(t)||"string"==typeof t&&-1!==t.indexOf("<")?"html":null}]),I.extend($t.ext.type.search,{html:function(t){return Qt(t)?t:"string"==typeof t?t.replace(Gt," ").replace(Kt,""):""},string:function(t){return Qt(t)?t:"string"==typeof t?t.replace(Gt," "):t}});var Ie=function(t,e,n,r){return 0===t||t&&"-"!==t?(e&&(t=ee(t,e)),t.replace&&(n&&(t=t.replace(n,"")),r&&(t=t.replace(r,""))),1*t):-Infinity};I.extend(qt.type.order,{"date-pre":function(t){return t=Date.parse(t),isNaN(t)?-Infinity:t},"html-pre":function(t){return Qt(t)?"":t.replace?t.replace(/<.*?>/g,"").toLowerCase():t+""},"string-pre":function(t){return Qt(t)?"":"string"==typeof t?t.toLowerCase():t.toString?t.toString():""},"string-asc":function(t,e){return t<e?-1:e<t?1:0},"string-desc":function(t,e){return t<e?1:e<t?-1:0}}),Wt(""),I.extend(!0,$t.ext.renderer,{header:{_:function(i,o,a,s){I(i.nTable).on("order.dt.DT",function(t,e,n,r){i===e&&(t=a.idx,o.removeClass(a.sSortingClass+" "+s.sSortAsc+" "+s.sSortDesc).addClass("asc"==r[t]?s.sSortAsc:"desc"==r[t]?s.sSortDesc:a.sSortingClass))})},jqueryui:function(i,o,a,s){I("<div/>").addClass(s.sSortJUIWrapper).append(o.contents()).append(I("<span/>").addClass(s.sSortIcon+" "+a.sSortingClassJUI)).appendTo(o),I(i.nTable).on("order.dt.DT",function(t,e,n,r){i===e&&(t=a.idx,o.removeClass(s.sSortAsc+" "+s.sSortDesc).addClass("asc"==r[t]?s.sSortAsc:"desc"==r[t]?s.sSortDesc:a.sSortingClass),o.find("span."+s.sSortIcon).removeClass(s.sSortJUIAsc+" "+s.sSortJUIDesc+" "+s.sSortJUI+" "+s.sSortJUIAscAllowed+" "+s.sSortJUIDescAllowed).addClass("asc"==r[t]?s.sSortJUIAsc:"desc"==r[t]?s.sSortJUIDesc:a.sSortingClassJUI))})}}});var Oe=function(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):t};return $t.render={number:function(r,i,o,a,s){return{display:function(t){if("number"!=typeof t&&"string"!=typeof t)return t;var e=t<0?"-":"",n=parseFloat(t);return isNaN(n)?Oe(t):(n=n.toFixed(o),t=Math.abs(n),n=parseInt(t,10),t=o?i+(t-n).toFixed(o).substring(2):"",e+(a||"")+n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,r)+t+(s||""))}}},text:function(){return{display:Oe,filter:Oe}}},I.extend($t.ext.internal,{_fnExternApiFunc:e,_fnBuildAjax:H,_fnAjaxUpdate:U,_fnAjaxParameters:t,_fnAjaxUpdateDraw:z,_fnAjaxDataSrc:$,_fnAddColumn:_,_fnColumnOptions:D,_fnAdjustColumnSizing:F,_fnVisibleToColumnIndex:P,_fnColumnIndexToVisible:u,_fnVisbleColumns:y,_fnGetColumns:T,_fnColumnTypes:a,_fnApplyColumnDefs:E,_fnHungarianMap:o,_fnCamelToHungarian:w,_fnLanguageCompat:A,_fnBrowserDetect:S,_fnAddData:R,_fnAddTr:L,_fnNodeToDataIndex:function(t,e){return e._DT_RowIndex!==O?e._DT_RowIndex:null},_fnNodeToColumnIndex:function(t,e,n){return I.inArray(n,t.aoData[e].anCells)},_fnGetCellData:k,_fnSetCellData:r,_fnSplitObjNotation:c,_fnGetObjectDataFn:N,_fnSetObjectDataFn:f,_fnGetDataMaster:g,_fnClearTable:s,_fnDeleteIndex:h,_fnInvalidate:i,_fnGetRowElements:l,_fnCreateTr:m,_fnBuildHead:p,_fnDrawHead:M,_fnDraw:B,_fnReDraw:j,_fnAddOptionsHtml:V,_fnDetectHeader:W,_fnGetUniqueThs:q,_fnFeatureHtmlFilter:J,_fnFilterComplete:G,_fnFilterCustom:K,_fnFilterColumn:X,_fnFilter:Z,_fnFilterCreateSearch:Y,_fnEscapeRegex:pe,_fnFilterData:Q,_fnFeatureHtmlInfo:nt,_fnUpdateInfo:rt,_fnInfoMacros:it,_fnInitialise:ot,_fnInitComplete:at,_fnLengthChange:st,_fnFeatureHtmlLength:lt,_fnFeatureHtmlPaginate:ut,_fnPageChange:ct,_fnFeatureHtmlProcessing:ht,_fnProcessingDisplay:dt,_fnFeatureHtmlTable:pt,_fnScrollDraw:ft,_fnApplyToChildren:gt,_fnCalculateColumnWidths:mt,_fnThrottle:ve,_fnConvertToWidth:vt,_fnGetWidestNode:yt,_fnGetMaxLenString:bt,_fnStringToCss:wt,_fnSortFlatten:At,_fnSort:Ct,_fnSortAria:xt,_fnSortListener:St,_fnSortAttachListener:_t,_fnSortingClasses:Dt,_fnSortData:Tt,_fnSaveState:Et,_fnLoadState:Rt,_fnSettingsFromNode:Lt,_fnLog:kt,_fnMap:It,_fnBindAction:Ft,_fnCallbackReg:Pt,_fnCallbackFire:Nt,_fnLengthOverflow:Mt,_fnRenderer:Bt,_fnDataSource:jt,_fnRowAttributes:d,_fnExtend:Ot,_fnCalculateEnd:function(){}}),((I.fn.dataTable=$t).$=I).fn.dataTableSettings=$t.settings,I.fn.dataTableExt=$t.ext,I.fn.DataTable=function(t){return I(this).dataTable(t).api()},I.each($t,function(t,e){I.fn.DataTable[t]=e}),I.fn.dataTable}),function(n){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return n(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),n(e,t,t.document)}:n(jQuery,window,document)}(function(b,t,i,o){var a=b.fn.dataTable;return b.extend(!0,a.defaults,{dom:"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",renderer:"bootstrap"}),b.extend(a.ext.classes,{sWrapper:"dataTables_wrapper dt-bootstrap4",sFilterInput:"form-control form-control-sm",sLengthSelect:"custom-select custom-select-sm form-control form-control-sm",sProcessing:"dataTables_processing card",sPageButton:"paginate_button page-item"}),a.ext.renderer.pageButton.bootstrap=function(s,t,l,e,u,c){var h,d,n,p=new a.Api(s),f=s.oClasses,g=s.oLanguage.oPaginate,m=s.oLanguage.oAria.paginate||{},v=0,y=function(t,e){var n,r,i,o,a=function(t){t.preventDefault(),!b(t.currentTarget).hasClass("disabled")&&p.page()!=t.data.action&&p.page(t.data.action).draw("page")};for(n=0,r=e.length;n<r;n++)if(o=e[n],Array.isArray(o))y(t,o);else{switch(d=h="",o){case"ellipsis":h="&#x2026;",d="disabled";break;case"first":h=g.sFirst,d=o+(0<u?"":" disabled");break;case"previous":h=g.sPrevious,d=o+(0<u?"":" disabled");break;case"next":h=g.sNext,d=o+(u<c-1?"":" disabled");break;case"last":h=g.sLast,d=o+(u<c-1?"":" disabled");break;default:h=o+1,d=u===o?"active":""}h&&(i=b("<li>",{"class":f.sPageButton+" "+d,id:0===l&&"string"==typeof o?s.sTableId+"_"+o:null}).append(b("<a>",{href:"#","aria-controls":s.sTableId,"aria-label":m[o],"data-dt-idx":v,tabindex:s.iTabIndex,"class":"page-link"}).html(h)).appendTo(t),s.oApi._fnBindAction(i,{action:o},a),v++)}};try{n=b(t).find(i.activeElement).data("dt-idx")}catch(r){}y(b(t).empty().html('<ul class="pagination"/>').children("ul"),e),n!==o&&b(t).find("[data-dt-idx="+n+"]").trigger("focus")},a}),function(n){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return n(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),n(e,t,t.document)}:n(jQuery,window,document)}(function(d,p,a,u){function o(t,e,n){var r=e+"-"+n;if(l[r])return l[r];var i=[];for(t=t.cell(e,n).node().childNodes,e=0,n=t.length;e<n;e++)i.push(t[e]);return l[r]=i}function s(t,e,n){var r=e+"-"+n;if(l[r]){t=t.cell(e,n).node(),e=[];for(var i=0,o=(n=l[r][0].parentNode.childNodes).length;i<o;i++)e.push(n[i]);for(n=0,i=e.length;n<i;n++)t.appendChild(e[n]);l[r]=u}}var i=d.fn.dataTable,r=function(t,e){if(!i.versionCheck||!i.versionCheck("1.10.10"))throw"DataTables Responsive requires DataTables 1.10.10 or newer";this.s={dt:new i.Api(t),columns:[],current:[]},this.s.dt.settings()[0].responsive||(e&&"string"==typeof e.details?e.details={type:e.details}:e&&!1===e.details?e.details={type:!1}:e&&!0===e.details&&(e.details={type:"inline"}),this.c=d.extend(!0,{},r.defaults,i.defaults.responsive,e),(t.responsive=this)._constructor())};d.extend(r.prototype,{_constructor:function(){var n=this,e=this.s.dt,t=e.settings()[0],r=d(p).innerWidth();e.settings()[0]._responsive=this,d(p).on("resize.dtr orientationchange.dtr",i.util.throttle(function(){var t=d(p).innerWidth();t!==r&&(n._resize(),r=t)})),t.oApi._fnCallbackReg(t,"aoRowCreatedCallback",function(t){-1!==d.inArray(!1,n.s.current)&&d(">td, >th",t).each(function(t){t=e.column.index("toData",t),!1===n.s.current[t]&&d(this).css("display","none")})}),e.on("destroy.dtr",function(){e.off(".dtr"),d(e.table().body()).off(".dtr"),d(p).off("resize.dtr orientationchange.dtr"),e.cells(".dtr-control").nodes().to$().removeClass("dtr-control"),d.each(n.s.current,function(t,e){!1===e&&n._setColumnVis(t,!0)})}),this.c.breakpoints.sort(function(t,e){return t.width<e.width?1:t.width>e.width?-1:0}),this._classLogic(),this._resizeAuto(),!1!==(t=this.c.details).type&&(n._detailsInit(),e.on("column-visibility.dtr",function(){n._timer&&clearTimeout(n._timer),n._timer=setTimeout(function(){n._timer=null,n._classLogic(),n._resizeAuto(),n._resize(!0),n._redrawChildren()},100)}),e.on("draw.dtr",function(){n._redrawChildren()}),d(e.table().node()).addClass("dtr-"+t.type)),e.on("column-reorder.dtr",function(){n._classLogic(),n._resizeAuto(),n._resize(!0)}),e.on("column-sizing.dtr",function(){n._resizeAuto(),n._resize()}),e.on("preXhr.dtr",function(){var t=[];e.rows().every(function(){this.child.isShown()&&t.push(this.id(!0))}),e.one("draw.dtr",function(){n._resizeAuto(),n._resize(),e.rows(t).every(function(){n._detailsDisplay(this,!1)})})}),e.on("draw.dtr",function(){n._controlClass()}).on("init.dtr",function(t){"dt"===t.namespace&&(n._resizeAuto(),n._resize(),d.inArray(!1,n.s.current)&&e.columns.adjust())}),this._resize()},_columnsVisiblity:function(n){var t,e,r=this.s.dt,i=this.s.columns,o=i.map(function(t,e){return{columnIdx:e,priority:t.priority}}).sort(function(t,e){return t.priority!==e.priority?t.priority-e.priority:t.columnIdx-e.columnIdx}),a=d.map(i,function(t,e){return!1===r.column(e).visible()?"not-visible":(!t.auto||null!==t.minWidth)&&(!0===t.auto?"-":-1!==d.inArray(n,t.includeIn))}),s=0;for(t=0,e=a.length;t<e;t++)!0===a[t]&&(s+=i[t].minWidth);for(t=(t=r.settings()[0].oScroll).sY||t.sX?t.iBarWidth:0,s=r.table().container().offsetWidth-t-s,t=0,e=a.length;t<e;t++)i[t].control&&(s-=i[t].minWidth);var l=!1;for(t=0,e=o.length;t<e;t++){var u=o[t].columnIdx;"-"===a[u]&&!i[u].control&&i[u].minWidth&&(l||s-i[u].minWidth<0?(l=!0,a[u]=!1):a[u]=!0,s-=i[u].minWidth)}for(o=!1,t=0,e=i.length;t<e;t++)if(!i[t].control&&!i[t].never&&!1===a[t]){o=!0;break}for(t=0,e=i.length;t<e;t++)i[t].control&&(a[t]=o),"not-visible"===a[t]&&(a[t]=!1);return-1===d.inArray(!0,a)&&(a[0]=!0),a},_classLogic:function(){var i=this,s=this.c.breakpoints,r=this.s.dt,o=r.columns().eq(0).map(function(t){var e=(n=this.column(t)).header().className,n=(t=r.settings()[0].aoColumns[t].responsivePriority,n.header().getAttribute("data-priority"));return t===u&&(t=n===u||null===n?1e4:1*n),{className:e,includeIn:[],auto:!1,control:!1,never:!!e.match(/\bnever\b/),priority:t}}),a=function(t,e){var n=o[t].includeIn;-1===d.inArray(e,n)&&n.push(e)},l=function(t,e,n,r){if(n){if("max-"===n)for(r=i._find(e).width,e=0,n=s.length;e<n;e++)s[e].width<=r&&a(t,s[e].name);else if("min-"===n)for(r=i._find(e).width,e=0,n=s.length;e<n;e++)s[e].width>=r&&a(t,s[e].name);else if("not-"===n)for(e=0,n=s.length;e<n;e++)-1===s[e].name.indexOf(r)&&a(t,s[e].name)}else o[t].includeIn.push(e)};o.each(function(t,i){for(var e=t.className.split(" "),o=!1,n=0,r=e.length;n<r;n++){var a=e[n].trim();if("all"===a)return o=!0,void(t.includeIn=d.map(s,function(t){return t.name}));if("none"===a||t.never)return void(o=!0);if("control"===a||"dtr-control"===a)return o=!0,void(t.control=!0);d.each(s,function(t,e){var n=e.name.split("-"),r=a.match(RegExp("(min\\-|max\\-|not\\-)?("+n[0]+")(\\-[_a-zA-Z0-9])?"));r&&(o=!0,r[2]===n[0]&&r[3]==="-"+n[1]?l(i,e.name,r[1],r[2]+r[3]):r[2]===n[0]&&!r[3]&&l(i,e.name,r[1],r[2]))})}o||(t.auto=!0)}),this.s.columns=o},_controlClass:function(){if("inline"===this.c.details.type){var t=this.s.dt,e=d.inArray(!0,this.s.current);t.cells(null,function(t){return t!==e},{page:"current"}).nodes().to$().filter(".dtr-control").removeClass("dtr-control"),t.cells(null,e,{page:"current"}).nodes().to$().addClass("dtr-control")}},_detailsDisplay:function(t,e){var n=this,r=this.s.dt,i=this.c.details;if(i&&!1!==i.type){var o=i.display(t,e,function(){return i.renderer(r,t[0],n._detailsObj(t[0]))});(!0===o||!1===o)&&d(r.table().node()).triggerHandler("responsive-display.dt",[r,t,o,e])}},_detailsInit:function(){var n=this,r=this.s.dt,t=this.c.details;"inline"===t.type&&(t.target="td.dtr-control, th.dtr-control"),r.on("draw.dtr",function(){n._tabIndexes()}),n._tabIndexes(),d(r.table().body()).on("keyup.dtr","td, th",function(t){13===t.keyCode&&d(this).data("dtr-keyboard")&&d(this).click()});var i=t.target;i===u&&null===i||d(r.table().body()).on("click.dtr mousedown.dtr mouseup.dtr","string"==typeof i?i:"td, th",function(t){if(d(r.table().node()).hasClass("collapsed")&&-1!==d.inArray(d(this).closest("tr").get(0),r.rows().nodes().toArray())){if("number"==typeof i){var e=i<0?r.columns().eq(0).length+i:i;if(r.cell(this).index().column!==e)return}e=r.row(d(this).closest("tr")),"click"===t.type?n._detailsDisplay(e,!1):"mousedown"===t.type?d(this).css("outline","none"):"mouseup"===t.type&&d(this).trigger("blur").css("outline","")}})},_detailsObj:function(r){var i=this,o=this.s.dt;return d.map(this.s.columns,function(t,e){if(!t.never&&!t.control){var n=o.settings()[0].aoColumns[e];return{className:n.sClass,columnIndex:e,data:o.cell(r,e).render(i.c.orthogonal),hidden:o.column(e).visible()&&!i.s.current[e],rowIndex:r,title:null!==n.sTitle?n.sTitle:d(o.column(e).header()).text()}}})},_find:function(t){for(var e=this.c.breakpoints,n=0,r=e.length;n<r;n++)if(e[n].name===t)return e[n]},_redrawChildren:function(){var n=this,r=this.s.dt;r.rows({page:"current"}).iterator("row",function(t,e){r.row(e),n._detailsDisplay(r.row(e),!0)})},_resize:function(n){var t,r=this,e=this.s.dt,i=d(p).innerWidth(),o=this.c.breakpoints,a=o[0].name,s=this.s.columns,l=this.s.current.slice();for(t=o.length-1;0<=t;t--)if(i<=o[t].width){a=o[t].name;break}var u=this._columnsVisiblity(a);for(this.s.current=u,o=!1,t=0,i=s.length;t<i;t++)if(!1===u[t]&&!s[t].never&&!s[t].control&&!1==!e.column(t).visible()){o=!0;break}d(e.table().node()).toggleClass("collapsed",o);var c=!1,h=0;e.columns().eq(0).each(function(t,e){!0===u[e]&&h++,(n||u[e]!==l[e])&&(c=!0,r._setColumnVis(t,u[e]))}),c&&(this._redrawChildren(),d(e.table().node()).trigger("responsive-resize.dt",[e,this.s.current]),0===e.page.info().recordsDisplay&&d("td",e.table().body()).eq(0).attr("colspan",h)),r._controlClass()},_resizeAuto:function(){var e=this.s.dt,n=this.s.columns;if(this.c.auto&&-1!==d.inArray(!0,d.map(n,function(t){return t.auto}))){d.isEmptyObject(l)||d.each(l,function(t){t=t.split("-"),s(e,1*t[0],1*t[1])}),e.table().node();var t=e.table().node().cloneNode(!1),r=d(e.table().header().cloneNode(!1)).appendTo(t),i=d(e.table().body()).clone(!1,!1).empty().appendTo(t);t.style.width="auto";var o=e.columns().header().filter(function(t){return e.column(t).visible()}).to$().clone(!1).css("display","table-cell").css("width","auto").css("min-width",0);if(d(i).append(d(e.rows({page:"current"}).nodes()).clone(!1)).find("th, td").css("display",""),i=e.table().footer()){i=d(i.cloneNode(!1)).appendTo(t);var a=e.columns().footer().filter(function(t){return e.column(t).visible()}).to$().clone(!1).css("display","table-cell");d("<tr/>").append(a).appendTo(i)}d("<tr/>").append(o).appendTo(r),"inline"===this.c.details.type&&d(t).addClass("dtr-inline collapsed"),d(t).find("[name]").removeAttr("name"),d(t).css("position","relative"),(t=d("<div/>").css({width:1,height:1,overflow:"hidden",clear:"both"}).append(t)).insertBefore(e.table().node()),o.each(function(t){t=e.column.index("fromVisible",t),n[t].minWidth=this.offsetWidth||0}),t.remove()}},_responsiveOnlyHidden:function(){var n=this.s.dt;return d.map(this.s.current,function(t,e){return!1===n.column(e).visible()||t})},_setColumnVis:function(t,e){var n=this.s.dt,r=e?"":"none";d(n.column(t).header()).css("display",r),d(n.column(t).footer()).css("display",r),n.column(t).nodes().to$().css("display",r),d.isEmptyObject(l)||n.cells(null,t).indexes().each(function(t){s(n,t.row,t.column)})},_tabIndexes:function(){var t=this.s.dt,e=t.cells({page:"current"}).nodes().to$(),n=t.settings()[0],r=this.c.details.target;e.filter("[data-dtr-keyboard]").removeData("[data-dtr-keyboard]"),"number"==typeof r?t.cells(null,r,{page:"current"}).nodes().to$().attr("tabIndex",n.iTabIndex).data("dtr-keyboard",1):("td:first-child, th:first-child"===r&&(r=">td:first-child, >th:first-child"),d(r,t.rows({page:"current"}).nodes()).attr("tabIndex",n.iTabIndex).data("dtr-keyboard",1))}}),r.breakpoints=[{name:"desktop",width:Infinity},{name:"tablet-l",width:1024},{name:"tablet-p",width:768},{name:"mobile-l",width:480},{name:"mobile-p",width:320}],r.display={childRow:function(t,e,n){return e?d(t.node()).hasClass("parent")?(t.child(n(),"child").show(),!0):void 0:t.child.isShown()?(t.child(!1),d(t.node()).removeClass("parent"),!1):(t.child(n(),"child").show(),d(t.node()).addClass("parent"),!0)},childRowImmediate:function(t,e,n){return!e&&t.child.isShown()||!t.responsive.hasHidden()?(t.child(!1),d(t.node()).removeClass("parent"),!1):(t.child(n(),"child").show(),d(t.node()).addClass("parent"),!0)},modal:function(o){return function(t,e,n){if(e)d("div.dtr-modal-content").empty().append(n());else{var r=function(){i.remove(),d(a).off("keypress.dtr")},i=d('<div class="dtr-modal"/>').append(d('<div class="dtr-modal-display"/>').append(d('<div class="dtr-modal-content"/>').append(n())).append(d('<div class="dtr-modal-close">&times;</div>').click(function(){r()}))).append(d('<div class="dtr-modal-background"/>').click(function(){r()})).appendTo("body");d(a).on("keyup.dtr",function(t){27===t.keyCode&&(t.stopPropagation(),r())})}o&&o.header&&d("div.dtr-modal-content").prepend("<h2>"+o.header(t)+"</h2>")}}};var l={};r.renderer={listHiddenNodes:function(){return function(n,t,e){var r=d('<ul data-dtr-index="'+t+'" class="dtr-details"/>'),i=!1;return d.each(e,function(t,e){e.hidden&&(d("<li "+(e.className?'class="'+e.className+'"':"")+' data-dtr-index="'+e.columnIndex+'" data-dt-row="'+e.rowIndex+'" data-dt-column="'+e.columnIndex+'"><span class="dtr-title">'+e.title+"</span> </li>").append(d('<span class="dtr-data"/>').append(o(n,e.rowIndex,e.columnIndex))).appendTo(r),i=!0)}),!!i&&r}},listHidden:function(){return function(t,e,n){return!!(t=d.map(n,function(t){var e=t.className?'class="'+t.className+'"':"";return t.hidden?"<li "+e+' data-dtr-index="'+t.columnIndex+'" data-dt-row="'+t.rowIndex+'" data-dt-column="'+t.columnIndex+'"><span class="dtr-title">'+t.title+'</span> <span class="dtr-data">'+t.data+"</span></li>":""}).join(""))&&d('<ul data-dtr-index="'+e+'" class="dtr-details"/>').append(t)}},tableAll:function(r){return r=d.extend({tableClass:""},r),function(t,e,n){return t=d.map(n,function(t){return"<tr "+(t.className?'class="'+t.className+'"':"")+' data-dt-row="'+t.rowIndex+'" data-dt-column="'+t.columnIndex+'"><td>'+t.title+":</td> <td>"+t.data+"</td></tr>"}).join(""),d('<table class="'+r.tableClass+' dtr-details" width="100%"/>').append(t)}}},r.defaults={breakpoints:r.breakpoints,auto:!0,details:{display:r.display.childRow,renderer:r.renderer.listHidden(),target:0,type:"inline"},orthogonal:"display"};var t=d.fn.dataTable.Api;return t.register("responsive()",function(){return this}),t.register("responsive.index()",function(t){return{column:(t=d(t)).data("dtr-index"),row:t.parent().data("dtr-index")}}),t.register("responsive.rebuild()",function(){return this.iterator("table",function(t){t._responsive&&t._responsive._classLogic()})}),t.register("responsive.recalc()",function(){return this.iterator("table",function(t){
t._responsive&&(t._responsive._resizeAuto(),t._responsive._resize())})}),t.register("responsive.hasHidden()",function(){var t=this.context[0];return!!t._responsive&&-1!==d.inArray(!1,t._responsive._responsiveOnlyHidden())}),t.registerPlural("columns().responsiveHidden()","column().responsiveHidden()",function(){return this.iterator("column",function(t,e){return!!t._responsive&&t._responsive._responsiveOnlyHidden()[e]},1)}),r.version="2.2.6",d.fn.dataTable.Responsive=r,d.fn.DataTable.Responsive=r,d(a).on("preInit.dt.dtr",function(t,e){if("dt"===t.namespace&&(d(e.nTable).hasClass("responsive")||d(e.nTable).hasClass("dt-responsive")||e.oInit.responsive||i.defaults.responsive)){var n=e.oInit.responsive;!1!==n&&new r(e,d.isPlainObject(n)?n:{})}}),r}),function(n){"function"==typeof define&&define.amd?define(["jquery","datatables.net-bs4","datatables.net-responsive"],function(t){return n(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e&&e.fn.dataTable||(e=require("datatables.net-bs4")(t,e).$),e.fn.dataTable.Responsive||require("datatables.net-responsive")(t,e),n(e,t,t.document)}:n(jQuery,window,document)}(function(o){var t=o.fn.dataTable,e=t.Responsive.display,a=e.modal,s=o('<div class="modal fade dtr-bs-modal" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"/></div></div></div>');return e.modal=function(i){return function(t,e,n){if(o.fn.modal){if(!e){if(i&&i.header){var r=(e=s.find("div.modal-header")).find("button").detach();e.empty().append('<h4 class="modal-title">'+i.header(t)+"</h4>").append(r)}s.find("div.modal-body").empty().append(n()),s.appendTo("body").modal()}}else a(t,e,n)}},t.Responsive}),function(){"use strict";window.addEventListener("load",function(){var t=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(t,function(e){e.addEventListener("submit",function(t){!1===e.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")},!1)})},!1)}(),$(document).ready(function(){$(".custom-validation").parsley()}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t=t||self).parsley=e(t.jQuery)}(this,function(h){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(){}function r(){this.__id__=C.generateID()}function a(t){h.extend(!0,this,t)}function t(t,e){this.__class__="ValidatorRegistry",this.locale="en",this.init(t||{},e||{})}function d(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function e(o,a){return function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.pop(),a.apply(void 0,[t].concat(u((i=o,n.map(C.parse[i])))));var i}}function o(t){return{validateDate:e("date",t),validateNumber:e("number",t),requirementType:t.length<=2?"string":["string","string"],priority:30}}function c(t,e,n){this.__class__="Form",this.element=t,this.$element=h(t),this.domOptions=e,this.options=n,this.parent=window.Parsley,this.fields=[],this.validationResult=null}function p(t,e,n,r,i){var o=new a(window.Parsley._validatorRegistry.validators[e]);l(this,{validator:o,name:e,requirements:n,priority:r=r||t.options[e+"Priority"]||o.priority,isDomConstraint:i=!0===i}),this._parseRequirements(t.options)}function f(t,e,n,r){this.__class__="Field",this.element=t,this.$element=h(t),void 0!==r&&(this.parent=r),this.options=n,this.domOptions=e,this.constraints=[],this.constraintsByName={},this.validationResult=!0,this._bindConstraints()}function g(){this.__class__="FieldMultiple"}function m(t,e,n){this.element=t,this.$element=h(t);var r=this.$element.data("Parsley");if(r)return void 0!==n&&r.parent===window.Parsley&&(r.parent=n,r._resetOptions(r.options)),"object"===i(e)&&l(r.options,e),r;if(!this.$element.length)throw new Error("You must bind Parsley on an existing element.");if(void 0!==n&&"Form"!==n.__class__)throw new Error("Parent instance must be a Form instance");return this.parent=n||window.Parsley,this.init(e)}function v(){C.warnOnce("Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley")}function y(e,n){return e.parsleyAdaptedCallback||(e.parsleyAdaptedCallback=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(this),e.apply(n||k,t)}),e.parsleyAdaptedCallback}function b(t){return 0===t.lastIndexOf(I,0)?t.substr(I.length):t}var w=1,A={},C={attr:function(t,e,n){var r,i,o,a=new RegExp("^"+e,"i");if(void 0===n)n={};else for(r in n)n.hasOwnProperty(r)&&delete n[r];if(!t)return n;for(r=(o=t.attributes).length;r--;)(i=o[r])&&i.specified&&a.test(i.name)&&(n[this.camelize(i.name.slice(e.length))]=this.deserializeValue(i.value));return n},checkAttr:function(t,e,n){return t.hasAttribute(e+n)},setAttr:function(t,e,n,r){t.setAttribute(this.dasherize(e+n),String(r))},getType:function(t){return t.getAttribute("type")||"text"},generateID:function(){return""+w++},deserializeValue:function(t){var e;try{return t?"true"==t||"false"!=t&&("null"==t?null:isNaN(e=Number(t))?/^[\[\{]/.test(t)?JSON.parse(t):t:e):t}catch(e){return t}},camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},dasherize:function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},warn:function(){var t;window.console&&"function"==typeof window.console.warn&&(t=window.console).warn.apply(t,arguments)},warnOnce:function(t){A[t]||(A[t]=!0,this.warn.apply(this,arguments))},_resetWarnings:function(){A={}},trimString:function(t){return t.replace(/^\s+|\s+$/g,"")},parse:{date:function(t){var e=t.match(/^(\d{4,})-(\d\d)-(\d\d)$/);if(!e)return null;var n=s(e.map(function(t){return parseInt(t,10)}),4),r=(n[0],n[1]),i=n[2],o=n[3],a=new Date(r,i-1,o);return a.getFullYear()!==r||a.getMonth()+1!==i||a.getDate()!==o?null:a},string:function(t){return t},integer:function(t){return isNaN(t)?null:parseInt(t,10)},number:function(t){if(isNaN(t))throw null;return parseFloat(t)},"boolean":function(t){return!/^\s*false\s*$/i.test(t)},object:function(t){return C.deserializeValue(t)},regexp:function(t){var e="";return t=/^\/.*\/(?:[gimy]*)$/.test(t)?(e=t.replace(/.*\/([gimy]*)$/,"$1"),t.replace(new RegExp("^/(.*?)/"+e+"$"),"$1")):"^"+t+"$",new RegExp(t,e)}},parseRequirement:function(t,e){var n=this.parse[t||"string"];if(!n)throw'Unknown requirement specification: "'+t+'"';var r=n(e);if(null===r)throw"Requirement is not a ".concat(t,': "').concat(e,'"');return r},namespaceEvents:function(t,e){return(t=this.trimString(t||"").split(/\s+/))[0]?h.map(t,function(t){return"".concat(t,".").concat(e)}).join(" "):""},difference:function(t,n){var r=[];return h.each(t,function(t,e){-1==n.indexOf(e)&&r.push(e)}),r},all:function(t){return h.when.apply(h,u(t).concat([42,42]))},objectCreate:Object.create||function(t){if(1<arguments.length)throw Error("Second argument not supported");if("object"!=i(t))throw TypeError("Argument must be an object");n.prototype=t;var e=new n;return n.prototype=null,e},_SubmitSelector:'input[type="submit"], button:submit'},x={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:!0,multiple:null,group:null,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,triggerAfterFailure:"input",errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(){},errorsContainer:function(){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"};r.prototype={asyncSupport:!0,_pipeAccordingToValidationResult:function(){function t(){var t=h.Deferred();return!0!==e.validationResult&&t.reject(),t.resolve().promise()}var e=this;return[t,t]},actualizeOptions:function(){return C.attr(this.element,this.options.namespace,this.domOptions),this.parent&&this.parent.actualizeOptions&&this.parent.actualizeOptions(),this},_resetOptions:function(t){for(var e in this.domOptions=C.objectCreate(this.parent.options),this.options=C.objectCreate(this.domOptions),t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.actualizeOptions()},_listeners:null,on:function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},subscribe:function(t,e){h.listenTo(this,t.toLowerCase(),e)},off:function(t,e){var n=this._listeners&&this._listeners[t];if(n)if(e)for(var r=n.length;r--;)n[r]===e&&n.splice(r,1);else delete this._listeners[t];return this},unsubscribe:function(t){h.unsubscribeTo(this,t.toLowerCase())},trigger:function(t,e,n){e=e||this;var r,i=this._listeners&&this._listeners[t];if(i)for(var o=i.length;o--;)if(!1===(r=i[o].call(e,e,n)))return r;return!this.parent||this.parent.trigger(t,e,n)},asyncIsValid:function(t,e){return C.warnOnce("asyncIsValid is deprecated; please use whenValid instead"),this.whenValid({group:t,force:e})},_findRelated:function(){return this.options.multiple?h(this.parent.element.querySelectorAll("[".concat(this.options.namespace,'multiple="').concat(this.options.multiple,'"]'))):this.$element}},a.prototype={validate:function(t,e){if(this.fn)return 3<arguments.length&&(e=[].slice.call(arguments,1,-1)),this.fn(t,e);if(Array.isArray(t)){if(!this.validateMultiple)throw"Validator `"+this.name+"` does not handle multiple values";return this.validateMultiple.apply(this,arguments)}var n=arguments[arguments.length-1];if(this.validateDate&&n._isDateInput())return arguments[0]=C.parse.date(arguments[0]),null!==arguments[0]&&this.validateDate.apply(this,arguments);if(this.validateNumber)return!t||!isNaN(t)&&(arguments[0]=parseFloat(arguments[0]),this.validateNumber.apply(this,arguments));if(this.validateString)return this.validateString.apply(this,arguments);throw"Validator `"+this.name+"` only handles multiple values"},parseRequirements:function(t,e){if("string"!=typeof t)return Array.isArray(t)?t:[t];var n=this.requirementType;if(Array.isArray(n)){for(var r=function(t,e){var n=t.match(/^\s*\[(.*)\]\s*$/);if(!n)throw'Requirement is not an array: "'+t+'"';var r=n[1].split(",").map(C.trimString);if(r.length!==e)throw"Requirement has "+r.length+" values when "+e+" are needed";return r}(t,n.length),i=0;i<r.length;i++)r[i]=C.parseRequirement(n[i],r[i]);return r}return h.isPlainObject(n)?function(t,e,n){var r=null,i={};for(var o in t)if(o){var a=n(o);"string"==typeof a&&(a=C.parseRequirement(t[o],a)),i[o]=a}else r=C.parseRequirement(t[o],e);return[r,i]}(n,t,e):[C.parseRequirement(n,t)]},requirementType:"string",priority:2};var S={email:/^((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))$/,number:/^-?(\d*\.)?\d+(e[-+]?\d+)?$/i,integer:/^-?\d+$/,digits:/^\d+$/,alphanum:/^\w+$/i,date:{test:function(t){return null!==C.parse.date(t)}},url:new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$")};S.range=S.number,t.prototype={init:function(t,e){for(var n in this.catalog=e,this.validators=l({},this.validators),t)this.addValidator(n,t[n].fn,t[n].priority);window.Parsley.trigger("parsley:validator:init")},setLocale:function(t){if(void 0===this.catalog[t])throw new Error(t+" is not available in the catalog");return this.locale=t,this},addCatalog:function(t,e,n){return"object"===i(e)&&(this.catalog[t]=e),!0===n?this.setLocale(t):this},addMessage:function(t,e,n){return void 0===this.catalog[t]&&(this.catalog[t]={}),this.catalog[t][e]=n,this},addMessages:function(t,e){for(var n in e)this.addMessage(t,n,e[n]);return this},addValidator:function(t){if(this.validators[t])C.warn('Validator "'+t+'" is already defined.');else if(x.hasOwnProperty(t))return void C.warn('"'+t+'" is a restricted keyword and is not a valid validator name.');return this._setValidator.apply(this,arguments)},hasValidator:function(t){return!!this.validators[t]},updateValidator:function(t){return this.validators[t]?this._setValidator.apply(this,arguments):(C.warn('Validator "'+t+'" is not already defined.'),this.addValidator.apply(this,arguments))},removeValidator:function(t){return this.validators[t]||C.warn('Validator "'+t+'" is not defined.'),delete this.validators[t],this},_setValidator:function(t,e,n){for(var r in"object"!==i(e)&&(e={fn:e,priority:n}),e.validate||(e=new a(e)),(this.validators[t]=e).messages||{})this.addMessage(r,t,e.messages[r]);return this},getErrorMessage:function(t){return("type"===t.name?(this.catalog[this.locale][t.name]||{})[t.requirements]:this.formatMessage(this.catalog[this.locale][t.name],t.requirements))||this.catalog[this.locale].defaultMessage||this.catalog.en.defaultMessage},formatMessage:function(t,e){if("object"!==i(e))return"string"==typeof t?t.replace(/%s/i,e):"";for(var n in e)t=this.formatMessage(t,e[n]);return t},validators:{notblank:{validateString:function(t){return/\S/.test(t)},priority:2},required:{validateMultiple:function(t){return 0<t.length},validateString:function(t){return/\S/.test(t)},priority:512},type:{validateString:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:{},i=r.step,o=void 0===i?"any":i,a=r.base,s=void 0===a?0:a,l=S[e];if(!l)throw new Error("validator type `"+e+"` is not supported");if(!t)return!0;if(!l.test(t))return!1;if("number"===e&&!/^any$/i.test(o||"")){var u=Number(t),c=Math.max(d(o),d(s));if(d(u)>c)return!1;var h=function(t){return Math.round(t*Math.pow(10,c))};if((h(u)-h(s))%h(o)!=0)return!1}return!0},requirementType:{"":"string",step:"string",base:"number"},priority:256},pattern:{validateString:function(t,e){return!t||e.test(t)},requirementType:"regexp",priority:64},minlength:{validateString:function(t,e){return!t||t.length>=e},requirementType:"integer",priority:30},maxlength:{validateString:function(t,e){return t.length<=e},requirementType:"integer",priority:30},length:{validateString:function(t,e,n){return!t||t.length>=e&&t.length<=n},requirementType:["integer","integer"],priority:30},mincheck:{validateMultiple:function(t,e){return t.length>=e},requirementType:"integer",priority:30},maxcheck:{validateMultiple:function(t,e){return t.length<=e},requirementType:"integer",priority:30},check:{validateMultiple:function(t,e,n){return t.length>=e&&t.length<=n},requirementType:["integer","integer"],priority:30},min:o(function(t,e){return e<=t}),max:o(function(t,e){return t<=e}),range:o(function(t,e,n){return e<=t&&t<=n}),equalto:{validateString:function(t,e){if(!t)return!0;var n=h(e);return n.length?t===n.val():t===e},priority:256},euvatin:{validateString:function(t){return!t||/^[A-Z][A-Z][A-Za-z0-9 -]{2,}$/.test(t)},priority:30}}};var _={};_.Form={_actualizeTriggers:function(){var e=this;this.$element.on("submit.Parsley",function(t){e.onSubmitValidate(t)}),this.$element.on("click.Parsley",C._SubmitSelector,function(t){e.onSubmitButton(t)}),!1!==this.options.uiEnabled&&this.element.setAttribute("novalidate","")},focus:function(){if(!(this._focusedField=null)===this.validationResult||"none"===this.options.focus)return null;for(var t=0;t<this.fields.length;t++){var e=this.fields[t];if(!0!==e.validationResult&&0<e.validationResult.length&&void 0===e.options.noFocus&&(this._focusedField=e.$element,"first"===this.options.focus))break}return null===this._focusedField?null:this._focusedField.focus()},_destroyUI:function(){this.$element.off(".Parsley")}};var D={pending:null,resolved:!0,rejected:!(_.Field={_reflowUI:function(){if(this._buildUI(),this._ui){var l=function l(t,e,n){for(var r=[],i=[],o=0;o<t.length;o++){for(var a=!1,s=0;s<e.length;s++)if(t[o].assert.name===e[s].assert.name){a=!0;break}a?i.push(t[o]):r.push(t[o])}return{kept:i,added:r,removed:n?[]:l(e,t,!0).added}}(this.validationResult,this._ui.lastValidationResult);this._ui.lastValidationResult=this.validationResult,this._manageStatusClass(),this._manageErrorsMessages(l),this._actualizeTriggers(),!l.kept.length&&!l.added.length||this._failedOnce||(this._failedOnce=!0,this._actualizeTriggers())}},getErrorsMessages:function(){if(!0===this.validationResult)return[];for(var t=[],e=0;e<this.validationResult.length;e++)t.push(this.validationResult[e].errorMessage||this._getErrorMessage(this.validationResult[e].assert));return t},addError:function(t,e){var n=1<arguments.length&&void 0!==e?e:{},r=n.message,i=n.assert,o=n.updateClass,a=void 0===o||o;this._buildUI(),this._addError(t,{message:r,assert:i}),a&&this._errorClass()},updateError:function(t,e){var n=1<arguments.length&&void 0!==e?e:{},r=n.message,i=n.assert,o=n.updateClass,a=void 0===o||o;this._buildUI(),this._updateError(t,{message:r,assert:i}),a&&this._errorClass()},removeError:function(t,e){var n=(1<arguments.length&&void 0!==e?e:{}).updateClass,r=void 0===n||n;this._buildUI(),this._removeError(t),r&&this._manageStatusClass()},_manageStatusClass:function(){this.hasConstraints()&&this.needsValidation()&&!0===this.validationResult?this._successClass():0<this.validationResult.length?this._errorClass():this._resetClass()},_manageErrorsMessages:function(t){if(void 0===this.options.errorsMessagesDisabled){if(void 0!==this.options.errorMessage)return t.added.length||t.kept.length?(this._insertErrorWrapper(),0===this._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&this._ui.$errorsWrapper.append(h(this.options.errorTemplate).addClass("parsley-custom-error-message")),this._ui.$errorClassHandler.attr("aria-describedby",this._ui.errorsWrapperId),this._ui.$errorsWrapper.addClass("filled").attr("aria-hidden","false").find(".parsley-custom-error-message").html(this.options.errorMessage)):(this._ui.$errorClassHandler.removeAttr("aria-describedby"),this._ui.$errorsWrapper.removeClass("filled").attr("aria-hidden","true").find(".parsley-custom-error-message").remove());for(var e=0;e<t.removed.length;e++)this._removeError(t.removed[e].assert.name);for(e=0;e<t.added.length;e++)this._addError(t.added[e].assert.name,{message:t.added[e].errorMessage,assert:t.added[e].assert});for(e=0;e<t.kept.length;e++)this._updateError(t.kept[e].assert.name,{message:t.kept[e].errorMessage,assert:t.kept[e].assert})}},_addError:function(t,e){var n=e.message,r=e.assert;this._insertErrorWrapper(),this._ui.$errorClassHandler.attr("aria-describedby",this._ui.errorsWrapperId),this._ui.$errorsWrapper.addClass("filled").attr("aria-hidden","false").append(h(this.options.errorTemplate).addClass("parsley-"+t).html(n||this._getErrorMessage(r)))},_updateError:function(t,e){var n=e.message,r=e.assert;this._ui.$errorsWrapper.addClass("filled").find(".parsley-"+t).html(n||this._getErrorMessage(r))},_removeError:function(t){this._ui.$errorClassHandler.removeAttr("aria-describedby"),this._ui.$errorsWrapper.removeClass("filled").attr("aria-hidden","true").find(".parsley-"+t).remove()},_getErrorMessage:function(t){var e=t.name+"Message";return void 0!==this.options[e]?window.Parsley.formatMessage(this.options[e],t.requirements):window.Parsley.getErrorMessage(t)},_buildUI:function(){if(!this._ui&&!1!==this.options.uiEnabled){var t={};this.element.setAttribute(this.options.namespace+"id",this.__id__),t.$errorClassHandler=this._manageClassHandler(),t.errorsWrapperId="parsley-id-"+(this.options.multiple?"multiple-"+this.options.multiple:this.__id__),t.$errorsWrapper=h(this.options.errorsWrapper).attr("id",t.errorsWrapperId),t.lastValidationResult=[],t.validationInformationVisible=!1,this._ui=t}},_manageClassHandler:function(){if("string"==typeof this.options.classHandler&&h(this.options.classHandler).length)return h(this.options.classHandler);var t=this.options.classHandler;if("string"==typeof this.options.classHandler&&"function"==typeof window[this.options.classHandler]&&(t=window[this.options.classHandler]),"function"==typeof t){var e=t.call(this,this);if(void 0!==e&&e.length)return e}else{if("object"===i(t)&&t instanceof jQuery&&t.length)return t;t&&C.warn("The class handler `"+t+"` does not exist in DOM nor as a global JS function")}return this._inputHolder()},_inputHolder:function(){return this.options.multiple&&"SELECT"!==this.element.nodeName?this.$element.parent():this.$element},_insertErrorWrapper:function(){var t=this.options.errorsContainer;if(0!==this._ui.$errorsWrapper.parent().length)return this._ui.$errorsWrapper.parent();if("string"==typeof t){if(h(t).length)return h(t).append(this._ui.$errorsWrapper);"function"==typeof window[t]?t=window[t]:C.warn("The errors container `"+t+"` does not exist in DOM nor as a global JS function")}return"function"==typeof t&&(t=t.call(this,this)),"object"===i(t)&&t.length?t.append(this._ui.$errorsWrapper):this._inputHolder().after(this._ui.$errorsWrapper)},_actualizeTriggers:function(){var t,e=this,n=this._findRelated();n.off(".Parsley"),this._failedOnce?n.on(C.namespaceEvents(this.options.triggerAfterFailure,"Parsley"),function(){e._validateIfNeeded()}):(t=C.namespaceEvents(this.options.trigger,"Parsley"))&&n.on(t,function(t){e._validateIfNeeded(t)})},_validateIfNeeded:function(t){var e=this;t&&/key|input/.test(t.type)&&(!this._ui||!this._ui.validationInformationVisible)&&this.getValue().length<=this.options.validationThreshold||(this.options.debounce?(window.clearTimeout(this._debounced),this._debounced=window.setTimeout(function(){return e.validate()},this.options.debounce)):this.validate())},_resetUI:function(){this._failedOnce=!1,this._actualizeTriggers(),void 0!==this._ui&&(this._ui.$errorsWrapper.removeClass("filled").children().remove(),this._resetClass(),this._ui.lastValidationResult=[],this._ui.validationInformationVisible=!1)},_destroyUI:function(){this._resetUI(),void 0!==this._ui&&this._ui.$errorsWrapper.remove(),delete this._ui},_successClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass)},_errorClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass)},_resetClass:function(){this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass)}})};c.prototype={onSubmitValidate:function(t){var e=this;if(!0!==t.parsley){var n=this._submitSource||this.$element.find(C._SubmitSelector)[0];if(this._submitSource=null,this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!0),!n||null===n.getAttribute("formnovalidate")){window.Parsley._remoteCache={};var r=this.whenValidate({event:t});"resolved"===r.state()&&!1!==this._trigger("submit")||(t.stopImmediatePropagation(),t.preventDefault(),"pending"===r.state()&&r.done(function(){e._submit(n)}))}}},onSubmitButton:function(t){this._submitSource=t.currentTarget},_submit:function(t){if(!1!==this._trigger("submit")){if(t){var e=this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!1);0===e.length&&(e=h('<input class="parsley-synthetic-submit-button" type="hidden">').appendTo(this.$element)),e.attr({name:t.getAttribute("name"),value:t.getAttribute("value")})}this.$element.trigger(l(h.Event("submit"),{parsley:!0}))}},validate:function(t){if(1<=arguments.length&&!h.isPlainObject(t)){C.warnOnce("Calling validate on a parsley form without passing arguments as an object is deprecated.");var e=Array.prototype.slice.call(arguments);t={group:e[0],force:e[1],event:e[2]}}return D[this.whenValidate(t).state()]},whenValidate:function(t){var e,n=this,r=0<arguments.length&&void 0!==t?t:{},i=r.group,o=r.force,a=r.event;(this.submitEvent=a)&&(this.submitEvent=l({},a,{preventDefault:function(){C.warnOnce("Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`"),n.validationResult=!1}})),this.validationResult=!0,this._trigger("validate"),this._refreshFields();var s=this._withoutReactualizingFormOptions(function(){return h.map(n.fields,function(t){return t.whenValidate({force:o,group:i})})});return(e=C.all(s).done(function(){n._trigger("success")}).fail(function(){n.validationResult=!1,n.focus(),n._trigger("error")}).always(function(){n._trigger("validated")})).pipe.apply(e,u(this._pipeAccordingToValidationResult()))},isValid:function(t){if(1<=arguments.length&&!h.isPlainObject(t)){C.warnOnce("Calling isValid on a parsley form without passing arguments as an object is deprecated.");var e=Array.prototype.slice.call(arguments);t={group:e[0],force:e[1]}}return D[this.whenValid(t).state()]},whenValid:function(t){var e=this,n=0<arguments.length&&void 0!==t?t:{},r=n.group,i=n.force;this._refreshFields();var o=this._withoutReactualizingFormOptions(function(){return h.map(e.fields,function(t){return t.whenValid({group:r,force:i})})});return C.all(o)},refresh:function(){return this._refreshFields(),this},reset:function(){for(var t=0;t<this.fields.length;t++)this.fields[t].reset();this._trigger("reset")},destroy:function(){this._destroyUI();for(var t=0;t<this.fields.length;t++)this.fields[t].destroy();this.$element.removeData("Parsley"),this._trigger("destroy")},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var i=this,t=this.fields;return this.fields=[],this.fieldsMappedById={},this._withoutReactualizingFormOptions(function(){i.$element.find(i.options.inputs).not(i.options.excluded).not("[".concat(i.options.namespace,"excluded=true]")).each(function(t,e){var n=new window.Parsley.Factory(e,{},i);if("Field"===n.__class__||"FieldMultiple"===n.__class__){var r=n.__class__+"-"+n.__id__;void 0===i.fieldsMappedById[r]&&(i.fieldsMappedById[r]=n,i.fields.push(n))}}),h.each(C.difference(t,i.fields),function(t,e){e.reset()})}),this},_withoutReactualizingFormOptions:function(t){var e=this.actualizeOptions;this.actualizeOptions=function(){return this};var n=t();return this.actualizeOptions=e,n},_trigger:function(t){return this.trigger("form:"+t)}};var T={pending:null,resolved:!0,rejected:(p.prototype={validate:function(t,e){var n;return(n=this.validator).validate.apply(n,[t].concat(u(this.requirementList),[e]))},_parseRequirements:function(n){var r=this;this.requirementList=this.validator.parseRequirements(this.requirements,function(t){return n[r.name+((e=t)[0].toUpperCase()+e.slice(1))];var e})}},!1)};f.prototype={validate:function(t){1<=arguments.length&&!h.isPlainObject(t)&&(C.warnOnce("Calling validate on a parsley field without passing arguments as an object is deprecated."),t={options:t});var e=this.whenValidate(t);if(!e)return!0;switch(e.state()){case"pending":return null;case"resolved":return!0;case"rejected":return this.validationResult}},whenValidate:function(t){var e,n=this,r=0<arguments.length&&void 0!==t?t:{},i=r.force,o=r.group;if(this.refresh(),!o||this._isInGroup(o))return this.value=this.getValue(),this._trigger("validate"),(e=this.whenValid({force:i,value:this.value,_refreshed:!0}).always(function(){n._reflowUI()}).done(function(){n._trigger("success")}).fail(function(){n._trigger("error")}).always(function(){n._trigger("validated")})).pipe.apply(e,u(this._pipeAccordingToValidationResult()))},hasConstraints:function(){return 0!==this.constraints.length},needsValidation:function(t){return void 0===t&&(t=this.getValue()),!(!t.length&&!this._isRequired()&&void 0===this.options.validateIfEmpty)},_isInGroup:function(t){return Array.isArray(this.options.group)?-1!==h.inArray(t,this.options.group):this.options.group===t},isValid:function(t){if(1<=arguments.length&&!h.isPlainObject(t)){C.warnOnce("Calling isValid on a parsley field without passing arguments as an object is deprecated.");var e=Array.prototype.slice.call(arguments);t={force:e[0],value:e[1]}}var n=this.whenValid(t);return!n||T[n.state()]},whenValid:function(t){var r=this,e=0<arguments.length&&void 0!==t?t:{},n=e.force,i=void 0!==n&&n,o=e.value,a=e.group;if(e._refreshed||this.refresh(),!a||this._isInGroup(a)){if(this.validationResult=!0,!this.hasConstraints())return h.when();if(null==o&&(o=this.getValue()),!this.needsValidation(o)&&!0!==i)return h.when();var s=this._getGroupedConstraints(),l=[];return h.each(s,function(t,e){var n=C.all(h.map(e,function(t){return r._validateConstraint(o,t)}));if(l.push(n),"rejected"===n.state())return!1}),C.all(l)}},_validateConstraint:function(t,e){var n=this,r=e.validate(t,this);return!1===r&&(r=h.Deferred().reject()),C.all([r]).fail(function(t){n.validationResult instanceof Array||(n.validationResult=[]),n.validationResult.push({assert:e,errorMessage:"string"==typeof t&&t})})},getValue:function(){var t;return null==(t="function"==typeof this.options.value?this.options.value(this):void 0!==this.options.value?this.options.value:this.$element.val())?"":this._handleWhitespace(t)},reset:function(){return this._resetUI(),this._trigger("reset")},destroy:function(){this._destroyUI(),this.$element.removeData("Parsley"),this.$element.removeData("FieldMultiple"),this._trigger("destroy")},refresh:function(){return this._refreshConstraints(),this},_refreshConstraints:function(){return this.actualizeOptions()._bindConstraints()},refreshConstraints:function(){return C.warnOnce("Parsley's refreshConstraints is deprecated. Please use refresh"),this.refresh()},addConstraint:function(t,e,n,r){if(window.Parsley._validatorRegistry.validators[t]){var i=new p(this,t,e,n,r);"undefined"!==this.constraintsByName[i.name]&&this.removeConstraint(i.name),this.constraints.push(i),this.constraintsByName[i.name]=i}return this},removeConstraint:function(t){for(var e=0;e<this.constraints.length;e++)if(t===this.constraints[e].name){this.constraints.splice(e,1);break}return delete this.constraintsByName[t],this},updateConstraint:function(t,e,n){return this.removeConstraint(t).addConstraint(t,e,n)},_bindConstraints:function(){for(var t=[],e={},n=0;n<this.constraints.length;n++)!1===this.constraints[n].isDomConstraint&&(t.push(this.constraints[n]),e[this.constraints[n].name]=this.constraints[n]);for(var r in this.constraints=t,this.constraintsByName=e,this.options)this.addConstraint(r,this.options[r],void 0,!0);return this._bindHtml5Constraints()},_bindHtml5Constraints:function(){null!==this.element.getAttribute("required")&&this.addConstraint("required",!0,void 0,!0),null!==this.element.getAttribute("pattern")&&this.addConstraint("pattern",this.element.getAttribute("pattern"),void 0,!0);var t=this.element.getAttribute("min"),e=this.element.getAttribute("max")
;null!==t&&null!==e?this.addConstraint("range",[t,e],void 0,!0):null!==t?this.addConstraint("min",t,void 0,!0):null!==e&&this.addConstraint("max",e,void 0,!0),null!==this.element.getAttribute("minlength")&&null!==this.element.getAttribute("maxlength")?this.addConstraint("length",[this.element.getAttribute("minlength"),this.element.getAttribute("maxlength")],void 0,!0):null!==this.element.getAttribute("minlength")?this.addConstraint("minlength",this.element.getAttribute("minlength"),void 0,!0):null!==this.element.getAttribute("maxlength")&&this.addConstraint("maxlength",this.element.getAttribute("maxlength"),void 0,!0);var n=C.getType(this.element);return"number"===n?this.addConstraint("type",["number",{step:this.element.getAttribute("step")||"1",base:t||this.element.getAttribute("value")}],void 0,!0):/^(email|url|range|date)$/i.test(n)?this.addConstraint("type",n,void 0,!0):this},_isRequired:function(){return void 0!==this.constraintsByName.required&&!1!==this.constraintsByName.required.requirements},_trigger:function(t){return this.trigger("field:"+t)},_handleWhitespace:function(t){return!0===this.options.trimValue&&C.warnOnce('data-parsley-trim-value="true" is deprecated, please use data-parsley-whitespace="trim"'),"squish"===this.options.whitespace&&(t=t.replace(/\s{2,}/g," ")),"trim"!==this.options.whitespace&&"squish"!==this.options.whitespace&&!0!==this.options.trimValue||(t=C.trimString(t)),t},_isDateInput:function(){var t=this.constraintsByName.type;return t&&"date"===t.requirements},_getGroupedConstraints:function(){if(!1===this.options.priorityEnabled)return[this.constraints];for(var t=[],e={},n=0;n<this.constraints.length;n++){var r=this.constraints[n].priority;e[r]||t.push(e[r]=[]),e[r].push(this.constraints[n])}return t.sort(function(t,e){return e[0].priority-t[0].priority}),t}},g.prototype={addElement:function(t){return this.$elements.push(t),this},_refreshConstraints:function(){var t;if(this.constraints=[],"SELECT"===this.element.nodeName)return this.actualizeOptions()._bindConstraints(),this;for(var e=0;e<this.$elements.length;e++)if(h("html").has(this.$elements[e]).length){t=this.$elements[e].data("FieldMultiple")._refreshConstraints().constraints;for(var n=0;n<t.length;n++)this.addConstraint(t[n].name,t[n].requirements,t[n].priority,t[n].isDomConstraint)}else this.$elements.splice(e,1);return this},getValue:function(){if("function"==typeof this.options.value)return this.options.value(this);if(void 0!==this.options.value)return this.options.value;if("INPUT"===this.element.nodeName){var t=C.getType(this.element);if("radio"===t)return this._findRelated().filter(":checked").val()||"";if("checkbox"===t){var e=[];return this._findRelated().filter(":checked").each(function(){e.push(h(this).val())}),e}}return"SELECT"===this.element.nodeName&&null===this.$element.val()?[]:this.$element.val()},_init:function(){return this.$elements=[this.$element],this}},m.prototype={init:function(t){return this.__class__="Parsley",this.__version__="2.9.2",this.__id__=C.generateID(),this._resetOptions(t),"FORM"===this.element.nodeName||C.checkAttr(this.element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs)?this.bind("parsleyForm"):this.isMultiple()?this.handleMultiple():this.bind("parsleyField")},isMultiple:function(){var t=C.getType(this.element);return"radio"===t||"checkbox"===t||"SELECT"===this.element.nodeName&&null!==this.element.getAttribute("multiple")},handleMultiple:function(){var t,e,r=this;if(this.options.multiple=this.options.multiple||(t=this.element.getAttribute("name"))||this.element.getAttribute("id"),"SELECT"===this.element.nodeName&&null!==this.element.getAttribute("multiple"))return this.options.multiple=this.options.multiple||this.__id__,this.bind("parsleyFieldMultiple");if(!this.options.multiple)return C.warn("To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\{|\}|\$)/g,""),t&&h('input[name="'+t+'"]').each(function(t,e){var n=C.getType(e);"radio"!==n&&"checkbox"!==n||e.setAttribute(r.options.namespace+"multiple",r.options.multiple)});for(var n=this._findRelated(),i=0;i<n.length;i++)if(void 0!==(e=h(n.get(i)).data("Parsley"))){this.$element.data("FieldMultiple")||e.addElement(this.$element);break}return this.bind("parsleyField",!0),e||this.bind("parsleyFieldMultiple")},bind:function(t,e){var n;switch(t){case"parsleyForm":n=h.extend(new c(this.element,this.domOptions,this.options),new r,window.ParsleyExtend)._bindFields();break;case"parsleyField":n=h.extend(new f(this.element,this.domOptions,this.options,this.parent),new r,window.ParsleyExtend);break;case"parsleyFieldMultiple":n=h.extend(new f(this.element,this.domOptions,this.options,this.parent),new g,new r,window.ParsleyExtend)._init();break;default:throw new Error(t+"is not a supported Parsley type")}return this.options.multiple&&C.setAttr(this.element,this.options.namespace,"multiple",this.options.multiple),void 0!==e?this.$element.data("FieldMultiple",n):(this.$element.data("Parsley",n),n._actualizeTriggers(),n._trigger("init")),n}};var E=h.fn.jquery.split(".");if(parseInt(E[0])<=1&&parseInt(E[1])<8)throw"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.";E.forEach||C.warn("Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim");var R=l(new r,{element:document,$element:h(document),actualizeOptions:null,_resetOptions:null,Factory:m,version:"2.9.2"});l(f.prototype,_.Field,r.prototype),l(c.prototype,_.Form,r.prototype),l(m.prototype,r.prototype),h.fn.parsley=h.fn.psly=function(t){if(1<this.length){var e=[];return this.each(function(){e.push(h(this).parsley(t))}),e}if(0!=this.length)return new m(this[0],t)},void 0===window.ParsleyExtend&&(window.ParsleyExtend={}),R.options=l(C.objectCreate(x),window.ParsleyConfig),window.ParsleyConfig=R.options,window.Parsley=window.psly=R,R.Utils=C,window.ParsleyUtils={},h.each(C,function(t,e){"function"==typeof e&&(window.ParsleyUtils[t]=function(){return C.warnOnce("Accessing `window.ParsleyUtils` is deprecated. Use `window.Parsley.Utils` instead."),C[t].apply(C,arguments)})});var L=window.Parsley._validatorRegistry=new t(window.ParsleyConfig.validators,window.ParsleyConfig.i18n);window.ParsleyValidator={},h.each("setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator hasValidator".split(" "),function(t,e){window.Parsley[e]=function(){return L[e].apply(L,arguments)},window.ParsleyValidator[e]=function(){var t;return C.warnOnce("Accessing the method '".concat(e,"' through Validator is deprecated. Simply call 'window.Parsley.").concat(e,"(...)'")),(t=window.Parsley)[e].apply(t,arguments)}}),window.Parsley.UI=_,window.ParsleyUI={removeError:function(t,e,n){var r=!0!==n;return C.warnOnce("Accessing UI is deprecated. Call 'removeError' on the instance directly. Please comment in issue 1073 as to your need to call this method."),t.removeError(e,{updateClass:r})},getErrorsMessages:function(t){return C.warnOnce("Accessing UI is deprecated. Call 'getErrorsMessages' on the instance directly."),t.getErrorsMessages()}},h.each("addError updateError".split(" "),function(t,a){window.ParsleyUI[a]=function(t,e,n,r,i){var o=!0!==i;return C.warnOnce("Accessing UI is deprecated. Call '".concat(a,"' on the instance directly. Please comment in issue 1073 as to your need to call this method.")),t[a](e,{message:n,assert:r,updateClass:o})}}),!1!==window.ParsleyConfig.autoBind&&h(function(){h("[data-parsley-validate]").length&&h("[data-parsley-validate]").parsley()});var k=h({}),I="parsley:";return h.listen=function(t,e,n){var r;if(v(),"object"===i(arguments[1])&&"function"==typeof n&&(r=arguments[1],e=arguments[2]),"function"!=typeof e)throw new Error("Wrong parameters");window.Parsley.on(b(t),y(e,r))},h.listenTo=function(t,e,n){if(v(),!(t instanceof f||t instanceof c))throw new Error("Must give Parsley instance");if("string"!=typeof e||"function"!=typeof n)throw new Error("Wrong parameters");t.on(b(e),y(n))},h.unsubscribe=function(t,e){if(v(),"string"!=typeof t||"function"!=typeof e)throw new Error("Wrong arguments");window.Parsley.off(b(t),e.parsleyAdaptedCallback)},h.unsubscribeTo=function(t,e){if(v(),!(t instanceof f||t instanceof c))throw new Error("Must give Parsley instance");t.off(b(e))},h.unsubscribeAll=function(e){v(),window.Parsley.off(b(e)),h("form,input,textarea,select").each(function(){var t=h(this).data("Parsley");t&&t.off(b(e))})},h.emit=function(t,e){v();var n=e instanceof f||e instanceof c,r=Array.prototype.slice.call(arguments,n?2:1);r.unshift(b(t)),n||(e=window.Parsley),e.trigger.apply(e,u(r))},h.extend(!0,R,{asyncValidators:{"default":{fn:function(t){return 200<=t.status&&t.status<300},url:!1},reverse:{fn:function(t){return t.status<200||300<=t.status},url:!1}},addAsyncValidator:function(t,e,n,r){return R.asyncValidators[t]={fn:e,url:n||!1,options:r||{}},this}}),R.addValidator("remote",{requirementType:{"":"string",validator:"string",reverse:"boolean",options:"object"},validateString:function(t,e,n,r){function i(){var t=R.asyncValidators[l].fn.call(r,c,e,n);return t=t||h.Deferred().reject(),h.when(t)}var o,a,s={},l=n.validator||(!0===n.reverse?"reverse":"default");if(void 0===R.asyncValidators[l])throw new Error("Calling an undefined async validator: `"+l+"`");-1<(e=R.asyncValidators[l].url||e).indexOf("{value}")?e=e.replace("{value}",encodeURIComponent(t)):s[r.element.getAttribute("name")||r.element.getAttribute("id")]=t;var u=h.extend(!0,n.options||{},R.asyncValidators[l].options);o=h.extend(!0,{},{url:e,data:s,type:"GET"},u),r.trigger("field:ajaxoptions",r,o),a=h.param(o),void 0===R._remoteCache&&(R._remoteCache={});var c=R._remoteCache[a]=R._remoteCache[a]||h.ajax(o);return c.then(i,i)},priority:-1}),R.on("form:submit",function(){R._remoteCache={}}),r.prototype.addAsyncValidator=function(){return C.warnOnce("Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`"),R.addAsyncValidator.apply(R,arguments)},R.addMessages("en",{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or fewer.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or fewer.",check:"You must select between %s and %s choices.",equalto:"This value should be the same.",euvatin:"It's not a valid VAT Identification Number."}),R.setLocale("en"),(new function(){var r=this,i=window||global;l(this,{isNativeEvent:function(t){return t.originalEvent&&!1!==t.originalEvent.isTrusted},fakeInputEvent:function(t){r.isNativeEvent(t)&&h(t.target).trigger("input")},misbehaves:function(t){r.isNativeEvent(t)&&(r.behavesOk(t),h(document).on("change.inputevent",t.data.selector,r.fakeInputEvent),r.fakeInputEvent(t))},behavesOk:function(t){r.isNativeEvent(t)&&h(document).off("input.inputevent",t.data.selector,r.behavesOk).off("change.inputevent",t.data.selector,r.misbehaves)},install:function(){if(!i.inputEventPatched){i.inputEventPatched="0.0.3";for(var t=0,e=["select",'input[type="checkbox"]','input[type="radio"]','input[type="file"]'];t<e.length;t++){var n=e[t];h(document).on("input.inputevent",n,{selector:n},r.behavesOk).on("change.inputevent",n,{selector:n},r.misbehaves)}}},uninstall:function(){delete i.inputEventPatched,h(document).off(".inputevent")}})}).install(),R}),function(){}.call(this),function(){null==window.Set&&(window.Set=function(){function t(){this.clear()}return t.prototype.clear=function(){return this.values=[]},t.prototype.has=function(t){return-1!==this.values.indexOf(t)},t.prototype.add=function(t){return this.has(t)||this.values.push(t),this},t.prototype["delete"]=function(t){var e;return-1!==(e=this.values.indexOf(t))&&(this.values.splice(e,1),!0)},t.prototype.forEach=function(){var t;return(t=this.values).forEach.apply(t,arguments)},t}())}.call(this),function(t){function r(){}function i(t,e){return function(){t.apply(e,arguments)}}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function a(n,r){for(;3===n._state;)n=n._value;return 0===n._state?void n._deferreds.push(r):(n._handled=!0,void d(function(){var t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(a){return void l(r.promise,a)}s(r.promise,e)}else(1===n._state?s:l)(r.promise,n._value)}))}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void u(t);if("function"==typeof n)return void h(i(n,e),t)}t._state=1,t._value=e,u(t)}catch(s){l(t,s)}}function l(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&setTimeout(function(){t._handled||p(t._value)},1);for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,l(e,t))})}catch(o){if(n)return;n=!0,l(e,o)}}var e=setTimeout,d="function"==typeof setImmediate&&setImmediate||function(t){e(t,1)},p=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};o.prototype["catch"]=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new o(r);return a(this,new c(t,e,n)),n},o.all=function(t){var s=Array.prototype.slice.call(t);return new o(function(r,i){function o(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){o(e,t)},i)}s[e]=t,0==--a&&r(s)}catch(c){i(c)}}if(0===s.length)return r([]);for(var a=s.length,t=0;t<s.length;t++)o(t,s[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(i){return new o(function(t,e){for(var n=0,r=i.length;n<r;n++)i[n].then(t,e)})},o._setImmediateFn=function(t){d=t},o._setUnhandledRejectionFn=function(t){p=t},"undefined"!=typeof module&&module.exports?module.exports=o:t.Promise||(t.Promise=o)}(this),"undefined"==typeof WeakMap&&function(){var r=Object.defineProperty,t=Date.now()%1e9,e=function(){this.name="__st"+(1e9*Math.random()>>>0)+t+++"__"};e.prototype={set:function(t,e){var n=t[this.name];return n&&n[0]===t?n[1]=e:r(t,this.name,{value:[t,e],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:void 0},"delete":function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=void 0,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},window.WeakMap=e}(),function(t){function i(t){C.push(t),A||(A=!0,g(e))}function o(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function e(){A=!1;var t=C;C=[],t.sort(function(t,e){return t.uid_-e.uid_});var n=!1;t.forEach(function(t){var e=t.takeRecords();r(t),e.length&&(t.callback_(e,t),n=!0)}),n&&e()}function r(n){n.nodes_.forEach(function(t){var e=m.get(t);e&&e.forEach(function(t){t.observer===n&&t.removeTransientObservers()})})}function h(t,e){for(var n=t;n;n=n.parentNode){var r=m.get(n);if(r)for(var i=0;i<r.length;i++){var o=r[i],a=o.options;if(n===t||a.subtree){var s=e(a);s&&o.enqueue(s)}}}}function n(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++x}function a(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function s(t){var e=new a(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function d(t,e){return b=new a(t,e)}function p(t){return w||((w=s(b)).oldValue=t,w)}function f(){b=w=void 0}function l(t){return t===w||t===b}function u(t,e){return t===e?t:w&&l(t)?w:null}function c(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var g,m=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))g=setTimeout;else if(window.setImmediate)g=window.setImmediate;else{var v=[],y=String(Math.random());window.addEventListener("message",function(t){if(t.data===y){var e=v;v=[],e.forEach(function(t){t()})}}),g=function(t){v.push(t),window.postMessage(y,"*")}}var b,w,A=!1,C=[],x=0;n.prototype={observe:function(t,e){if(t=o(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=m.get(t);n||m.set(t,n=[]);for(var r,i=0;i<n.length;i++)if(n[i].observer===this){(r=n[i]).removeListeners(),r.options=e;break}r||(r=new c(this,t,e),n.push(r),this.nodes_.push(t)),r.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=m.get(t),n=0;n<e.length;n++){var r=e[n];if(r.observer===this){r.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}},c.prototype={enqueue:function(t){var e=this.observer.records_,n=e.length;if(0<e.length){var r=u(e[n-1],t);if(r)return void(e[n-1]=r)}else i(this.observer);e[n]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=m.get(t);e||m.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=m.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,n=t.relatedNode.namespaceURI,r=t.target;(o=new d("attributes",r)).attributeName=e,o.attributeNamespace=n;var i=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;h(r,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(n)?void 0:t.attributeOldValue?p(i):o});break;case"DOMCharacterDataModified":var o=d("characterData",r=t.target);i=t.prevValue;h(r,function(t){return t.characterData?t.characterDataOldValue?p(i):o:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var a,s,l=t.target;"DOMNodeInserted"===t.type?(a=[l],s=[]):(a=[],s=[l]);var u=l.previousSibling,c=l.nextSibling;(o=d("childList",t.target.parentNode)).addedNodes=a,o.removedNodes=s,o.previousSibling=u,o.nextSibling=c,h(t.relatedNode,function(t){return t.childList?o:void 0})}f()}},t.JsMutationObserver=n,t.MutationObserver||((t.MutationObserver=n)._isPolyfilled=!0)}}(self),function(){"use strict";if(!window.performance){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}var e,n;if(window.requestAnimationFrame||(window.requestAnimationFrame=(e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)?function(t){return e(function(){t(performance.now())})}:function(t){return window.setTimeout(t,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}),!((n=document.createEvent("Event")).initEvent("foo",!0,!0),n.preventDefault(),n.defaultPrevented)){var r=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(r.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var i=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||i&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||i&&"function"!=typeof window.Event){var o=window.Event;window.Event=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n},window.Event.prototype=o.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,n=[],r=function(t){n.push(t)},i=function(){n.forEach(function(t){t(e)})};e.addModule=r,e.initializeModules=i,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(t){function r(t,e){i(t,function(t){return!!e(t)||void n(t,e)}),n(t,e)}function i(t,e,n){var r=t.firstElementChild;if(!r)for(r=t.firstChild;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.nextSibling;for(;r;)!0!==e(r,n)&&i(r,e,n),r=r.nextElementSibling;return null}function n(t,e){for(var n=t.shadowRoot;n;)r(n,e),n=n.olderShadowRoot}function e(t,e){s(t,e,[])}function s(t,e,n){if(t=window.wrap(t),!(0<=n.indexOf(t))){n.push(t);for(var r,i=t.querySelectorAll("link[rel="+l+"]"),o=0,a=i.length;o<a&&(r=i[o]);o++)r["import"]&&s(r["import"],e,n);e(t)}}var l=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";t.forDocumentTree=e,t.forSubtree=r}),window.CustomElements.addModule(function(n){function a(t,e){return r(t,e)||i(t,e)}function r(t,e){return!!n.upgrade(t,e)||void(e&&s(t))}function i(t,e){b(t,function(t){return!!r(t,e)||void 0})}function e(t){x.push(t),C||(C=!0,setTimeout(o))}function o(){C=!1;for(var t,e=x,n=0,r=e.length;n<r&&(t=e[n]);n++)t();x=[]}function s(t){A?e(function(){l(t)}):l(t)}function l(t){t.__upgraded__&&!t.__attached&&(t.__attached=!0,t.attachedCallback&&t.attachedCallback())}function u(t){c(t),b(t,function(t){c(t)})}function c(t){A?e(function(){h(t)}):h(t)}function h(t){t.__upgraded__&&t.__attached&&(t.__attached=!1,t.detachedCallback&&t.detachedCallback())}function d(t){for(var e=t,n=window.wrap(document);e;){if(e==n)return!0;e=e.parentNode||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host}}function t(t){if(t.shadowRoot&&!t.shadowRoot.__watched){y.dom&&console.log("watching shadow-root for: ",t.localName);for(var e=t.shadowRoot;e;)g(e),e=e.olderShadowRoot}}function p(t,e){if(y.dom){var n=e[0];if(n&&"childList"===n.type&&n.addedNodes&&n.addedNodes){for(var r=n.addedNodes[0];r&&r!==document&&!r.host;)r=r.parentNode;var i=r&&(r.URL||r._URL||r.host&&r.host.localName)||"";i=i.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",e.length,i||"")}var o=d(t);e.forEach(function(t){"childList"===t.type&&(S(t.addedNodes,function(t){t.localName&&a(t,o)}),S(t.removedNodes,function(t){t.localName&&u(t)}))}),y.dom&&console.groupEnd()}function f(t){for((t=window.wrap(t))||(t=window.wrap(document));t.parentNode;)t=t.parentNode;var e=t.__observer;e&&(p(t,e.takeRecords()),o())}function g(t){if(!t.__observer){var e=new MutationObserver(p.bind(this,t));e.observe(t,{childList:!0,subtree:!0}),t.__observer=e}}function m(t){t=window.wrap(t),y.dom&&console.group("upgradeDocument: ",t.baseURI.split("/").pop()),a(t,t===window.wrap(document)),g(t),y.dom&&console.groupEnd()}function v(t){w(t,m)}var y=n.flags,b=n.forSubtree,w=n.forDocumentTree,A=window.MutationObserver._isPolyfilled&&y["throttle-attached"];n.hasPolyfillMutations=A,n.hasThrottledAttached=A;var C=!1,x=[],S=Array.prototype.forEach.call.bind(Array.prototype.forEach),_=Element.prototype.createShadowRoot;_&&(Element.prototype.createShadowRoot=function(){var t=_.call(this);return window.CustomElements.watchShadow(this),t}),n.watchShadow=t,n.upgradeDocumentTree=v,n.upgradeDocument=m,n.upgradeSubtree=i,n.upgradeAll=a,n.attached=s,n.takeRecords=f}),window.CustomElements.addModule(function(i){function t(t,e){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var n=t.getAttribute("is"),r=i.getRegisteredDefinition(t.localName)||i.getRegisteredDefinition(n);if(r&&(n&&r.tag==t.localName||!n&&!r["extends"]))return o(t,r,e)}}function o(t,e,n){return s.upgrade&&console.group("upgrade:",t.localName),e.is&&t.setAttribute("is",e.is),r(t,e),t.__upgraded__=!0,a(t),n&&i.attached(t),i.upgradeSubtree(t,n),s.upgrade&&console.groupEnd(),t}function r(t,e){Object.__proto__||n(t,e.prototype,e["native"]),t.__proto__=e.prototype}function n(t,e,n){for(var r={},i=e;i!==n&&i!==HTMLElement.prototype;){for(var o,a=Object.getOwnPropertyNames(i),s=0;o=a[s];s++)r[o]||(Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o)),r[o]=1);i=Object.getPrototypeOf(i)}}function a(t){t.createdCallback&&t.createdCallback()}var s=i.flags;i.upgrade=t,i.upgradeWithDefinition=o,i.implementPrototype=r}),window.CustomElements.addModule(function(r){function t(t,e){var n=e||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(a(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(c(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return n.prototype||(n.prototype=Object.create(HTMLElement.prototype)),n.__name=t.toLowerCase(),n["extends"]&&(n["extends"]=n["extends"].toLowerCase()),n.lifecycle=n.lifecycle||{},n.ancestry=s(n["extends"]),l(n),u(n),i(n.prototype),h(n.__name,n),n.ctor=d(n),n.ctor.prototype=n.prototype,n.prototype.constructor=n.ctor,r.ready&&m(document),n.ctor}function i(t){if(!t.setAttribute._polyfilled){var n=t.setAttribute;t.setAttribute=function(t,e){o.call(this,t,e,n)};var e=t.removeAttribute;t.removeAttribute=function(t){o.call(this,t,null,e)},t.setAttribute._polyfilled=!0}}function o(t,e,n){t=t.toLowerCase();var r=this.getAttribute(t);n.apply(this,arguments);var i=this.getAttribute(t);this.attributeChangedCallback&&i!==r&&this.attributeChangedCallback(t,r,i)}function a(t){for(var e=0;e<A.length;e++)if(t===A[e])return!0}function s(t){var e=c(t);return e?s(e["extends"]).concat([e]):[]}function l(t){for(var e,n=t["extends"],r=0;e=t.ancestry[r];r++)n=e.is&&e.tag;t.tag=n||t.__name,n&&(t.is=t.__name)}function u(t){if(!Object.__proto__){var e=HTMLElement.prototype;if(t.is){var n=document.createElement(t.tag);e=Object.getPrototypeOf(n)}for(var r,i=t.prototype,o=!1;i;)i==e&&(o=!0),(r=Object.getPrototypeOf(i))&&(i.__proto__=r),i=r;o||console.warn(t.tag+" prototype not found in prototype chain for "+t.is),t["native"]=e}}function e(t){return y(S(t.tag),t)}function c(t){return t?C[t.toLowerCase()]:void 0}function h(t,e){C[t]=e}function d(t){return function(){return e(t)}}function n(t,e,n){return t===x?p(e,n):_(t,e)}function p(t,e){t&&(t=t.toLowerCase()),e&&(e=e.toLowerCase());var n,r=c(e||t);if(r){if(t==r.tag&&e==r.is)return new r.ctor;if(!e&&!r.is)return new r.ctor}return e?(n=p(t)).setAttribute("is",e):(n=S(t),0<=t.indexOf("-")&&b(n,HTMLElement)),n}function f(t,e){var n=t[e];t[e]=function(){var t=n.apply(this,arguments);return v(t),t}}var g,m=(r.isIE,r.upgradeDocumentTree),v=r.upgradeAll,y=r.upgradeWithDefinition,b=r.implementPrototype,w=r.useNative,A=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],C={},x="http://www.w3.org/1999/xhtml",S=document.createElement.bind(document),_=document.createElementNS.bind(document);g=Object.__proto__||w?function(t,e){return t instanceof e}:function(t,e){if(t instanceof e)return!0;for(var n=t;n;){if(n===e.prototype)return!0;n=n.__proto__}return!1},f(Node.prototype,"cloneNode"),f(document,"importNode"),document.registerElement=t,document.createElement=p,document.createElementNS=n,r.registry=C,r["instanceof"]=g,r.reservedTagList=A,r.getRegisteredDefinition=c,document.register=document.registerElement}),function(t){function e(){o(window.wrap(document)),window.CustomElements.ready=!0,(window.requestAnimationFrame||function(t){setTimeout(t,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=t.useNative,r=t.initializeModules;if(t.isIE,n){var i=function(){};t.watchShadow=i,t.upgrade=i,t.upgradeAll=i,t.upgradeDocumentTree=i,t.upgradeSubtree=i,t.takeRecords=i,t["instanceof"]=function(t,e){return t instanceof e}}else r();var o=t.upgradeDocumentTree,a=t.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(t){return t}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(t){t["import"]&&a(wrap(t["import"]))}),"complete"===document.readyState||t.flags.eager)e();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,e)}else e()}(window.CustomElements),function(){}.call(this),function(){var t=this;(function(){(function(){this.Trix={VERSION:"0.10.1",ZERO_WIDTH_SPACE:"\ufeff",NON_BREAKING_SPACE:"\xa0",OBJECT_REPLACEMENT_CHARACTER:"\ufffc",config:{}}}).call(this)}).call(t);var L=t.Trix;(function(){(function(){L.BasicObject=function(){function t(){}var a,s,r;return t.proxyMethod=function(t){var n,r,e,i,o;return e=s(t),n=e.name,i=e.toMethod,o=e.toProperty,r=e.optional,this.prototype[n]=function(){var t,e;return t=null!=i?r?"function"==typeof this[i]?this[i]():void 0:this[i]():null!=o?this[o]:void 0,r?null!=(e=null!=t?t[n]:void 0)?a.call(e,t,arguments):void 0:(e=t[n],a.call(e,t,arguments))}},s=function(t){var e,n;if(!(n=t.match(r)))throw new Error("can't parse @proxyMethod expression: "+t);return e={name:n[4]},null!=n[2]?e.toMethod=n[1]:e.toProperty=n[1],null!=n[3]&&(e.optional=!0),e},a=Function.prototype.apply,r=/^(.+?)(\(\))?(\?)?\.(.+?)$/,t}()}).call(this),function(){var r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.Object=function(t){function e(){this.id=++n}var n;return r(e,t),n=0,e.fromJSONString=function(t){return this.fromJSON(JSON.parse(t))},e.prototype.hasSameConstructorAs=function(t){return this.constructor===(null!=t?t.constructor:void 0)},e.prototype.isEqualTo=function(t){return this===t},e.prototype.inspect=function(){var t,r,i;return t=function(){var t,e,n;for(r in n=[],e=null!=(t=this.contentsForInspection())?t:{})i=e[r],n.push(r+"="+i);return n
}.call(this),"#<"+this.constructor.name+":"+this.id+(t.length?" "+t.join(", "):"")+">"},e.prototype.contentsForInspection=function(){},e.prototype.toJSONString=function(){return JSON.stringify(this)},e.prototype.toUTF16String=function(){return L.UTF16String.box(this)},e.prototype.getCacheKey=function(){return this.id.toString()},e}(L.BasicObject)}.call(this),function(){L.extend=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this}}.call(this),function(){L.extend({defer:function(t){return setTimeout(t,1)}})}.call(this),function(){var s,a;L.extend({normalizeSpaces:function(t){return t.replace(RegExp(""+L.ZERO_WIDTH_SPACE,"g"),"").replace(RegExp(""+L.NON_BREAKING_SPACE,"g")," ")},summarizeStringChange:function(t,e){var n,r,i,o;return t=L.UTF16String.box(t),(e=L.UTF16String.box(e)).length<t.length?(o=(r=a(t,e))[0],n=r[1]):(n=(i=a(e,t))[0],o=i[1]),{added:n,removed:o}}}),a=function(t,e){var n,r,i,o,a;return t.isEqualTo(e)?["",""]:(i=(o=(r=s(t,e)).utf16String.length)?(a=r.offset,n=t.codepoints.slice(0,a).concat(t.codepoints.slice(a+o)),s(e,L.UTF16String.fromCodepoints(n))):s(e,t),[r.utf16String.toString(),i.utf16String.toString()])},s=function(t,e){var n,r,i;for(n=0,r=t.length,i=e.length;n<r&&t.charAt(n).isEqualTo(e.charAt(n));)n++;for(;n+1<r&&t.charAt(r-1).isEqualTo(e.charAt(i-1));)r--,i--;return{utf16String:t.slice(n,r),offset:n}}}.call(this),function(){L.extend({copyObject:function(t){var e,n,r;for(e in null==t&&(t={}),n={},t)r=t[e],n[e]=r;return n},objectsAreEqual:function(t,e){var n;if(null==t&&(t={}),null==e&&(e={}),Object.keys(t).length!==Object.keys(e).length)return!1;for(n in t)if(t[n]!==e[n])return!1;return!0}})}.call(this),function(){var i=[].slice;L.extend({arraysAreEqual:function(t,e){var n,r,i;if(null==t&&(t=[]),null==e&&(e=[]),t.length!==e.length)return!1;for(r=n=0,i=t.length;n<i;r=++n)if(t[r]!==e[r])return!1;return!0},arrayStartsWith:function(t,e){return null==t&&(t=[]),null==e&&(e=[]),L.arraysAreEqual(t.slice(0,e.length),e)},spliceArray:function(t){var e,n,r;return n=t,e=2<=arguments.length?i.call(arguments,1):[],(r=n.slice(0)).splice.apply(r,e),r},summarizeArrayChange:function(t,e){var n,r,i,o,a,s,l,u,c,h,d;for(null==t&&(t=[]),null==e&&(e=[]),n=[],h=[],i=new Set,o=0,l=t.length;o<l;o++)d=t[o],i.add(d);for(r=new Set,a=0,u=e.length;a<u;a++)d=e[a],r.add(d),i.has(d)||n.push(d);for(s=0,c=t.length;s<c;s++)d=t[s],r.has(d)||h.push(d);return{added:n,removed:h}}})}.call(this),function(){var t,e,i,n;i=n=e=t=null,L.extend({getAllAttributeNames:function(){return null!=t?t:t=L.getTextAttributeNames().concat(L.getBlockAttributeNames())},getBlockConfig:function(t){return L.config.blockAttributes[t]},getBlockAttributeNames:function(){return null!=e?e:e=Object.keys(L.config.blockAttributes)},getTextConfig:function(t){return L.config.textAttributes[t]},getTextAttributeNames:function(){return null!=n?n:n=Object.keys(L.config.textAttributes)},getListAttributeNames:function(){var n,r;return null!=i?i:i=function(){var t,e;for(n in e=[],t=L.config.blockAttributes)null!=(r=t[n].listAttribute)&&e.push(r);return e}()}})}.call(this),function(){var p,n,t,e,r,i=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};p=document.documentElement,n=null!=(t=null!=(e=null!=(r=p.matchesSelector)?r:p.webkitMatchesSelector)?e:p.msMatchesSelector)?t:p.mozMatchesSelector,L.extend({handleEvent:function(t,e){var n,r,i,o,a,s,l,u,c,h,d;return a=(l=null!=e?e:{}).onElement,o=l.matchingSelector,d=l.withCallback,i=l.inPhase,s=l.preventDefault,c=l.times,n=null!=a?a:p,u=o,d,h="capturing"===i,(r=function(t){var e;return null!=c&&0==--c&&r.destroy(),null!=(e=L.findClosestElementFromNode(t.target,{matchingSelector:u}))&&(null!=d&&d.call(e,t,e),s)?t.preventDefault():void 0}).destroy=function(){return n.removeEventListener(t,r,h)},n.addEventListener(t,r,h),r},handleEventOnce:function(t,e){return null==e&&(e={}),e.times=1,L.handleEvent(t,e)},triggerEvent:function(t,e){var n,r,i,o,a,s,l;return s=(l=null!=e?e:{}).onElement,r=l.bubbles,i=l.cancelable,n=l.attributes,o=null!=s?s:p,r=!1!==r,i=!1!==i,(a=document.createEvent("Events")).initEvent(t,r,i),null!=n&&L.extend.call(a,n),o.dispatchEvent(a)},elementMatchesSelector:function(t,e){return 1===(null!=t?t.nodeType:void 0)?n.call(t,e):void 0},findClosestElementFromNode:function(t,e){var n,r,i;for(n=(r=null!=e?e:{}).matchingSelector,i=r.untilNode;null!=t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;if(null!=t){if(null==n)return t;if(t.closest&&null==i)return t.closest(n);for(;t&&t!==i;){if(L.elementMatchesSelector(t,n))return t;t=t.parentNode}}},findInnerElement:function(t){for(;null!=t?t.firstElementChild:void 0;)t=t.firstElementChild;return t},innerElementIsActive:function(t){return document.activeElement!==t&&L.elementContainsNode(t,document.activeElement)},elementContainsNode:function(t,e){if(t&&e)for(;e;){if(e===t)return!0;e=e.parentNode}},findNodeFromContainerAndOffset:function(t,e){var n;if(t)return t.nodeType===Node.TEXT_NODE?t:0===e?null!=(n=t.firstChild)?n:t:t.childNodes.item(e-1)},findElementFromContainerAndOffset:function(t,e){var n;return n=L.findNodeFromContainerAndOffset(t,e),L.findClosestElementFromNode(n)},findChildIndexOfNode:function(t){var e;if(null!=t?t.parentNode:void 0){for(e=0;t=t.previousSibling;)e++;return e}},walkTree:function(t,e){var n,r,i,o,a;return r=(i=null!=e?e:{}).onlyNodesOfType,o=i.usingFilter,n=i.expandEntityReferences,a=function(){switch(r){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}}(),document.createTreeWalker(t,a,null!=o?o:null,!0===n)},tagName:function(t){var e;return null!=t&&null!=(e=t.tagName)?e.toLowerCase():void 0},makeElement:function(t,e){var n,r,i,o,a,s,l,u,c,h;if(null==e&&(e={}),"object"==typeof t?t=(e=t).tagName:e={attributes:e},r=document.createElement(t),null!=e.editable&&(null==e.attributes&&(e.attributes={}),e.attributes.contenteditable=e.editable),e.attributes)for(o in s=e.attributes)h=s[o],r.setAttribute(o,h);if(e.style)for(o in l=e.style)h=l[o],r.style[o]=h;if(e.data)for(o in u=e.data)h=u[o],r.dataset[o]=h;if(e.className)for(i=0,a=(c=e.className.split(" ")).length;i<a;i++)n=c[i],r.classList.add(n);return e.textContent&&(r.textContent=e.textContent),r},cloneFragment:function(t){var e,n,r,i,o;for(e=document.createDocumentFragment(),n=0,r=(o=t.childNodes).length;n<r;n++)i=o[n],e.appendChild(i.cloneNode(!0));return e},makeFragment:function(t){var e,n,r;for(null==t&&(t=""),(e=document.createElement("div")).innerHTML=t,n=document.createDocumentFragment();r=e.firstChild;)n.appendChild(r);return n},getBlockTagNames:function(){var n,r;return null!=L.blockTagNames?L.blockTagNames:L.blockTagNames=function(){var t,e;for(n in e=[],t=L.config.blockAttributes)r=t[n],e.push(r.tagName);return e}()},nodeIsBlockContainer:function(t){return L.nodeIsBlockStartComment(null!=t?t.firstChild:void 0)},nodeProbablyIsBlockContainer:function(t){var e,n;return e=L.tagName(t),0<=i.call(L.getBlockTagNames(),e)&&(n=L.tagName(t.firstChild),i.call(L.getBlockTagNames(),n)<0)},nodeIsBlockStart:function(t,e){return(null!=e?e:{strict:!0}).strict?L.nodeIsBlockStartComment(t):L.nodeIsBlockStartComment(t)||!L.nodeIsBlockStartComment(t.firstChild)&&L.nodeProbablyIsBlockContainer(t)},nodeIsBlockStartComment:function(t){return L.nodeIsCommentNode(t)&&"block"===(null!=t?t.data:void 0)},nodeIsCommentNode:function(t){return(null!=t?t.nodeType:void 0)===Node.COMMENT_NODE},nodeIsCursorTarget:function(t){return t?L.nodeIsTextNode(t)?t.data===L.ZERO_WIDTH_SPACE:L.nodeIsCursorTarget(t.firstChild):void 0},nodeIsAttachmentElement:function(t){return L.elementMatchesSelector(t,L.AttachmentView.attachmentSelector)},nodeIsEmptyTextNode:function(t){return L.nodeIsTextNode(t)&&""===(null!=t?t.data:void 0)},nodeIsTextNode:function(t){return(null!=t?t.nodeType:void 0)===Node.TEXT_NODE}})}.call(this),function(){var e,n,l,r,u;e=L.copyObject,r=L.objectsAreEqual,L.extend({normalizeRange:l=function(t){var e;if(null!=t)return Array.isArray(t)||(t=[t,t]),[n(t[0]),n(null!=(e=t[1])?e:t[0])]},rangeIsCollapsed:function(t){var e,n,r;if(null!=t)return r=(n=l(t))[0],e=n[1],u(r,e)},rangesAreEqual:function(t,e){var n,r,i,o,a,s;if(null!=t&&null!=e)return r=(i=l(t))[0],n=i[1],s=(o=l(e))[0],a=o[1],u(r,s)&&u(n,a)}}),n=function(t){return"number"==typeof t?t:e(t)},u=function(t,e){return"number"==typeof t?t===e:r(t,e)}}.call(this),function(){var u,n,c,h;u={extendsTagName:"div",css:"%t { display: block; }"},L.registerElement=function(t,e){var n,r,i,o,a,s,l;return null==e&&(e={}),t=t.toLowerCase(),o=null!=(l=(a=h(e)).extendsTagName)?l:u.extendsTagName,delete a.extendsTagName,r=a.defaultCSS,delete a.defaultCSS,null!=r&&o===u.extendsTagName?r+="\n"+u.css:r=u.css,c(r,t),(i=Object.getPrototypeOf(document.createElement(o))).__super__=i,s=Object.create(i,a),n=document.registerElement(t,{prototype:s}),Object.defineProperty(s,"constructor",{value:n}),n},c=function(t,e){return n(e).textContent=t.replace(/%t/g,e)},n=function(t){var e;return(e=document.createElement("style")).setAttribute("type","text/css"),e.setAttribute("data-tag-name",t.toLowerCase()),document.head.insertBefore(e,document.head.firstChild),e},h=function(t){var e,n,r;for(e in n={},t)r=t[e],n[e]="function"==typeof r?{value:r}:r;return n}}.call(this),function(){var n,e;L.extend({getDOMSelection:function(){var t;return 0<(t=window.getSelection()).rangeCount?t:void 0},getDOMRange:function(){var t,e;return(t=null!=(e=L.getDOMSelection())?e.getRangeAt(0):void 0)&&!n(t)?t:void 0},setDOMRange:function(t){var e;return(e=window.getSelection()).removeAllRanges(),e.addRange(t),L.selectionChangeObserver.update()}}),n=function(t){return e(t.startContainer)||e(t.endContainer)},e=function(t){return!Object.getPrototypeOf(t)}}.call(this),function(){}.call(this),function(){var a,l=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;a=L.arraysAreEqual,L.Hash=function(t){function e(t){null==t&&(t={}),this.values=o(t),e.__super__.constructor.apply(this,arguments)}var s,o,n,r,i;return l(e,t),e.fromCommonAttributesOfObjects=function(t){var e,n,r,i,o,a;if(null==t&&(t=[]),!t.length)return new this;for(r=(e=s(t[0])).getKeys(),n=0,i=(a=t.slice(1)).length;n<i;n++)o=a[n],r=e.getKeysCommonToHash(s(o)),e=e.slice(r);return e},e.box=function(t){return s(t)},e.prototype.add=function(t,e){return this.merge(r(t,e))},e.prototype.remove=function(t){return new L.Hash(o(this.values,t))},e.prototype.get=function(t){return this.values[t]},e.prototype.has=function(t){return t in this.values},e.prototype.merge=function(t){return new L.Hash(n(this.values,i(t)))},e.prototype.slice=function(t){var e,n,r,i;for(i={},e=0,r=t.length;e<r;e++)n=t[e],this.has(n)&&(i[n]=this.values[n]);return new L.Hash(i)},e.prototype.getKeys=function(){return Object.keys(this.values)},e.prototype.getKeysCommonToHash=function(t){var e,n,r,i,o;for(t=s(t),o=[],e=0,r=(i=this.getKeys()).length;e<r;e++)n=i[e],this.values[n]===t.values[n]&&o.push(n);return o},e.prototype.isEqualTo=function(t){return a(this.toArray(),s(t).toArray())},e.prototype.isEmpty=function(){return 0===this.getKeys().length},e.prototype.toArray=function(){var e,n,r;return(null!=this.array?this.array:this.array=function(){var t;for(e in n=[],t=this.values)r=t[e],n.push(e,r);return n}.call(this)).slice(0)},e.prototype.toObject=function(){return o(this.values)},e.prototype.toJSON=function(){return this.toObject()},e.prototype.contentsForInspection=function(){return{values:JSON.stringify(this.values)}},r=function(t,e){var n;return(n={})[t]=e,n},n=function(t,e){var n,r,i;for(n in r=o(t),e)i=e[n],r[n]=i;return r},o=function(t,e){var n,r,i,o,a;for(o={},n=0,i=(a=Object.keys(t).sort()).length;n<i;n++)(r=a[n])!==e&&(o[r]=t[r]);return o},s=function(t){return t instanceof L.Hash?t:new L.Hash(t)},i=function(t){return t instanceof L.Hash?t.values:t},e}(L.Object)}.call(this),function(){L.ObjectGroup=function(){function t(t,e){var n,r;this.objects=null!=t?t:[],r=e.depth,(n=e.asTree)&&(this.depth=r,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}return t.groupObjects=function(t,e){var n,r,i,o,a,s,l,u,c;for(null==t&&(t=[]),i=(c=null!=e?e:{}).depth,(n=c.asTree)&&null==i&&(i=0),u=[],a=0,s=t.length;a<s;a++){if(l=t[a],o){if(("function"==typeof l.canBeGrouped?l.canBeGrouped(i):void 0)&&("function"==typeof(r=o[o.length-1]).canBeGroupedWith?r.canBeGroupedWith(l,i):void 0)){o.push(l);continue}u.push(new this(o,{depth:i,asTree:n})),o=null}("function"==typeof l.canBeGrouped?l.canBeGrouped(i):void 0)?o=[l]:u.push(l)}return o&&u.push(new this(o,{depth:i,asTree:n})),u},t.prototype.getObjects=function(){return this.objects},t.prototype.getDepth=function(){return this.depth},t.prototype.getCacheKey=function(){var t,e,n,r,i;for(e=["objectGroup"],t=0,n=(i=this.getObjects()).length;t<n;t++)r=i[t],e.push(r.getCacheKey());return e.join("/")},t}()}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.ObjectMap=function(t){function e(t){var e,n,r,i,o;for(null==t&&(t=[]),this.objects={},r=0,i=t.length;r<i;r++)o=t[r],n=JSON.stringify(o),null==(e=this.objects)[n]&&(e[n]=o)}return n(e,t),e.prototype.find=function(t){var e;return e=JSON.stringify(t),this.objects[e]},e}(L.BasicObject)}.call(this),function(){L.ElementStore=function(){function t(t){this.reset(t)}var r;return t.prototype.add=function(t){var e;return e=r(t),this.elements[e]=t},t.prototype.remove=function(t){var e,n;return e=r(t),(n=this.elements[e])?(delete this.elements[e],n):void 0},t.prototype.reset=function(t){var e,n,r;for(null==t&&(t=[]),this.elements={},n=0,r=t.length;n<r;n++)e=t[n],this.add(e);return t},r=function(t){return t.dataset.trixStoreKey},t}()}.call(this),function(){}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.Operation=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.isPerforming=function(){return!0===this.performing},e.prototype.hasPerformed=function(){return!0===this.performed},e.prototype.hasSucceeded=function(){return this.performed&&this.succeeded},e.prototype.hasFailed=function(){return this.performed&&!this.succeeded},e.prototype.getPromise=function(){return null!=this.promise?this.promise:this.promise=new Promise((i=this,function(n,r){return i.performing=!0,i.perform(function(t,e){return i.succeeded=t,i.performing=!1,i.performed=!0,i.succeeded?n(e):r(e)})}));var i},e.prototype.perform=function(t){return t(!1)},e.prototype.release=function(){var t;return null!=(t=this.promise)&&"function"==typeof t.cancel&&t.cancel(),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null},e.proxyMethod("getPromise().then"),e.proxyMethod("getPromise().catch"),e}(L.BasicObject)}.call(this),function(){var t,e,n,r,i,o=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;L.UTF16String=function(t){function e(t,e){this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}return o(e,t),e.box=function(t){return null==t&&(t=""),t instanceof this?t:this.fromUCS2String(null!=t?t.toString():void 0)},e.fromUCS2String=function(t){return new this(t,r(t))},e.fromCodepoints=function(t){return new this(i(t),t)},e.prototype.offsetToUCS2Offset=function(t){return i(this.codepoints.slice(0,Math.max(0,t))).length},e.prototype.offsetFromUCS2Offset=function(t){return r(this.ucs2String.slice(0,Math.max(0,t))).length},e.prototype.slice=function(){var t;return this.constructor.fromCodepoints((t=this.codepoints).slice.apply(t,arguments))},e.prototype.charAt=function(t){return this.slice(t,t+1)},e.prototype.isEqualTo=function(t){return this.constructor.box(t).ucs2String===this.ucs2String},e.prototype.toJSON=function(){return this.ucs2String},e.prototype.getCacheKey=function(){return this.ucs2String},e.prototype.toString=function(){return this.ucs2String},e}(L.BasicObject),t=1===("function"==typeof Array.from?Array.from("\ud83d\udc7c").length:void 0),e=null!=("function"==typeof" ".codePointAt?" ".codePointAt(0):void 0),n=" \ud83d\udc7c"===("function"==typeof String.fromCodePoint?String.fromCodePoint(32,128124):void 0),r=t&&e?function(t){return Array.from(t).map(function(t){return t.codePointAt(0)})}:function(t){var e,n,r,i,o;for(i=[],e=0,r=t.length;e<r;)55296<=(o=t.charCodeAt(e++))&&o<=56319&&e<r&&(56320==(64512&(n=t.charCodeAt(e++)))?o=((1023&o)<<10)+(1023&n)+65536:e--),i.push(o);return i},i=n?function(t){return String.fromCodePoint.apply(String,t)}:function(r){var i,o;return function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)o=r[t],i="",65535<o&&(o-=65536,i+=String.fromCharCode(o>>>10&1023|55296),o=56320|1023&o),n.push(i+String.fromCharCode(o));return n}().join("")}}.call(this),function(){}.call(this),function(){}.call(this),function(){L.config.lang={bold:"Bold",bullets:"Bullets","byte":"Byte",bytes:"Bytes",captionPlaceholder:"Type a caption here\u2026",captionPrompt:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"}}.call(this),function(){L.config.css={classNames:{attachment:{container:"attachment",typePrefix:"attachment-",caption:"caption",captionEdited:"caption-edited",captionEditor:"caption-editor",editingCaption:"caption-editing",progressBar:"progress",removeButton:"remove icon",size:"size"}}}}.call(this),function(){var e;L.config.blockAttributes=e={"default":{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test:function(t){return L.tagName(t.parentNode)===e[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test:function(t){return L.tagName(t.parentNode)===e[this.listAttribute].tagName}}}}.call(this),function(){var r,i;r=L.config.lang,i=[r.bytes,r.KB,r.MB,r.GB,r.TB,r.PB],L.config.fileSize={prefix:"IEC",precision:2,formatter:function(t){var e,n;switch(t){case 0:return"0 "+r.bytes;case 1:return"1 "+r["byte"];default:return e=function(){switch(this.prefix){case"SI":return 1e3;case"IEC":return 1024}}.call(this),n=Math.floor(Math.log(t)/Math.log(e)),(t/Math.pow(e,n)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"")+" "+i[n]}}}}.call(this),function(){L.config.textAttributes={bold:{tagName:"strong",inheritable:!0,parser:function(t){var e;return"bold"===(e=window.getComputedStyle(t)).fontWeight||600<=e.fontWeight}},italic:{tagName:"em",inheritable:!0,parser:function(t){return"italic"===window.getComputedStyle(t).fontStyle}},href:{groupTagName:"a",parser:function(t){var e,n;return n="a:not("+L.AttachmentView.attachmentSelector+")",(e=L.findClosestElementFromNode(t,{matchingSelector:n}))?e.getAttribute("href"):void 0}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}}}.call(this),function(){var b,w,A,C,x;x="[data-trix-serialize=false]",C=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable"],A="["+(w="data-trix-serialized-attributes")+"]",b=new RegExp("<!--block-->","g"),L.extend({serializers:{"application/json":function(t){var e;if(t instanceof L.Document)e=t;else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");e=L.Document.fromHTML(t.innerHTML)}return e.toSerializableDocument().toJSONString()},"text/html":function(t){var e,n,r,i,o,a,s,l,u,c,h,d,p,f,g,m,v;if(t instanceof L.Document)i=L.DocumentView.render(t);else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");i=t.cloneNode(!0)}for(o=0,u=(f=i.querySelectorAll(x)).length;o<u;o++)(r=f[o]).parentNode.removeChild(r);for(a=0,c=C.length;a<c;a++)for(e=C[a],s=0,h=(g=i.querySelectorAll("["+e+"]")).length;s<h;s++)(r=g[s]).removeAttribute(e);for(l=0,d=(m=i.querySelectorAll(A)).length;l<d;l++){r=m[l];try{for(p in n=JSON.parse(r.getAttribute(w)),r.removeAttribute(w),n)v=n[p],r.setAttribute(p,v)}catch(y){}}return i.innerHTML.replace(b,"")}},deserializers:{"application/json":function(t){return L.Document.fromJSONString(t)},"text/html":function(t){return L.Document.fromHTML(t)}},serializeToContentType:function(t,e){var n;if(n=L.serializers[e])return n(t);throw new Error("unknown content type: "+e)},deserializeFromContentType:function(t,e){var n;if(n=L.deserializers[e])return n(t);throw new Error("unknown content type: "+e)}})}.call(this),function(){var t,e;e=L.makeFragment,t=L.config.lang,L.config.toolbar={content:e('<div class="button_row">\n  <span class="button_group text_tools">\n    <button type="button" class="icon bold" data-trix-attribute="bold" data-trix-key="b" title="'+t.bold+'">'+t.bold+'</button>\n    <button type="button" class="icon italic" data-trix-attribute="italic" data-trix-key="i" title="'+t.italic+'">'+t.italic+'</button>\n    <button type="button" class="icon strike" data-trix-attribute="strike" title="'+t.strike+'">'+t.strike+'</button>\n    <button type="button" class="icon link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="'+t.link+'">'+t.link+'</button>\n  </span>\n\n  <span class="button_group block_tools">\n    <button type="button" class="icon heading-1" data-trix-attribute="heading1" title="'+t.heading1+'">'+t.heading1+'</button>\n    <button type="button" class="icon quote" data-trix-attribute="quote" title="'+t.quote+'">'+t.quote+'</button>\n    <button type="button" class="icon code" data-trix-attribute="code" title="'+t.code+'">'+t.code+'</button>\n    <button type="button" class="icon list bullets" data-trix-attribute="bullet" title="'+t.bullets+'">'+t.bullets+'</button>\n    <button type="button" class="icon list numbers" data-trix-attribute="number" title="'+t.numbers+'">'+t.numbers+'</button>\n    <button type="button" class="icon nesting-level decrease" data-trix-action="decreaseNestingLevel" title="'+t.outdent+'">'+t.outdent+'</button>\n    <button type="button" class="icon nesting-level increase" data-trix-action="increaseNestingLevel" title="'+t.indent+'">'+t.indent+'</button>\n  </span>\n\n  <span class="button_group history_tools">\n    <button type="button" class="icon undo" data-trix-action="undo" data-trix-key="z" title="'+t.undo+'">'+t.undo+'</button>\n    <button type="button" class="icon redo" data-trix-action="redo" data-trix-key="shift+z" title="'+t.redo+'">'+t.redo+'</button>\n  </span>\n</div>\n\n<div class="dialogs">\n  <div class="dialog link_dialog" data-trix-attribute="href" data-trix-dialog="href">\n    <div class="link_url_fields">\n      <input type="url" required name="href" placeholder="'+t.urlPlaceholder+'">\n      <div class="button_group">\n        <input type="button" value="'+t.link+'" data-trix-method="setAttribute">\n        <input type="button" value="'+t.unlink+'" data-trix-method="removeAttribute">\n      </div>\n    </div>\n  </div>\n</div>')}}.call(this),function(){L.config.undoInterval=5e3}.call(this),function(){var t,e;t=L.makeElement,e={cursorTarget:t({tagName:"span",textContent:L.ZERO_WIDTH_SPACE,data:{trixSelection:!0,trixCursorTarget:!0,trixSerialize:!1}})},L.extend({selectionElements:{selector:"[data-trix-selection]",cssText:"font-size: 0 !important;\npadding: 0 !important;\nmargin: 0 !important;\nborder: none !important;\nline-height: 0 !important;",create:function(t){return e[t].cloneNode(!0)}}})}.call(this),function(){}.call(this),function(){var t;t=L.cloneFragment,L.registerElement("trix-toolbar",{defaultCSS:"%t {\n  white-space: collapse;\n}\n\n%t .dialog {\n  display: none;\n}\n\n%t .dialog.active {\n  display: block;\n}\n\n%t .dialog input.validate:invalid {\n  background-color: #ffdddd;\n}\n\n%t[native] {\n  display: none;\n}",createdCallback:function(){return""===this.innerHTML?this.appendChild(t(L.config.toolbar.content)):void 0}})}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};L.ObjectView=function(t){function e(t,e){this.object=t,this.options=null!=e?e:{},this.childViews=[],this.rootView=this}return n(e,t),e.prototype.getNodes=function(){var t,e,n,r,i;for(null==this.nodes&&(this.nodes=this.createNodes()),i=[],t=0,e=(r=this.nodes).length;t<e;t++)n=r[t],i.push(n.cloneNode(!0));return i},e.prototype.invalidate=function(){var t;return(this.nodes=null)!=(t=this.parentView)?t.invalidate():void 0},e.prototype.invalidateViewForObject=function(t){var e;return null!=(e=this.findViewForObject(t))?e.invalidate():void 0},e.prototype.findOrCreateCachedChildView=function(t,e){var n;return(n=this.getCachedViewForObject(e))?this.recordChildView(n):(n=this.createChildView.apply(this,arguments),this.cacheViewForObject(n,e)),n},e.prototype.createChildView=function(t,e,n){var r;return null==n&&(n={}),e instanceof L.ObjectGroup&&(n.viewClass=t,t=L.ObjectGroupView),r=new t(e,n),this.recordChildView(r)},e.prototype.recordChildView=function(t){return t.parentView=this,t.rootView=this.rootView,a.call(this.childViews,t)<0&&this.childViews.push(t),t},e.prototype.getAllChildViews=function(){var t,e,n,r,i;for(i=[],e=0,n=(r=this.childViews).length;e<n;e++)t=r[e],i.push(t),i=i.concat(t.getAllChildViews());return i},e.prototype.findElement=function(){return this.findElementForObject(this.object)},e.prototype.findElementForObject=function(t){var e;return(e=null!=t?t.id:void 0)?this.rootView.element.querySelector("[data-trix-id='"+e+"']"):void 0},e.prototype.findViewForObject=function(t){var e,n,r,i;for(e=0,n=(r=this.getAllChildViews()).length;e<n;e++)if((i=r[e]).object===t)return i},e.prototype.getViewCache=function(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?null!=this.viewCache?this.viewCache:this.viewCache={}:void 0},e.prototype.isViewCachingEnabled=function(){return!1!==this.shouldCacheViews},e.prototype.enableViewCaching=function(){return this.shouldCacheViews=!0},e.prototype.disableViewCaching=function(){return this.shouldCacheViews=!1},e.prototype.getCachedViewForObject=function(t){var e;return null!=(e=this.getViewCache())?e[t.getCacheKey()]:void 0},e.prototype.cacheViewForObject=function(t,e){var n;return null!=(n=this.getViewCache())?n[e.getCacheKey()]=t:void 0},e.prototype.garbageCollectCachedViews=function(){var t,e,n,r,i,o;if(t=this.getViewCache()){for(e in o=this.getAllChildViews().concat(this),n=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)i=o[t],n.push(i.object.getCacheKey());return n}(),r=[],t)a.call(n,e)<0&&r.push(delete t[e]);return r}},e}(L.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.ObjectGroupView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}return n(e,t),e.prototype.getChildViews=function(){var t,e,n,r;if(!this.childViews.length)for(t=0,e=(r=this.objectGroup.getObjects()).length;t<e;t++)n=r[t],this.findOrCreateCachedChildView(this.viewClass,n,this.options);return this.childViews},e.prototype.createNodes=function(){var t,e,n,r,i,o,a,s;for(t=this.createContainerElement(),e=0,r=(a=this.getChildViews()).length;e<r;e++)for(n=0,i=(s=a[e].getNodes()).length;n<i;n++)o=s[n],t.appendChild(o);return[t]},e.prototype.createContainerElement=function(t){return null==t&&(t=this.objectGroup.getDepth()),this.getChildViews()[0].createContainerElement(t)},e}(L.ObjectView)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.Controller=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(L.BasicObject)}.call(this),function(){var o,h,a,d,l,s,u=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty,f=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};o=L.findClosestElementFromNode,a=L.nodeIsEmptyTextNode,h=L.nodeIsBlockStartComment,d=L.normalizeSpaces,l=L.summarizeStringChange,s=L.tagName,L.MutationObserver=function(t){function e(t){this.element=t,this.didMutate=u(this.didMutate,this),this.observer=new window.MutationObserver(this.didMutate),this.start()}var c,n,r,i;return p(e,t),r="["+(n="data-trix-mutable")+"]",i={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},e.prototype.start=function(){return this.reset(),this.observer.observe(this.element,i)},e.prototype.stop=function(){return this.observer.disconnect()},e.prototype.didMutate=function(t){var e,n;return(e=this.mutations).push.apply(e,this.findSignificantMutations(t)),this.mutations.length?(null!=(n=this.delegate)&&"function"==typeof n.elementDidMutate&&n.elementDidMutate(this.getMutationSummary()),this.reset()):void 0},e.prototype.reset=function(){return this.mutations=[]},e.prototype.findSignificantMutations=function(t){var e,n,r,i;for(i=[],e=0,n=t.length;e<n;e++)r=t[e],this.mutationIsSignificant(r)&&i.push(r);return i},e.prototype.mutationIsSignificant=function(t){var e,n,r,i;for(e=0,n=(i=this.nodesModifiedByMutation(t)).length;e<n;e++)if(r=i[e],this.nodeIsSignificant(r))return!0;return!1},e.prototype.nodeIsSignificant=function(t){return t!==this.element&&!this.nodeIsMutable(t)&&!a(t)},e.prototype.nodeIsMutable=function(t){return o(t,{matchingSelector:r})},e.prototype.nodesModifiedByMutation=function(t){var e;switch(e=[],t.type){case"attributes":t.attributeName!==n&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push.apply(e,t.addedNodes),e.push.apply(e,t.removedNodes)}return e},e.prototype.getMutationSummary=function(){return this.getTextMutationSummary()},e.prototype.getTextMutationSummary=function(){var t,e,n,r,i,o,a,s,l,u,c;for(n=(s=this.getTextChangesFromCharacterData()).additions,i=s.deletions,o=0,a=(l=(c=this.getTextChangesFromChildList()).additions).length;o<a;o++)e=l[o],f.call(n,e)<0&&n.push(e);return i.push.apply(i,c.deletions),u={},(t=n.join(""))&&(u.textAdded=t),(r=i.join(""))&&(u.textDeleted=r),u},e.prototype.getMutationsByType=function(t){var e,n,r,i,o;for(o=[],e=0,n=(i=this.mutations).length;e<n;e++)(r=i[e]).type===t&&o.push(r);return o},e.prototype.getTextChangesFromChildList=function(){var t,e,r,n,i,o,a,s,l,u;for(t=[],a=[],e=0,n=(o=this.getMutationsByType("childList")).length;e<n;e++)i=o[e],t.push.apply(t,i.addedNodes),a.push.apply(a,i.removedNodes);return 0===t.length&&1===a.length&&h(a[0])?(l=[],u=["\n"]):(l=c(t),u=c(a)),{additions:function(){var t,e,n;for(n=[],r=t=0,e=l.length;t<e;r=++t)(s=l[r])!==u[r]&&n.push(d(s));return n}(),deletions:function(){var t,e,n;for(n=[],r=t=0,e=u.length;t<e;r=++t)(s=u[r])!==l[r]&&n.push(d(s));return n}()}},e.prototype.getTextChangesFromCharacterData=function(){var t,e,n,r,i,o,a,s;return(e=this.getMutationsByType("characterData")).length&&(s=e[0],n=e[e.length-1],i=d(s.oldValue),r=d(n.target.data),t=(o=l(i,r)).added,a=o.removed),{additions:t?[t]:[],deletions:a?[a]:[]}},c=function(t){var e,n,r,i;for(null==t&&(t=[]),i=[],e=0,n=t.length;e<n;e++)switch(r=t[e],r.nodeType){case Node.TEXT_NODE:i.push(r.data);break;case Node.ELEMENT_NODE:"br"===s(r)?i.push("\n"):i.push.apply(i,c(r.childNodes))}return i},e}(L.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty
;L.FileVerificationOperation=function(t){function e(t){this.file=t}return n(e,t),e.prototype.perform=function(e){var n,r;return(n=new FileReader).onerror=function(){return e(!1)},n.onload=(r=this,function(){n.onerror=null;try{n.abort()}catch(t){}return e(!0,r.file)}),n.readAsArrayBuffer(this.file)},e}(L.Operation)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.CompositionInput=function(t){function e(t){var e;this.inputController=t,e=this.inputController,this.responder=e.responder,this.delegate=e.delegate,this.inputSummary=e.inputSummary,this.data={}}return n(e,t),e.prototype.start=function(t){var e,n;return this.data.start=t,"keypress"===this.inputSummary.eventName&&this.inputSummary.textAdded&&null!=(e=this.responder)&&e.deleteInDirection("left"),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=null!=(n=this.responder)?n.getSelectedRange():void 0},e.prototype.update=function(t){var e;return this.data.update=t,(e=this.selectPlaceholder())?(this.forgetPlaceholder(),this.range=e):void 0},e.prototype.end=function(t){var e,n,r,i;return this.data.end=t,this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0}),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.setSelectedRange(this.range),null!=(r=this.responder)&&r.insertString(this.data.end),null!=(i=this.responder)?i.setSelectedRange(this.range[0]+this.data.end.length):void 0):null!=this.data.start||null!=this.data.update?(this.requestReparse(),this.inputController.reset()):void 0},e.prototype.getEndData=function(){return this.data.end},e.prototype.isEnded=function(){return null!=this.getEndData()},e.prototype.canApplyToDocument=function(){var t,e;return 0===(null!=(t=this.data.start)?t.length:void 0)&&0<(null!=(e=this.data.end)?e.length:void 0)&&null!=this.range},e.proxyMethod("inputController.setInputSummary"),e.proxyMethod("inputController.requestRender"),e.proxyMethod("inputController.requestReparse"),e.proxyMethod("responder?.selectionIsExpanded"),e.proxyMethod("responder?.insertPlaceholder"),e.proxyMethod("responder?.selectPlaceholder"),e.proxyMethod("responder?.forgetPlaceholder"),e}(L.BasicObject)}.call(this),function(){var _,r,D,n,i,c,o,a,s,l,T,u,h=function(t,e){function n(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty,E=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};n=L.handleEvent,s=L.makeElement,i=L.innerElementIsActive,l=L.objectsAreEqual,L.tagName,L.InputController=function(t){function e(t){var e;for(e in this.element=t,this.resetInputSummary(),this.mutationObserver=new L.MutationObserver(this.element),(this.mutationObserver.delegate=this).events)n(e,{onElement:this.element,withCallback:this.handlerFor(e),inPhase:"capturing"})}var S;return h(e,t),S=0,e.keyNames={8:"backspace",9:"tab",13:"return",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},e.prototype.handlerFor=function(e){return n=this,function(t){return n.handleInput(function(){return i(this.element)?void 0:(this.eventName=e,this.events[e].call(this,t))})};var n},e.prototype.setInputSummary=function(t){var e,n;for(e in null==t&&(t={}),this.inputSummary.eventName=this.eventName,t)n=t[e],this.inputSummary[e]=n;return this.inputSummary},e.prototype.resetInputSummary=function(){return this.inputSummary={}},e.prototype.reset=function(){return this.resetInputSummary(),L.selectionChangeObserver.reset()},e.prototype.editorWillSyncDocumentView=function(){return this.mutationObserver.stop()},e.prototype.editorDidSyncDocumentView=function(){return this.mutationObserver.start()},e.prototype.requestRender=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestRender?t.inputControllerDidRequestRender():void 0},e.prototype.requestReparse=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidRequestReparse&&t.inputControllerDidRequestReparse(),this.requestRender()},e.prototype.elementDidMutate=function(t){var e;return this.isComposing()?null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidAllowUnhandledInput?e.inputControllerDidAllowUnhandledInput():void 0:this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})},e.prototype.mutationIsExpected=function(t){var e,n,r,i,o,a,s,l,u;return a=t.textAdded,s=t.textDeleted,!!this.inputSummary.preferDocument||(e=null!=a?a===this.inputSummary.textAdded:!this.inputSummary.textAdded,n=null!=s?this.inputSummary.didDelete:!this.inputSummary.didDelete,u="\n"===s&&!n,!!(((l="\n"===a&&!e)&&!u||u&&!l)&&(i=this.getSelectedRange())&&(r=l?-1:1,null!=(o=this.responder)?o.positionIsBlockBreak(i[1]+r):void 0))||e&&n)},e.prototype.mutationIsSignificant=function(t){var e,n,r;return r=0<Object.keys(t).length,e=""===(null!=(n=this.compositionInput)?n.getEndData():void 0),r||!e},e.prototype.attachFiles=function(r){var i,t,e;return t=function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(new L.FileVerificationOperation(i));return n}(),Promise.all(t).then((e=this,function(n){return e.handleInput(function(){var t,e;return null!=(t=this.delegate)&&t.inputControllerWillAttachFiles(),null!=(e=this.responder)&&e.insertFiles(n),this.requestRender()})}))},e.prototype.events={keydown:function(i){var t,e,n,r,o,a,s,l,u;if(this.isComposing()||this.resetInputSummary(),r=this.constructor.keyNames[i.keyCode]){for(e=this.keys,n=0,a=(l=["ctrl","alt","shift","meta"]).length;n<a;n++)s=l[n],i[s+"Key"]&&("ctrl"===s&&(s="control"),e=null!=e?e[s]:void 0);null!=(null!=e?e[r]:void 0)&&(this.setInputSummary({keyName:r}),L.selectionChangeObserver.reset(),e[r].call(this,i))}return c(i)&&(t=String.fromCharCode(i.keyCode).toLowerCase())&&((o=function(){var t,e,n,r;for(r=[],t=0,e=(n=["alt","shift"]).length;t<e;t++)s=n[t],i[s+"Key"]&&r.push(s);return r}()).push(t),null!=(u=this.delegate)?u.inputControllerDidReceiveKeyboardCommand(o):void 0)?i.preventDefault():void 0},keypress:function(t){var e,n,r;if(null==this.inputSummary.eventName&&(!t.metaKey&&!t.ctrlKey||t.altKey)&&!a(t)&&!o(t))return null===t.which?e=String.fromCharCode(t.keyCode):0!==t.which&&0!==t.charCode&&(e=String.fromCharCode(t.charCode)),null!=e?(null!=(n=this.delegate)&&n.inputControllerWillPerformTyping(),null!=(r=this.responder)&&r.insertString(e),this.setInputSummary({textAdded:e,didDelete:this.selectionIsExpanded()})):void 0},textInput:function(t){var e,n,r,i;return e=t.data,(i=this.inputSummary.textAdded)&&i!==e&&i.toUpperCase()===e?(n=this.getSelectedRange(),this.setSelectedRange([n[0],n[1]+i.length]),null!=(r=this.responder)&&r.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(n)):void 0},dragenter:function(t){return t.preventDefault()},dragstart:function(t){var e;return t.target,this.serializeSelectionToDataTransfer(t.dataTransfer),this.draggedRange=this.getSelectedRange(),null!=(e=this.delegate)&&"function"==typeof e.inputControllerDidStartDrag?e.inputControllerDidStartDrag():void 0},dragover:function(t){var e,n;return!this.draggedRange&&!this.canAcceptDataTransfer(t.dataTransfer)||(t.preventDefault(),e={x:t.clientX,y:t.clientY},l(e,this.draggingPoint))?void 0:(this.draggingPoint=e,null!=(n=this.delegate)&&"function"==typeof n.inputControllerDidReceiveDragOverPoint?n.inputControllerDidReceiveDragOverPoint(this.draggingPoint):void 0)},dragend:function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.inputControllerDidCancelDrag&&t.inputControllerDidCancelDrag(),this.draggedRange=null,this.draggingPoint=null},drop:function(t){var e,n,r,i,o,a,s,l,u;return t.preventDefault(),r=null!=(o=t.dataTransfer)?o.files:void 0,i={x:t.clientX,y:t.clientY},null!=(a=this.responder)&&a.setLocationRangeFromPointRange(i),(null!=r?r.length:void 0)?this.attachFiles(r):this.draggedRange?(null!=(s=this.delegate)&&s.inputControllerWillMoveText(),null!=(l=this.responder)&&l.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()):(n=t.dataTransfer.getData("application/x-trix-document"))&&(e=L.Document.fromJSONString(n),null!=(u=this.responder)&&u.insertDocument(e),this.requestRender()),this.draggedRange=null,this.draggingPoint=null},cut:function(t){var e;return this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillCutText(),this.deleteInDirection("backward"),t.defaultPrevented?this.requestRender():void 0},copy:function(t){return this.serializeSelectionToDataTransfer(t.clipboardData)?t.preventDefault():void 0},paste:function(t){var e,n,r,i,o,a,s,l,u,c,h,d,p,f,g,m,v,y,b,w,A,C,x;return o=null!=(s=t.clipboardData)?s:t.testClipboardData,a={paste:o},null==o||T(t)?void this.getPastedHTMLUsingHiddenElement((x=this,function(t){var e,n,r;return a.html=t,null!=(e=x.delegate)&&e.inputControllerWillPasteText(a),null!=(n=x.responder)&&n.insertHTML(t),x.requestRender(),null!=(r=x.delegate)?r.inputControllerDidPaste(a):void 0})):((r=o.getData("URL"))?(C=o.getData("public.url-name")||r,a.string=C,this.setInputSummary({textAdded:C,didDelete:this.selectionIsExpanded()}),null!=(l=this.delegate)&&l.inputControllerWillPasteText(a),null!=(f=this.responder)&&f.insertText(L.Text.textForStringWithAttributes(C,{href:r})),this.requestRender(),null!=(g=this.delegate)&&g.inputControllerDidPaste(a)):_(o)?(C=o.getData("text/plain"),a.string=C,this.setInputSummary({textAdded:C,didDelete:this.selectionIsExpanded()}),null!=(m=this.delegate)&&m.inputControllerWillPasteText(a),null!=(v=this.responder)&&v.insertString(C),this.requestRender(),null!=(y=this.delegate)&&y.inputControllerDidPaste(a)):(i=o.getData("text/html"))?(a.html=i,null!=(b=this.delegate)&&b.inputControllerWillPasteText(a),null!=(w=this.responder)&&w.insertHTML(i),this.requestRender(),null!=(A=this.delegate)&&A.inputControllerDidPaste(a)):0<=E.call(o.types,"Files")&&(n=null!=(u=o.items)&&null!=(c=u[0])&&"function"==typeof c.getAsFile?c.getAsFile():void 0)&&(!n.name&&(e=D(n))&&(n.name="pasted-file-"+ ++S+"."+e),a.file=n,null!=(h=this.delegate)&&h.inputControllerWillAttachFiles(),null!=(d=this.responder)&&d.insertFile(n),this.requestRender(),null!=(p=this.delegate)&&p.inputControllerDidPaste(a)),t.preventDefault())},compositionstart:function(t){return this.getCompositionInput().start(t.data)},compositionupdate:function(t){return this.getCompositionInput().update(t.data)},compositionend:function(t){return this.getCompositionInput().end(t.data)},input:function(t){return t.stopPropagation()}},e.prototype.keys={backspace:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},"delete":function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},"return":function(){var t,e;return this.setInputSummary({preferDocument:!0}),null!=(t=this.delegate)&&t.inputControllerWillPerformTyping(),null!=(e=this.responder)?e.insertLineBreak():void 0},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canIncreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.increaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("backward"):void 0):void 0},right:function(t){var e;return this.selectionIsInCursorTarget()?(t.preventDefault(),null!=(e=this.responder)?e.moveCursorInDirection("forward"):void 0):void 0},control:{d:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},h:function(t){var e;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},o:function(t){var e,n;return t.preventDefault(),null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n",{updatePosition:!1}),this.requestRender()}},shift:{"return":function(t){var e,n;return null!=(e=this.delegate)&&e.inputControllerWillPerformTyping(),null!=(n=this.responder)&&n.insertString("\n"),this.requestRender(),t.preventDefault()},tab:function(t){var e,n;return(null!=(e=this.responder)?e.canDecreaseNestingLevel():void 0)?(null!=(n=this.responder)&&n.decreaseNestingLevel(),this.requestRender(),t.preventDefault()):void 0},left:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("backward")):void 0},right:function(t){return this.selectionIsInCursorTarget()?(t.preventDefault(),this.expandSelectionInDirection("forward")):void 0}},alt:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}},meta:{backspace:function(){var t;return this.setInputSummary({preferDocument:!1}),null!=(t=this.delegate)?t.inputControllerWillPerformTyping():void 0}}},e.prototype.handleInput=function(t){var e,n;try{return null!=(e=this.delegate)&&e.inputControllerWillHandleInput(),t.call(this)}finally{null!=(n=this.delegate)&&n.inputControllerDidHandleInput()}},e.prototype.getCompositionInput=function(){return this.isComposing()?this.compositionInput:this.compositionInput=new L.CompositionInput(this)},e.prototype.isComposing=function(){return null!=this.compositionInput&&!this.compositionInput.isEnded()},e.prototype.deleteInDirection=function(t,e){var n;return!1!==(null!=(n=this.responder)?n.deleteInDirection(t):void 0)?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0},e.prototype.serializeSelectionToDataTransfer=function(t){var e,n;if(r(t))return e=null!=(n=this.responder)?n.getSelectedDocument().toSerializableDocument():void 0,t.setData("application/x-trix-document",JSON.stringify(e)),t.setData("text/html",L.DocumentView.render(e).innerHTML),t.setData("text/plain",e.toString().replace(/\n$/,"")),!0},e.prototype.canAcceptDataTransfer=function(t){var e,n,r,i,o;for(o={},e=0,n=(i=null!=(r=null!=t?t.types:void 0)?r:[]).length;e<n;e++)o[i[e]]=!0;return o.Files||o["application/x-trix-document"]||o["text/html"]||o["text/plain"]},e.prototype.getPastedHTMLUsingHiddenElement=function(e){var n,r,t,i;return r=this.getSelectedRange(),t={position:"absolute",left:window.pageXOffset+"px",top:window.pageYOffset+"px",opacity:0},n=s({style:t,tagName:"div",editable:!0}),document.body.appendChild(n),n.focus(),requestAnimationFrame((i=this,function(){var t;return t=n.innerHTML,document.body.removeChild(n),i.setSelectedRange(r),e(t)}))},e.proxyMethod("responder?.getSelectedRange"),e.proxyMethod("responder?.setSelectedRange"),e.proxyMethod("responder?.expandSelectionInDirection"),e.proxyMethod("responder?.selectionIsInCursorTarget"),e.proxyMethod("responder?.selectionIsExpanded"),e}(L.BasicObject),D=function(t){var e,n;return null!=(e=t.type)&&null!=(n=e.match(/\/(\w+)$/))?n[1]:void 0},a=function(t){return t.metaKey&&t.altKey&&!t.shiftKey&&94===t.keyCode},o=function(t){return t.metaKey&&t.altKey&&t.shiftKey&&9674===t.keyCode},c=function(t){return/Mac|^iP/.test(navigator.platform)?t.metaKey:t.ctrlKey},T=function(t){var e,n;return(n=null!=(e=t.clipboardData)?e.types:void 0)?E.call(n,"text/html")<0&&(0<=E.call(n,"com.apple.webarchive")||0<=E.call(n,"com.apple.flat-rtfd")):void 0},_=function(t){var e,n,r;return r=t.getData("text/plain"),n=t.getData("text/html"),r&&n?((e=s("div")).innerHTML=n,e.textContent===r?!e.querySelector(":not(meta)"):void 0):null!=r?r.length:void 0},u={"application/x-trix-feature-detection":"test"},r=function(t){var e,n;if(null!=(null!=t?t.setData:void 0)){for(e in u)if(n=u[e],t.setData(e,n),t.getData(e)!==n)return;return!0}}}.call(this),function(){var o,a,r,s,l,i,u=function(t,e){return function(){return t.apply(e,arguments)}},c=function(t,e){function n(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty;a=L.handleEvent,l=L.makeElement,i=L.tagName,r=L.InputController.keyNames,s=L.config.lang,o=L.config.css.classNames,L.AttachmentEditorController=function(t){function e(t,e,n){this.attachmentPiece=t,this.element=e,this.container=n,this.uninstall=u(this.uninstall,this),this.didKeyDownCaption=u(this.didKeyDownCaption,this),this.didChangeCaption=u(this.didChangeCaption,this),this.didClickCaption=u(this.didClickCaption,this),this.didClickRemoveButton=u(this.didClickRemoveButton,this),this.attachment=this.attachmentPiece.attachment,"a"===i(this.element)&&(this.element=this.element.firstChild),this.install()}var n;return c(e,t),n=function(e){return function(){var t;return(t=e.apply(this,arguments))["do"](),null==this.undos&&(this.undos=[]),this.undos.push(t.undo)}},e.prototype.install=function(){return this.makeElementMutable(),this.attachment.isPreviewable()&&this.makeCaptionEditable(),this.addRemoveButton()},e.prototype.makeElementMutable=n(function(){return{"do":(e=this,function(){return e.element.dataset.trixMutable=!0}),undo:(t=this,function(){return delete t.element.dataset.trixMutable})};var t,e}),e.prototype.makeCaptionEditable=n(function(){var t,e,n;return t=this.element.querySelector("figcaption"),e=null,{"do":(n=this,function(){return e=a("click",{onElement:t,withCallback:n.didClickCaption,inPhase:"capturing"})}),undo:function(){return e.destroy()}}}),e.prototype.addRemoveButton=n(function(){var t,e,n;return t=l({tagName:"button",textContent:s.remove,className:o.attachment.removeButton,attributes:{type:"button",title:s.remove},data:{trixMutable:!0}}),a("click",{onElement:t,withCallback:this.didClickRemoveButton}),{"do":(n=this,function(){return n.element.appendChild(t)}),undo:(e=this,function(){return e.element.removeChild(t)})}}),e.prototype.editCaption=n(function(){var t,e,n,r,i;return(r=l({tagName:"textarea",className:o.attachment.captionEditor,attributes:{placeholder:s.captionPlaceholder}})).value=this.attachmentPiece.getCaption(),(i=r.cloneNode()).classList.add("trix-autoresize-clone"),t=function(){return i.value=r.value,r.style.height=i.scrollHeight+"px"},a("input",{onElement:r,withCallback:t}),a("keydown",{onElement:r,withCallback:this.didKeyDownCaption}),a("change",{onElement:r,withCallback:this.didChangeCaption}),a("blur",{onElement:r,withCallback:this.uninstall}),n=this.element.querySelector("figcaption"),e=n.cloneNode(),{"do":function(){return n.style.display="none",e.appendChild(r),e.appendChild(i),e.classList.add(o.attachment.editingCaption),n.parentElement.insertBefore(e,n),t(),r.focus()},undo:function(){return e.parentNode.removeChild(e),n.style.display=null}}}),e.prototype.didClickRemoveButton=function(t){var e;return t.preventDefault(),t.stopPropagation(),null!=(e=this.delegate)?e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment):void 0},e.prototype.didClickCaption=function(t){return t.preventDefault(),this.editCaption()},e.prototype.didChangeCaption=function(t){var e,n,r;return(e=t.target.value.replace(/\s/g," ").trim())?null!=(n=this.delegate)&&"function"==typeof n.attachmentEditorDidRequestUpdatingAttributesForAttachment?n.attachmentEditorDidRequestUpdatingAttributesForAttachment({caption:e},this.attachment):void 0:null!=(r=this.delegate)&&"function"==typeof r.attachmentEditorDidRequestRemovingAttributeForAttachment?r.attachmentEditorDidRequestRemovingAttributeForAttachment("caption",this.attachment):void 0},e.prototype.didKeyDownCaption=function(t){var e;return"return"===r[t.keyCode]?(t.preventDefault(),this.didChangeCaption(t),null!=(e=this.delegate)&&"function"==typeof e.attachmentEditorDidRequestDeselectingAttachment?e.attachmentEditorDidRequestDeselectingAttachment(this.attachment):void 0):void 0},e.prototype.uninstall=function(){for(var t,e;e=this.undos.pop();)e();return null!=(t=this.delegate)?t.didUninstallAttachmentEditor(this):void 0},e}(L.BasicObject)}.call(this),function(){var h,n,d,p,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;d=L.makeElement,p=L.selectionElements,h=L.config.css.classNames,L.AttachmentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.attachment=this.object,(this.attachment.uploadProgressDelegate=this).attachmentPiece=this.options.piece}return r(e,t),e.attachmentSelector="[data-trix-attachment]",e.prototype.createContentNodes=function(){return[]},e.prototype.createNodes=function(){var t,e,n,r,i,o,a,s,l,u,c;if(r=d({tagName:"figure",className:this.getClassName()}),this.attachment.hasContent())r.innerHTML=this.attachment.getContent();else for(o=0,s=(u=this.createContentNodes()).length;o<s;o++)l=u[o],r.appendChild(l);for(a in r.appendChild(this.createCaptionElement()),e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},(t=this.attachmentPiece.getAttributesForAttachment()).isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(this.progressElement=d({tagName:"progress",attributes:{"class":h.attachment.progressBar,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),r.appendChild(this.progressElement),e.trixSerialize=!1),(i=this.getHref())?(n=d("a",{href:i})).appendChild(r):n=r,e)c=e[a],n.dataset[a]=c;return n.setAttribute("contenteditable",!1),[p.create("cursorTarget"),n,p.create("cursorTarget")]},e.prototype.createCaptionElement=function(){var t,e,n,r,i;return e=d({tagName:"figcaption",className:h.attachment.caption}),(t=this.attachmentPiece.getCaption())?(e.classList.add(h.attachment.captionEdited),e.textContent=t):(n=this.attachment.getFilename())&&(e.textContent=n,(r=this.attachment.getFormattedFilesize())&&(e.appendChild(document.createTextNode(" ")),i=d({tagName:"span",className:h.attachment.size,textContent:r}),e.appendChild(i))),e},e.prototype.getClassName=function(){var t,e;return e=[h.attachment.container,""+h.attachment.typePrefix+this.attachment.getType()],(t=this.attachment.getExtension())&&e.push(t),e.join(" ")},e.prototype.getHref=function(){return n(this.attachment.getContent(),"a")?void 0:this.attachment.getHref()},e.prototype.findProgressElement=function(){var t;return null!=(t=this.findElement())?t.querySelector("progress"):void 0},e.prototype.attachmentDidChangeUploadProgress=function(){var t,e;return e=this.attachment.getUploadProgress(),null!=(t=this.findProgressElement())?t.value=e:void 0},e}(L.ObjectView),n=function(t,e){var n;return(n=d("div")).innerHTML=null!=t?t:"",n.querySelector(e)}}.call(this),function(){var n,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=L.makeElement,L.PreviewableAttachmentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.attachment.previewDelegate=this}return r(e,t),e.prototype.createContentNodes=function(){return this.image=n({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]},e.prototype.refresh=function(t){var e;return null==t&&(t=null!=(e=this.findElement())?e.querySelector("img"):void 0),t?this.updateAttributesForImage(t):void 0},e.prototype.updateAttributesForImage=function(t){var e,n,r,i,o,a;return o=this.attachment.getURL(),n=this.attachment.getPreviewURL(),t.src=n||o,n===o?t.removeAttribute("data-trix-serialized-attributes"):(r=JSON.stringify({src:o}),t.setAttribute("data-trix-serialized-attributes",r)),a=this.attachment.getWidth(),e=this.attachment.getHeight(),null!=a&&(t.width=a),null!=e&&(t.height=e),i=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/"),t.dataset.trixStoreKey=i},e.prototype.attachmentDidChangePreviewURL=function(){return this.refresh(this.image),this.refresh()},e}(L.AttachmentView)}.call(this),function(){var a,l,u,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;u=L.makeElement,a=L.findInnerElement,l=L.getTextConfig,L.PieceView=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),t=this.options,this.textConfig=t.textConfig,this.context=t.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}var n;return r(e,t),e.prototype.createNodes=function(){var t,e,n,r,i,o;if(o=this.attachment?this.createAttachmentNodes():this.createStringNodes(),t=this.createElement()){for(n=a(t),e=0,r=o.length;e<r;e++)i=o[e],n.appendChild(i);o=[t]}return o},e.prototype.createAttachmentNodes=function(){var t;return t=this.attachment.isPreviewable()?L.PreviewableAttachmentView:L.AttachmentView,this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()},e.prototype.createStringNodes=function(){var t,e,n,r,i,o,a,s,l;if(null!=(a=this.textConfig)?a.plaintext:void 0)return[document.createTextNode(this.string)];for(o=[],n=e=0,r=(s=this.string.split("\n")).length;e<r;n=++e)l=s[n],0<n&&(t=u("br"),o.push(t)),l.length&&(i=document.createTextNode(this.preserveSpaces(l)),o.push(i));return o},e.prototype.createElement=function(){var t,e,n,r,i,o,a,s;for(r in this.attributes)if((t=l(r))&&(t.tagName&&(i=u(t.tagName),n?(n.appendChild(i),n=i):e=n=i),t.style))if(a)for(r in o=t.style)s=o[r],a[r]=s;else a=t.style;if(a)for(r in null==e&&(e=u("span")),a)s=a[r],e.style[r]=s;return e},e.prototype.createContainerElement=function(){var t,e,n,r,i;for(n in r=this.attributes)if(i=r[n],(e=l(n))&&e.groupTagName)return(t={})[n]=i,u(e.groupTagName,t)},n=L.NON_BREAKING_SPACE,e.prototype.preserveSpaces=function(t){return this.context.isLast&&(t=t.replace(/\ $/,n)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 "+n+" $2").replace(/\ {2}/g,n+" ").replace(/\ {2}/g," "+n),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,n)),t},e}(L.ObjectView)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.TextView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.text=this.object,this.textConfig=this.options.textConfig}var c;return n(e,t),e.prototype.createNodes=function(){var t,e,n,r,i,o,a,s,l,u;for(o=[],r=(s=L.ObjectGroup.groupObjects(this.getPieces())).length-1,n=e=0,i=s.length;e<i;n=++e)a=s[n],t={},0===n&&(t.isFirst=!0),n===r&&(t.isLast=!0),c(l)&&(t.followsWhitespace=!0),u=this.findOrCreateCachedChildView(L.PieceView,a,{textConfig:this.textConfig,context:t}),o.push.apply(o,u.getNodes()),l=a;return o},e.prototype.getPieces=function(){var t,e,n,r,i;for(i=[],t=0,e=(r=this.text.getPieces()).length;t<e;t++)(n=r[t]).hasAttribute("blockBreak")||i.push(n);return i},c=function(t){return/\s$/.test(null!=t?t.toString():void 0)},e}(L.ObjectView)}.call(this),function(){var l,u,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;u=L.makeElement,l=L.getBlockConfig,L.BlockView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.block=this.object,this.attributes=this.block.getAttributes()}return n(e,t),e.prototype.createNodes=function(){var t,e,n,r,i,o,a,s;if(i=[document.createComment("block")],this.block.isEmpty()?i.push(u("br")):(a=null!=(o=l(this.block.getLastAttribute()))?o.text:void 0,s=this.findOrCreateCachedChildView(L.TextView,this.block.text,{textConfig:a}),i.push.apply(i,s.getNodes()),this.shouldAddExtraNewlineElement()&&i.push(u("br"))),this.attributes.length)return i;for(t=u(L.config.blockAttributes["default"].tagName),e=0,n=i.length;e<n;e++)r=i[e],t.appendChild(r);return[t]},e.prototype.createContainerElement=function(t){var e,n;return e=this.attributes[t],n=l(e),u(n.tagName)},e.prototype.shouldAddExtraNewlineElement=function(){return/\n\n$/.test(this.block.toString())},e}(L.ObjectView)}.call(this),function(){var i,s,o=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=L.defer,s=L.makeElement,L.DocumentView=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.element=this.options.element,this.elementStore=new L.ElementStore,this.setDocument(this.object)}var n,c,r;return o(e,t),e.render=function(t){var e,n;return(n=new this(t,{element:e=s("div")})).render(),n.sync(),e},e.prototype.setDocument=function(t){return t.isEqualTo(this.document)?void 0:this.document=this.object=t},e.prototype.render=function(){var t,e,i,n,r,o,a;if(this.childViews=[],this.shadowElement=s("div"),!this.document.isEmpty()){for(o=[],t=0,e=(r=L.ObjectGroup.groupObjects(this.document.getBlocks(),{asTree:!0})).length;t<e;t++)n=r[t],a=this.findOrCreateCachedChildView(L.BlockView,n),o.push(function(){var t,e,n,r;for(r=[],t=0,e=(n=a.getNodes()).length;t<e;t++)i=n[t],r.push(this.shadowElement.appendChild(i));return r}.call(this));return o}},e.prototype.isSynced=function(){return n(this.shadowElement,this.element)},e.prototype.sync=function(){var t;for(t=this.createDocumentFragmentForSync();this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()},e.prototype.didSync=function(){return this.elementStore.reset(c(this.element)),i((t=this,function(){return t.garbageCollectCachedViews()}));var t},e.prototype.createDocumentFragmentForSync=function(){var t,e,n,r,i,o,a,s,l,u;for(e=document.createDocumentFragment(),n=0,i=(s=this.shadowElement.childNodes).length;n<i;n++)a=s[n],e.appendChild(a.cloneNode(!0));for(r=0,o=(l=c(e)).length;r<o;r++)t=l[r],(u=this.elementStore.remove(t))&&t.parentNode.replaceChild(u,t);return e},c=function(t){return t.querySelectorAll("[data-trix-store-key]")},n=function(t,e){return r(t.innerHTML)===r(e.innerHTML)},r=function(t){return t.replace(/&nbsp;/g," ")},e}(L.ObjectView)}.call(this),function(){var n,r,i,o,a=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;i=L.handleEvent,o=L.innerElementIsActive,r=L.defer,n=L.AttachmentView.attachmentSelector,L.CompositionController=function(t){function e(t,e){this.element=t,this.composition=e,this.didClickAttachment=a(this.didClickAttachment,this),this.didBlur=a(this.didBlur,this),this.didFocus=a(this.didFocus,this),this.documentView=new L.DocumentView(this.composition.document,{element:this.element}),i("focus",{onElement:this.element,withCallback:this.didFocus}),i("blur",{onElement:this.element,withCallback:this.didBlur}),i("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),i("mousedown",{onElement:this.element,matchingSelector:n,withCallback:this.didClickAttachment}),i("click",{onElement:this.element,matchingSelector:"a"+n,preventDefault:!0})}return s(e,t),e.prototype.didFocus=function(){var t,e,n,r;return t=function(){var t;return r.focused?void 0:(r.focused=!0,null!=(t=r.delegate)&&"function"==typeof t.compositionControllerDidFocus?t.compositionControllerDidFocus():void 0)},null!=(e=null!=(n=(r=this).blurPromise)?n.then(t):void 0)?e:t()},e.prototype.didBlur=function(){return this.blurPromise=new Promise((n=this,function(e){return r(function(){var t;return o(n.element)||(n.focused=null)!=(t=n.delegate)&&"function"==typeof t.compositionControllerDidBlur&&t.compositionControllerDidBlur(),n.blurPromise=null,e()})}));var n},e.prototype.didClickAttachment=function(t,e){var n,r;return n=this.findAttachmentForElement(e),null!=(r=this.delegate)&&"function"==typeof r.compositionControllerDidSelectAttachment?r.compositionControllerDidSelectAttachment(n):void 0},e.prototype.render=function(){var t,e,n;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.documentView.isSynced()||(null!=(t=this.delegate)&&"function"==typeof t.compositionControllerWillSyncDocumentView&&t.compositionControllerWillSyncDocumentView(),this.documentView.sync(),
this.reinstallAttachmentEditor(),null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidSyncDocumentView&&e.compositionControllerDidSyncDocumentView()),null!=(n=this.delegate)&&"function"==typeof n.compositionControllerDidRender?n.compositionControllerDidRender():void 0},e.prototype.rerenderViewForObject=function(t){return this.invalidateViewForObject(t),this.render()},e.prototype.invalidateViewForObject=function(t){return this.documentView.invalidateViewForObject(t)},e.prototype.isViewCachingEnabled=function(){return this.documentView.isViewCachingEnabled()},e.prototype.enableViewCaching=function(){return this.documentView.enableViewCaching()},e.prototype.disableViewCaching=function(){return this.documentView.disableViewCaching()},e.prototype.refreshViewCache=function(){return this.documentView.garbageCollectCachedViews()},e.prototype.installAttachmentEditorForAttachment=function(t){var e,n,r;if((null!=(r=this.attachmentEditor)?r.attachment:void 0)!==t&&(n=this.documentView.findElementForObject(t)))return this.uninstallAttachmentEditor(),e=this.composition.document.getAttachmentPieceForAttachment(t),this.attachmentEditor=new L.AttachmentEditorController(e,n,this.element),this.attachmentEditor.delegate=this},e.prototype.uninstallAttachmentEditor=function(){var t;return null!=(t=this.attachmentEditor)?t.uninstall():void 0},e.prototype.reinstallAttachmentEditor=function(){var t;return this.attachmentEditor?(t=this.attachmentEditor.attachment,this.uninstallAttachmentEditor(),this.installAttachmentEditorForAttachment(t)):void 0},e.prototype.editAttachmentCaption=function(){var t;return null!=(t=this.attachmentEditor)?t.editCaption():void 0},e.prototype.didUninstallAttachmentEditor=function(){return this.attachmentEditor=null,this.render()},e.prototype.attachmentEditorDidRequestUpdatingAttributesForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.updateAttributesForAttachment(t,e)},e.prototype.attachmentEditorDidRequestRemovingAttributeForAttachment=function(t,e){var n;return null!=(n=this.delegate)&&"function"==typeof n.compositionControllerWillUpdateAttachment&&n.compositionControllerWillUpdateAttachment(e),this.composition.removeAttributeForAttachment(t,e)},e.prototype.attachmentEditorDidRequestRemovalOfAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestRemovalOfAttachment?e.compositionControllerDidRequestRemovalOfAttachment(t):void 0},e.prototype.attachmentEditorDidRequestDeselectingAttachment=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionControllerDidRequestDeselectingAttachment?e.compositionControllerDidRequestDeselectingAttachment(t):void 0},e.prototype.findAttachmentForElement=function(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))},e}(L.BasicObject)}.call(this),function(){var p,f,g,m=function(t,e){return function(){return t.apply(e,arguments)}},v=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;f=L.handleEvent,g=L.triggerEvent,p=L.findClosestElementFromNode,L.ToolbarController=function(t){function e(t){this.element=t,this.didKeyDownDialogInput=m(this.didKeyDownDialogInput,this),this.didClickDialogButton=m(this.didClickDialogButton,this),this.didClickAttributeButton=m(this.didClickAttributeButton,this),this.didClickActionButton=m(this.didClickActionButton,this),this.attributes={},this.actions={},this.resetDialogInputs(),f("mousedown",{onElement:this.element,matchingSelector:a,withCallback:this.didClickActionButton}),f("mousedown",{onElement:this.element,matchingSelector:s,withCallback:this.didClickAttributeButton}),f("click",{onElement:this.element,matchingSelector:d,preventDefault:!0}),f("click",{onElement:this.element,matchingSelector:r,withCallback:this.didClickDialogButton}),f("keydown",{onElement:this.element,matchingSelector:o,withCallback:this.didKeyDownDialogInput})}var a,n,s,r,o,i,l,c,u,h,d;return v(e,t),d=[a="button[data-trix-action]",s="button[data-trix-attribute]"].join(", "),n=(i=".dialog[data-trix-dialog]")+".active",r=i+" input[data-trix-method]",o=i+" input[type=text], "+i+" input[type=url]",e.prototype.didClickActionButton=function(t,e){var n,r,i;return null!=(r=this.delegate)&&r.toolbarDidClickButton(),t.preventDefault(),n=l(e),this.getDialog(n)?this.toggleDialog(n):null!=(i=this.delegate)?i.toolbarDidInvokeAction(n):void 0},e.prototype.didClickAttributeButton=function(t,e){var n,r,i;return null!=(r=this.delegate)&&r.toolbarDidClickButton(),t.preventDefault(),n=c(e),this.getDialog(n)?this.toggleDialog(n):null!=(i=this.delegate)&&i.toolbarDidToggleAttribute(n),this.refreshAttributeButtons()},e.prototype.didClickDialogButton=function(t,e){var n;return n=p(e,{matchingSelector:i}),this[e.getAttribute("data-trix-method")].call(this,n)},e.prototype.didKeyDownDialogInput=function(t,e){var n,r;return 13===t.keyCode&&(t.preventDefault(),n=e.getAttribute("name"),r=this.getDialog(n),this.setAttribute(r)),27===t.keyCode?(t.preventDefault(),this.hideDialog()):void 0},e.prototype.updateActions=function(t){return this.actions=t,this.refreshActionButtons()},e.prototype.refreshActionButtons=function(){return this.eachActionButton((n=this,function(t,e){return t.disabled=!1===n.actions[e]}));var n},e.prototype.eachActionButton=function(t){var e,n,r,i,o;for(o=[],n=0,r=(i=this.element.querySelectorAll(a)).length;n<r;n++)e=i[n],o.push(t(e,l(e)));return o},e.prototype.updateAttributes=function(t){return this.attributes=t,this.refreshAttributeButtons()},e.prototype.refreshAttributeButtons=function(){return this.eachAttributeButton((n=this,function(t,e){return t.disabled=!1===n.attributes[e],n.attributes[e]||n.dialogIsVisible(e)?t.classList.add("active"):t.classList.remove("active")}));var n},e.prototype.eachAttributeButton=function(t){var e,n,r,i,o;for(o=[],n=0,r=(i=this.element.querySelectorAll(s)).length;n<r;n++)e=i[n],o.push(t(e,c(e)));return o},e.prototype.applyKeyboardCommand=function(t){var e,n,r,i,o,a;for(i=JSON.stringify(t.sort()),r=0,o=(a=this.element.querySelectorAll("[data-trix-key]")).length;r<o;r++)if(n=(e=a[r]).getAttribute("data-trix-key").split("+"),JSON.stringify(n.sort())===i)return g("mousedown",{onElement:e}),!0;return!1},e.prototype.dialogIsVisible=function(t){var e;return(e=this.getDialog(t))?e.classList.contains("active"):void 0},e.prototype.toggleDialog=function(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)},e.prototype.showDialog=function(t){var e,n,r,i,o,a,s,l,u;for(this.hideDialog(),null!=(a=this.delegate)&&a.toolbarWillShowDialog(),(n=this.getDialog(t)).classList.add("active"),r=0,o=(s=n.querySelectorAll("input[disabled]")).length;r<o;r++)s[r].removeAttribute("disabled");return(e=c(n))&&(i=h(n,t))&&(i.value=null!=(l=this.attributes[e])?l:"",i.select()),null!=(u=this.delegate)?u.toolbarDidShowDialog(t):void 0},e.prototype.setAttribute=function(t){var e,n,r;return e=c(t),(n=h(t,e)).willValidate&&!n.checkValidity()?(n.classList.add("validate"),n.focus()):(null!=(r=this.delegate)&&r.toolbarDidUpdateAttribute(e,n.value),this.hideDialog())},e.prototype.removeAttribute=function(t){var e,n;return e=c(t),null!=(n=this.delegate)&&n.toolbarDidRemoveAttribute(e),this.hideDialog()},e.prototype.hideDialog=function(){var t,e;return(t=this.element.querySelector(n))?(t.classList.remove("active"),this.resetDialogInputs(),null!=(e=this.delegate)?e.toolbarDidHideDialog(u(t)):void 0):void 0},e.prototype.resetDialogInputs=function(){var t,e,n,r,i;for(i=[],t=0,n=(r=this.element.querySelectorAll(o)).length;t<n;t++)(e=r[t]).setAttribute("disabled","disabled"),i.push(e.classList.remove("validate"));return i},e.prototype.getDialog=function(t){return this.element.querySelector(".dialog[data-trix-dialog="+t+"]")},h=function(t,e){return null==e&&(e=c(t)),t.querySelector("input[name='"+e+"']")},l=function(t){return t.getAttribute("data-trix-action")},c=function(t){return t.getAttribute("data-trix-attribute")},u=function(t){return t.getAttribute("data-trix-dialog")},e}(L.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.ImagePreloadOperation=function(t){function e(t){this.url=t}return n(e,t),e.prototype.perform=function(t){var e,n;return(e=new Image).onload=(n=this,function(){return e.width=n.width=e.naturalWidth,e.height=n.height=e.naturalHeight,t(!0,e)}),e.onerror=function(){return t(!1)},e.src=this.url},e}(L.Operation)}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.Attachment=function(t){function e(t){null==t&&(t={}),this.releaseFile=n(this.releaseFile,this),e.__super__.constructor.apply(this,arguments),this.attributes=L.Hash.box(t),this.didChangeAttributes()}return r(e,t),e.previewablePattern=/^image(\/(gif|png|jpe?g)|$)/,e.attachmentForFile=function(t){var e;return(e=new this(this.attributesForFile(t))).setFile(t),e},e.attributesForFile=function(t){return new L.Hash({filename:t.name,filesize:t.size,contentType:t.type})},e.fromJSON=function(t){return new this(t)},e.prototype.getAttribute=function(t){return this.attributes.get(t)},e.prototype.hasAttribute=function(t){return this.attributes.has(t)},e.prototype.getAttributes=function(){return this.attributes.toObject()},e.prototype.setAttributes=function(t){var e,n;return null==t&&(t={}),e=this.attributes.merge(t),this.attributes.isEqualTo(e)?void 0:(this.attributes=e,this.didChangeAttributes(),null!=(n=this.delegate)&&"function"==typeof n.attachmentDidChangeAttributes?n.attachmentDidChangeAttributes(this):void 0)},e.prototype.didChangeAttributes=function(){return this.isPreviewable()?this.preloadURL():void 0},e.prototype.isPending=function(){return null!=this.file&&!(this.getURL()||this.getHref())},e.prototype.isPreviewable=function(){return this.attributes.has("previewable")?this.attributes.get("previewable"):this.constructor.previewablePattern.test(this.getContentType())},e.prototype.getType=function(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"},e.prototype.getURL=function(){return this.attributes.get("url")},e.prototype.getHref=function(){return this.attributes.get("href")},e.prototype.getFilename=function(){var t;return null!=(t=this.attributes.get("filename"))?t:""},e.prototype.getFilesize=function(){return this.attributes.get("filesize")},e.prototype.getFormattedFilesize=function(){var t;return"number"==typeof(t=this.attributes.get("filesize"))?L.config.fileSize.formatter(t):""},e.prototype.getExtension=function(){var t;return null!=(t=this.getFilename().match(/\.(\w+)$/))?t[1].toLowerCase():void 0},e.prototype.getContentType=function(){return this.attributes.get("contentType")},e.prototype.hasContent=function(){return this.attributes.has("content")},e.prototype.getContent=function(){return this.attributes.get("content")},e.prototype.getWidth=function(){return this.attributes.get("width")},e.prototype.getHeight=function(){return this.attributes.get("height")},e.prototype.getFile=function(){return this.file},e.prototype.setFile=function(t){return this.file=t,this.isPreviewable()?this.preloadFile():void 0},e.prototype.releaseFile=function(){return this.releasePreloadedFile(),this.file=null},e.prototype.getUploadProgress=function(){var t;return null!=(t=this.uploadProgress)?t:0},e.prototype.setUploadProgress=function(t){var e;return this.uploadProgress!==t?(this.uploadProgress=t,null!=(e=this.uploadProgressDelegate)&&"function"==typeof e.attachmentDidChangeUploadProgress?e.attachmentDidChangeUploadProgress(this):void 0):void 0},e.prototype.toJSON=function(){return this.getAttributes()},e.prototype.getCacheKey=function(){return[e.__super__.getCacheKey.apply(this,arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")},e.prototype.getPreviewURL=function(){return this.previewURL||this.preloadingURL},e.prototype.setPreviewURL=function(t){var e,n;return t!==this.getPreviewURL()?(this.previewURL=t,null!=(e=this.previewDelegate)&&"function"==typeof e.attachmentDidChangePreviewURL&&e.attachmentDidChangePreviewURL(this),null!=(n=this.delegate)&&"function"==typeof n.attachmentDidChangePreviewURL?n.attachmentDidChangePreviewURL(this):void 0):void 0},e.prototype.preloadURL=function(){return this.preload(this.getURL(),this.releaseFile)},e.prototype.preloadFile=function(){return this.file?(this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)):void 0},e.prototype.releasePreloadedFile=function(){return this.fileObjectURL?(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null):void 0},e.prototype.preload=function(r,i){var o;return r&&r!==this.getPreviewURL()?(this.preloadingURL=r,new L.ImagePreloadOperation(r).then((o=this,function(t){var e,n;return n=t.width,e=t.height,o.setAttributes({width:n,height:e}),o.preloadingURL=null,o.setPreviewURL(r),"function"==typeof i?i():void 0}))):void 0},e}(L.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.Piece=function(t){function n(t,e){null==e&&(e={}),n.__super__.constructor.apply(this,arguments),this.attributes=L.Hash.box(e)}return e(n,t),n.types={},n.registerType=function(t,e){return e.type=t,this.types[t]=e},n.fromJSON=function(t){var e;return(e=this.types[t.type])?e.fromJSON(t):void 0},n.prototype.copyWithAttributes=function(t){return new this.constructor(this.getValue(),t)},n.prototype.copyWithAdditionalAttributes=function(t){return this.copyWithAttributes(this.attributes.merge(t))},n.prototype.copyWithoutAttribute=function(t){return this.copyWithAttributes(this.attributes.remove(t))},n.prototype.copy=function(){return this.copyWithAttributes(this.attributes)},n.prototype.getAttribute=function(t){return this.attributes.get(t)},n.prototype.getAttributesHash=function(){return this.attributes},n.prototype.getAttributes=function(){return this.attributes.toObject()},n.prototype.getCommonAttributes=function(){var e,n,t;return(t=pieceList.getPieceAtIndex(0))?(e=t.attributes,n=e.getKeys(),pieceList.eachPiece(function(t){return n=e.getKeysCommonToHash(t.attributes),e=e.slice(n)}),e.toObject()):{}},n.prototype.hasAttribute=function(t){return this.attributes.has(t)},n.prototype.hasSameStringValueAsPiece=function(t){return null!=t&&this.toString()===t.toString()},n.prototype.hasSameAttributesAsPiece=function(t){return null!=t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))},n.prototype.isBlockBreak=function(){return!1},n.prototype.isEqualTo=function(t){return n.__super__.isEqualTo.apply(this,arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)},n.prototype.isEmpty=function(){return 0===this.length},n.prototype.isSerializable=function(){return!0},n.prototype.toJSON=function(){return{type:this.constructor.type,attributes:this.getAttributes()}},n.prototype.contentsForInspection=function(){return{type:this.constructor.type,attributes:this.attributes.inspect()}},n.prototype.canBeGrouped=function(){return this.hasAttribute("href")},n.prototype.canBeGroupedWith=function(t){return this.getAttribute("href")===t.getAttribute("href")},n.prototype.getLength=function(){return this.length},n.prototype.canBeConsolidatedWith=function(){return!1},n}(L.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.Piece.registerType("attachment",L.AttachmentPiece=function(t){function n(t){this.attachment=t,n.__super__.constructor.apply(this,arguments),this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href")}return e(n,t),n.fromJSON=function(t){return new this(L.Attachment.fromJSON(t.attachment),t.attributes)},n.prototype.ensureAttachmentExclusivelyHasAttribute=function(t){return this.hasAttribute(t)&&this.attachment.hasAttribute(t)?this.attributes=this.attributes.remove(t):void 0},n.prototype.getValue=function(){return this.attachment},n.prototype.isSerializable=function(){return!this.attachment.isPending()},n.prototype.getCaption=function(){var t;return null!=(t=this.attributes.get("caption"))?t:""},n.prototype.getAttributesForAttachment=function(){return this.attributes.slice(["caption"])},n.prototype.canBeGrouped=function(){return n.__super__.canBeGrouped.apply(this,arguments)&&!this.attachment.hasAttribute("href")},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)&&this.attachment.id===(null!=t&&null!=(e=t.attachment)?e.id:void 0)},n.prototype.toString=function(){return L.OBJECT_REPLACEMENT_CHARACTER},n.prototype.toJSON=function(){var t;return(t=n.__super__.toJSON.apply(this,arguments)).attachment=this.attachment,t},n.prototype.getCacheKey=function(){return[n.__super__.getCacheKey.apply(this,arguments),this.attachment.getCacheKey()].join("/")},n.prototype.toConsole=function(){return JSON.stringify(this.toString())},n}(L.Piece))}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.Piece.registerType("string",L.StringPiece=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this.string=t,this.length=this.string.length}return n(e,t),e.fromJSON=function(t){return new this(t.string,t.attributes)},e.prototype.getValue=function(){return this.string},e.prototype.toString=function(){return this.string.toString()},e.prototype.isBlockBreak=function(){return"\n"===this.toString()&&!0===this.getAttribute("blockBreak")},e.prototype.toJSON=function(){var t;return(t=e.__super__.toJSON.apply(this,arguments)).string=this.string,t},e.prototype.canBeConsolidatedWith=function(t){return null!=t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)},e.prototype.consolidateWith=function(t){return new this.constructor(this.toString()+t.toString(),this.attributes)},e.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.length?(e=this,n=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),n=new this.constructor(this.string.slice(t),this.attributes)),[e,n]},e.prototype.toConsole=function(){var t;return 15<(t=this.string).length&&(t=t.slice(0,14)+"\u2026"),JSON.stringify(t.toString())},e}(L.Piece))}.call(this),function(){var r,i=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty,l=[].slice;r=L.spliceArray,L.SplittableList=function(t){function e(t){null==t&&(t=[]),e.__super__.constructor.apply(this,arguments),this.objects=t.slice(0),this.length=this.objects.length}var a,n,s;return i(e,t),e.box=function(t){return t instanceof this?t:new this(t)},e.prototype.indexOf=function(t){return this.objects.indexOf(t)},e.prototype.splice=function(){var t;return t=1<=arguments.length?l.call(arguments,0):[],new this.constructor(r.apply(null,[this.objects].concat(l.call(t))))},e.prototype.eachObject=function(t){var e,n,r,i,o,a;for(a=[],n=e=0,r=(o=this.objects).length;e<r;n=++e)i=o[n],a.push(t(i,n));return a},e.prototype.insertObjectAtIndex=function(t,e){return this.splice(e,0,t)},e.prototype.insertSplittableListAtIndex=function(t,e){return this.splice.apply(this,[e,0].concat(l.call(t.objects)))},e.prototype.insertSplittableListAtPosition=function(t,e){var n,r,i;return r=(i=this.splitObjectAtPosition(e))[0],n=i[1],new this.constructor(r).insertSplittableListAtIndex(t,n)},e.prototype.editObjectAtIndex=function(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)},e.prototype.replaceObjectAtIndex=function(t,e){return this.splice(e,1,t)},e.prototype.removeObjectAtIndex=function(t){return this.splice(t,1)},e.prototype.getObjectAtIndex=function(t){return this.objects[t]},e.prototype.getSplittableListInRange=function(t){var e,n,r,i;return n=(r=this.splitObjectsAtRange(t))[0],e=r[1],i=r[2],new this.constructor(n.slice(e,i+1))},e.prototype.selectSplittableList=function(i){var o,t;return t=function(){var t,e,n,r;for(r=[],t=0,e=(n=this.objects).length;t<e;t++)o=n[t],i(o)&&r.push(o);return r}.call(this),new this.constructor(t)},e.prototype.removeObjectsInRange=function(t){var e,n,r,i;return n=(r=this.splitObjectsAtRange(t))[0],e=r[1],i=r[2],new this.constructor(n).splice(e,i-e+1)},e.prototype.transformObjectsInRange=function(t,r){var i,o,a,s,e,l,n;return e=this.splitObjectsAtRange(t),s=e[0],o=e[1],l=e[2],n=function(){var t,e,n;for(n=[],i=t=0,e=s.length;t<e;i=++t)a=s[i],n.push(o<=i&&i<=l?r(a):a);return n}(),new this.constructor(n)},e.prototype.splitObjectsAtRange=function(t){var e,n,r,i,o;return n=(i=this.splitObjectAtPosition(s(t)))[0],e=i[1],r=i[2],[n=(o=new this.constructor(n).splitObjectAtPosition(a(t)+r))[0],e,o[1]-1]},e.prototype.getObjectAtPosition=function(t){var e,n;return e=(n=this.findIndexAndOffsetAtPosition(t)).index,n.offset,this.objects[e]},e.prototype.splitObjectAtPosition=function(t){var e,n,r,i,o,a,s,l,u;return e=(o=this.findIndexAndOffsetAtPosition(t)).index,i=o.offset,r=this.objects.slice(0),null!=e?0===i?(l=e,u=0):(n=(a=this.getObjectAtIndex(e).splitAtOffset(i))[0],s=a[1],r.splice(e,1,n,s),l=e+1,u=n.getLength()-i):(l=r.length,u=0),[r,l,u]},e.prototype.consolidate=function(){var t,e,n,r,i,o;for(r=[],i=this.objects[0],t=0,e=(o=this.objects.slice(1)).length;t<e;t++)n=o[t],("function"==typeof i.canBeConsolidatedWith?i.canBeConsolidatedWith(n):void 0)?i=i.consolidateWith(n):(r.push(i),i=n);return null!=i&&r.push(i),new this.constructor(r)},e.prototype.consolidateFromIndexToIndex=function(t,e){var n,r;return r=this.objects.slice(0).slice(t,e+1),n=new this.constructor(r).consolidate().toArray(),this.splice.apply(this,[t,r.length].concat(l.call(n)))},e.prototype.findIndexAndOffsetAtPosition=function(t){var e,n,r,i,o,a;for(r=n=e=0,i=(a=this.objects).length;n<i;r=++n){if(o=e+a[r].getLength(),e<=t&&t<o)return{index:r,offset:t-e};e=o}return{index:null,offset:null}},e.prototype.findPositionAtIndexAndOffset=function(t,e){var n,r,i,o,a,s;for(n=r=a=0,i=(s=this.objects).length;r<i;n=++r)if(o=s[n],n<t)a+=o.getLength();else if(n===t){a+=e;break}return a},e.prototype.getEndPosition=function(){var r,i;return null!=this.endPosition?this.endPosition:this.endPosition=function(){var t,e,n;for(t=i=0,e=(n=this.objects).length;t<e;t++)r=n[t],i+=r.getLength();return i}.call(this)},e.prototype.toString=function(){return this.objects.join("")},e.prototype.toArray=function(){return this.objects.slice(0)},e.prototype.toJSON=function(){return this.toArray()},e.prototype.isEqualTo=function(t){return e.__super__.isEqualTo.apply(this,arguments)||n(this.objects,null!=t?t.objects:void 0)},n=function(t,e){var n,r,i,o,a;if(null==e&&(e=[]),t.length!==e.length)return!1;for(a=!0,r=n=0,i=t.length;n<i;r=++n)o=t[r],a&&!o.isEqualTo(e[r])&&(a=!1);return a},e.prototype.contentsForInspection=function(){var i;return{objects:"["+function(){var t,e,n,r;for(r=[],t=0,e=(n=this.objects).length;t<e;t++)i=n[t],r.push(i.inspect());return r}.call(this).join(", ")+"]"}},s=function(t){return t[0]},a=function(t){return t[1]},e}(L.Object)}.call(this),function(){var e=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.Text=function(t){function n(r){var i;null==r&&(r=[]),n.__super__.constructor.apply(this,arguments),this.pieceList=new L.SplittableList(function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)(i=r[t]).isEmpty()||n.push(i);return n}())}return e(n,t),n.textForAttachmentWithAttributes=function(t,e){return new this([new L.AttachmentPiece(t,e)])},n.textForStringWithAttributes=function(t,e){return new this([new L.StringPiece(t,e)])},n.fromJSON=function(r){var i;return new this(function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(L.Piece.fromJSON(i));return n}())},n.prototype.copy=function(){return this.copyWithPieceList(this.pieceList)},n.prototype.copyWithPieceList=function(t){return new this.constructor(t.consolidate().toArray())},n.prototype.copyUsingObjectMap=function(o){var a,t;return t=function(){var t,e,n,r,i;for(i=[],t=0,e=(n=this.getPieces()).length;t<e;t++)a=n[t],i.push(null!=(r=o.find(a))?r:a);return i}.call(this),new this.constructor(t)},n.prototype.appendText=function(t){return this.insertTextAtPosition(t,this.getLength())},n.prototype.insertTextAtPosition=function(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))},n.prototype.removeTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))},n.prototype.replaceTextAtRange=function(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])},n.prototype.moveTextFromRangeToPosition=function(t,e){var n,r;if(!(t[0]<=e&&e<=t[1]))return n=(r=this.getTextAtRange(t)).getLength(),t[0]<e&&(e-=n),this.removeTextAtRange(t).insertTextAtPosition(r,e)},n.prototype.addAttributeAtRange=function(t,e,n){var r;return(r={})[t]=e,this.addAttributesAtRange(r,n)},n.prototype.addAttributesAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithAdditionalAttributes(e)}))},n.prototype.removeAttributeAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithoutAttribute(e)}))},n.prototype.setAttributesAtRange=function(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,function(t){return t.copyWithAttributes(e)}))},n.prototype.getAttributesAtPosition=function(t){var e,n;return null!=(e=null!=(n=this.pieceList.getObjectAtPosition(t))?n.getAttributes():void 0)?e:{}},n.prototype.getCommonAttributes=function(){var t,i;return t=function(){var t,e,n,r;for(r=[],t=0,e=(n=this.pieceList.toArray()).length;t<e;t++)i=n[t],r.push(i.getAttributes());return r}.call(this),L.Hash.fromCommonAttributesOfObjects(t).toObject()},n.prototype.getCommonAttributesAtRange=function(t){var e;return null!=(e=this.getTextAtRange(t).getCommonAttributes())?e:{}},n.prototype.getExpandedRangeForAttributeAtOffset=function(t,e){var n,r,i;for(n=i=e,r=this.getLength();0<n&&this.getCommonAttributesAtRange([n-1,i])[t];)n--;for(;i<r&&this.getCommonAttributesAtRange([e,i+1])[t];)i++;return[n,i]},n.prototype.getTextAtRange=function(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))},n.prototype.getStringAtRange=function(t){return this.pieceList.getSplittableListInRange(t).toString()},n.prototype.getStringAtPosition=function(t){return this.getStringAtRange([t,t+1])},n.prototype.startsWithString=function(t){return this.getStringAtRange([0,t.length])===t},n.prototype.endsWithString=function(t){var e;return e=this.getLength(),this.getStringAtRange([e-t.length,e])===t},n.prototype.getAttachmentPieces=function(){var t,e,n,r,i;for(i=[],t=0,e=(r=this.pieceList.toArray()).length;t<e;t++)null!=(n=r[t]).attachment&&i.push(n);return i},n.prototype.getAttachments=function(){var t,e,n,r,i;for(i=[],t=0,e=(r=this.getAttachmentPieces()).length;t<e;t++)n=r[t],i.push(n.attachment);return i},n.prototype.getAttachmentAndPositionById=function(t){var e,n,r,i,o,a;for(e=i=0,n=(o=this.pieceList.toArray()).length;e<n;e++){if((null!=(a=(r=o[e]).attachment)?a.id:void 0)===t)return{attachment:r.attachment,position:i};i+=r.length}return{attachment:null,position:null}},n.prototype.getAttachmentById=function(t){var e,n;return e=(n=this.getAttachmentAndPositionById(t)).attachment,n.position,e},n.prototype.getRangeOfAttachment=function(t){var e,n;return t=(n=this.getAttachmentAndPositionById(t.id)).attachment,e=n.position,null!=t?[e,e+1]:void 0},n.prototype.updateAttributesForAttachment=function(t,e){var n;return(n=this.getRangeOfAttachment(e))?this.addAttributesAtRange(t,n):this},n.prototype.getLength=function(){return this.pieceList.getEndPosition()},n.prototype.isEmpty=function(){return 0===this.getLength()},n.prototype.isEqualTo=function(t){var e;return n.__super__.isEqualTo.apply(this,arguments)||(null!=t&&null!=(e=t.pieceList)?e.isEqualTo(this.pieceList):void 0)},n.prototype.isBlockBreak=function(){return 1===this.getLength()&&this.pieceList.getObjectAtIndex(0).isBlockBreak()},n.prototype.eachPiece=function(t){return this.pieceList.eachObject(t)},n.prototype.getPieces=function(){return this.pieceList.toArray()},n.prototype.getPieceAtPosition=function(t){return this.pieceList.getObjectAtPosition(t)},n.prototype.contentsForInspection=function(){return{pieceList:this.pieceList.inspect()}},n.prototype.toSerializableText=function(){var t;return t=this.pieceList.selectSplittableList(function(t){return t.isSerializable()}),this.copyWithPieceList(t)},n.prototype.toString=function(){return this.pieceList.toString()},n.prototype.toJSON=function(){return this.pieceList.toJSON()},n.prototype.toConsole=function(){var i;return JSON.stringify(function(){var t,e,n,r;for(r=[],t=0,e=(n=this.pieceList.toArray()).length;t<e;t++)i=n[t],r.push(JSON.parse(i.toConsole()));return r}.call(this))},n}(L.Object)}.call(this),function(){var h,d,p,f,g=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty,m=[].slice,v=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};h=L.arraysAreEqual,f=L.spliceArray,d=L.getBlockConfig,L.getBlockAttributeNames,p=L.getListAttributeNames,L.Block=function(t){function n(t,e){null==t&&(t=new L.Text),null==e&&(e=[]),n.__super__.constructor.apply(this,arguments),this.text=r(t),this.attributes=e}var e,r,i,o,a,s,l,u,c;return g(n,t),n.fromJSON=function(t){return new this(L.Text.fromJSON(t.text),t.attributes)},n.prototype.isEmpty=function(){return this.text.isBlockBreak()},n.prototype.isEqualTo=function(t){return n.__super__.isEqualTo.apply(this,arguments)||this.text.isEqualTo(null!=t?t.text:void 0)&&h(this.attributes,null!=t?t.attributes:void 0)},n.prototype.copyWithText=function(t){return new this.constructor(t,this.attributes)},n.prototype.copyWithoutText=function(){return this.copyWithText(null)},n.prototype.copyWithAttributes=function(t){return new this.constructor(this.text,t)},n.prototype.copyUsingObjectMap=function(t){var e;return this.copyWithText((e=t.find(this.text))?e:this.text.copyUsingObjectMap(t))},n.prototype.addAttribute=function(t){var e;return e=this.attributes.concat(o(t)),this.copyWithAttributes(e)},n.prototype.removeAttribute=function(t){var e,n;return n=d(t).listAttribute,e=s(s(this.attributes,t),n),this.copyWithAttributes(e)},n.prototype.removeLastAttribute=function(){return this.removeAttribute(this.getLastAttribute())},n.prototype.getLastAttribute=function(){return a(this.attributes)},n.prototype.getAttributes=function(){return this.attributes.slice(0)},n.prototype.getAttributeLevel=function(){return this.attributes.length},n.prototype.getAttributeAtLevel=function(t){return this.attributes[t-1]},n.prototype.hasAttributes=function(){return 0<this.getAttributeLevel()},n.prototype.getLastNestableAttribute=function(){return a(this.getNestableAttributes())},n.prototype.getNestableAttributes=function(){var t,e,n,r,i;for(i=[],e=0,n=(r=this.attributes).length;e<n;e++)t=r[e],d(t).nestable&&i.push(t);return i},n.prototype.getNestingLevel=function(){return this.getNestableAttributes().length},n.prototype.decreaseNestingLevel=function(){var t;return(t=this.getLastNestableAttribute())?this.removeAttribute(t):this},n.prototype.increaseNestingLevel=function(){var t,e,n;return(t=this.getLastNestableAttribute())?(n=this.attributes.lastIndexOf(t),e=f.apply(null,[this.attributes,n+1,0].concat(m.call(o(t)))),this.copyWithAttributes(e)):this},n.prototype.getListItemAttributes=function(){var t,e,n,r,i;for(i=[],e=0,n=(r=this.attributes).length;e<n;e++)t=r[e],d(t).listAttribute&&i.push(t);return i},n.prototype.isListItem=function(){var t;return null!=(t=d(this.getLastAttribute()))?t.listAttribute:void 0},n.prototype.isTerminalBlock=function(){var t;return null!=(t=d(this.getLastAttribute(
)))?t.terminal:void 0},n.prototype.breaksOnReturn=function(){var t;return null!=(t=d(this.getLastAttribute()))?t.breakOnReturn:void 0},n.prototype.findLineBreakInDirectionFromPosition=function(t,e){var n,r;return r=this.toString(),-1!==(n=function(){switch(t){case"forward":return r.indexOf("\n",e);case"backward":return r.slice(0,e).lastIndexOf("\n")}}())?n:void 0},n.prototype.contentsForInspection=function(){return{text:this.text.inspect(),attributes:this.attributes}},n.prototype.toString=function(){return this.text.toString()},n.prototype.toJSON=function(){return{text:this.text,attributes:this.attributes}},n.prototype.getLength=function(){return this.text.getLength()},n.prototype.canBeConsolidatedWith=function(t){return!this.hasAttributes()&&!t.hasAttributes()},n.prototype.consolidateWith=function(t){var e,n;return e=L.Text.textForStringWithAttributes("\n"),n=this.getTextWithoutBlockBreak().appendText(e),this.copyWithText(n.appendText(t.text))},n.prototype.splitAtOffset=function(t){var e,n;return 0===t?(e=null,n=this):t===this.getLength()?(e=this,n=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),n=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,n]},n.prototype.getBlockBreakPosition=function(){return this.text.getLength()-1},n.prototype.getTextWithoutBlockBreak=function(){return l(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()},n.prototype.canBeGrouped=function(t){return this.attributes[t]},n.prototype.canBeGroupedWith=function(t,e){var n,r,i,o;return r=(i=t.getAttributes())[e],(n=this.attributes[e])===r&&!(!1===d(n).group&&(o=i[e+1],v.call(p(),o)<0))},r=function(t){return t=c(t),e(t)},c=function(t){var e,r,n,i,o,a;return i=!1,a=t.getPieces(),r=2<=a.length?m.call(a,0,e=a.length-1):(e=0,[]),null==(n=a[e++])?t:(r=function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)(o=r[t]).isBlockBreak()?(i=!0,n.push(u(o))):n.push(o);return n}(),i?new L.Text(m.call(r).concat([n])):t)},i=L.Text.textForStringWithAttributes("\n",{blockBreak:!0}),e=function(t){return l(t)?t:t.appendText(i)},l=function(t){var e;return 0!==(e=t.getLength())&&t.getTextAtRange([e-1,e]).isBlockBreak()},u=function(t){return t.copyWithoutAttribute("blockBreak")},o=function(t){var e;return null!=(e=d(t).listAttribute)?[e,t]:[t]},a=function(t){return t.slice(-1)[0]},s=function(t,e){var n;return-1===(n=t.lastIndexOf(e))?t:f(t,n,1)},n}(L.Object)}.call(this),function(){var y,b,w,A,C,x,S,_,D,T=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty,E=[].slice,R=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};y=L.arraysAreEqual,S=L.normalizeSpaces,C=L.makeElement,_=L.tagName,A=L.getBlockTagNames,D=L.walkTree,w=L.findClosestElementFromNode,b=L.elementContainsNode,x=L.nodeIsAttachmentElement,L.HTMLParser=function(t){function e(t,e){this.html=t,this.referenceElement=(null!=e?e:{}).referenceElement,this.blocks=[],this.blockElements=[],this.processedElements=[]}var m,r,n,i,v,a,o,s,l,u,c,h,d,p,f,g;return T(e,t),m="style href src width height class".split(" "),e.parse=function(t,e){var n;return(n=new this(t,e)).parse(),n},e.prototype.getDocument=function(){return L.Document.fromJSON(this.blocks)},e.prototype.parse=function(){var t,e;try{for(this.createHiddenContainer(),t=d(this.html),this.containerElement.innerHTML=t,e=D(this.containerElement,{usingFilter:u});e.nextNode();)this.processNode(e.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}},e.prototype.createHiddenContainer=function(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=C({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))},e.prototype.removeHiddenContainer=function(){return this.containerElement.parentNode.removeChild(this.containerElement)},d=function(t){var e,n,r,i,o,a,s,l,u,c,h,d,p,f,g;for(t=t.replace(/<\/html[^>]*>[^]*$/i,"</html>"),(n=document.implementation.createHTMLDocument("")).documentElement.innerHTML=t,e=n.body,r=0,a=(d=n.head.querySelectorAll("style")).length;r<a;r++)f=d[r],e.appendChild(f);for(h=[],g=D(e);g.nextNode();)switch(c=g.currentNode,c.nodeType){case Node.ELEMENT_NODE:if(v(c))h.push(c);else for(i=0,s=(p=E.call(c.attributes)).length;i<s;i++)u=p[i].name,0<=R.call(m,u)||0===u.indexOf("data-trix")||c.removeAttribute(u);break;case Node.COMMENT_NODE:h.push(c)}for(o=0,l=h.length;o<l;o++)(c=h[o]).parentNode.removeChild(c);return e.innerHTML},v=function(t){return(null!=t?t.nodeType:void 0)!==Node.ELEMENT_NODE||x(t)?void 0:"script"===_(t)||"false"===t.getAttribute("data-trix-serialize")},u=function(t){return"style"===_(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},e.prototype.processNode=function(t){switch(t.nodeType){case Node.TEXT_NODE:return this.processTextNode(t);case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}},e.prototype.appendBlockForElement=function(t){var e,n,r,i;if(r=this.isBlockElement(t),n=b(this.currentBlockElement,t),r&&!this.isBlockElement(t.firstChild)){if(!(this.isInsignificantTextNode(t.firstChild)&&this.isBlockElement(t.firstElementChild)||(e=this.getBlockAttributes(t),n&&y(e,this.currentBlock.attributes))))return this.currentBlock=this.appendBlockForAttributesWithElement(e,t),this.currentBlockElement=t}else if(this.currentBlockElement&&!n&&!r)return(i=this.findParentBlockElement(t))?this.appendBlockForElement(i):(this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null)},e.prototype.findParentBlockElement=function(t){var e;for(e=t.parentElement;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&0<=R.call(this.blockElements,e))return e;e=e.parentElement}return null},e.prototype.processTextNode=function(t){var e,n;return this.isInsignificantTextNode(t)?void 0:(n=t.data,i(t.parentNode)||(n=p(n),f(null!=(e=t.previousSibling)?e.textContent:void 0)&&(n=l(n))),this.appendStringWithAttributes(n,this.getTextAttributes(t.parentNode)))},e.prototype.processElement=function(t){var e,n,r,i,o;if(x(t))return e=a(t),Object.keys(e).length&&(i=this.getTextAttributes(t),this.appendAttachmentWithAttributes(e,i),t.innerHTML=""),this.processedElements.push(t);switch(_(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes("\n",this.getTextAttributes(t)),this.processedElements.push(t);case"img":for(n in e={url:t.getAttribute("src"),contentType:"image"},r=s(t))o=r[n],e[n]=o;return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes("\n");break;case"td":if(t.parentNode.firstChild!==t)return this.appendStringWithAttributes(" | ")}},e.prototype.appendBlockForAttributesWithElement=function(t,e){var n;return this.blockElements.push(e),n=r(t),this.blocks.push(n),n},e.prototype.appendEmptyBlock=function(){return this.appendBlockForAttributesWithElement([],null)},e.prototype.appendStringWithAttributes=function(t,e){return this.appendPiece(h(t,e))},e.prototype.appendAttachmentWithAttributes=function(t,e){return this.appendPiece(c(t,e))},e.prototype.appendPiece=function(t){return 0===this.blocks.length&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)},e.prototype.appendStringToTextAtIndex=function(t,e){var n,r;return"string"===(null!=(n=(r=this.blocks[e].text)[r.length-1])?n.type:void 0)?n.string+=t:r.push(h(t))},e.prototype.prependStringToTextAtIndex=function(t,e){var n,r;return"string"===(null!=(n=(r=this.blocks[e].text)[0])?n.type:void 0)?n.string=t+n.string:r.unshift(h(t))},h=function(t,e){var n;return null==e&&(e={}),n="string",{string:t=S(t),attributes:e,type:n}},c=function(t,e){return null==e&&(e={}),{attachment:t,attributes:e,type:"attachment"}},r=function(t){return null==t&&(t={}),{text:[],attributes:t}},e.prototype.getTextAttributes=function(t){var e,n,r,i,o,a,s,l,u,c,h,d,p;for(e in r={},c=L.config.textAttributes)if((o=c[e]).tagName&&w(t,{matchingSelector:o.tagName,untilNode:this.containerElement}))r[e]=!0;else if(o.parser&&(p=o.parser(t))){for(n=!1,a=0,u=(h=this.findBlockElementAncestors(t)).length;a<u;a++)if(i=h[a],o.parser(i)===p){n=!0;break}n||(r[e]=p)}if(x(t)&&(s=t.getAttribute("data-trix-attributes")))for(l in d=JSON.parse(s))p=d[l],r[l]=p;return r},e.prototype.getBlockAttributes=function(t){var e,n,r,i;for(n=[];t&&t!==this.containerElement;){for(e in i=L.config.blockAttributes)!1!==(r=i[e]).parse&&_(t)===r.tagName&&(("function"==typeof r.test?r.test(t):void 0)||!r.test)&&(n.push(e),r.listAttribute&&n.push(r.listAttribute));t=t.parentNode}return n.reverse()},e.prototype.findBlockElementAncestors=function(t){var e,n;for(e=[];t&&t!==this.containerElement;)n=_(t),0<=R.call(A(),n)&&e.push(t),t=t.parentNode;return e},a=function(t){return JSON.parse(t.getAttribute("data-trix-attachment"))},s=function(t){var e,n,r;return r=t.getAttribute("width"),n=t.getAttribute("height"),e={},r&&(e.width=parseInt(r,10)),n&&(e.height=parseInt(n,10)),e},e.prototype.isBlockElement=function(t){var e;if((null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE&&!w(t,{matchingSelector:"td",untilNode:this.containerElement}))return e=_(t),0<=R.call(A(),e)||"block"===window.getComputedStyle(t).display},e.prototype.isInsignificantTextNode=function(t){return(null!=t?t.nodeType:void 0)===Node.TEXT_NODE&&g(t.data)&&!i(t.parentNode)?!t.previousSibling||this.isBlockElement(t.previousSibling)||!t.nextSibling||this.isBlockElement(t.nextSibling):void 0},e.prototype.isExtraBR=function(t){return"br"===_(t)&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t},i=function(t){var e;return"pre"===(e=window.getComputedStyle(t).whiteSpace)||"pre-wrap"===e||"pre-line"===e},e.prototype.translateBlockElementMarginsToNewlines=function(){var t,e,n,r,i,o,a;for(t=this.getMarginOfDefaultBlockElement(),a=[],n=e=0,r=(o=this.blocks).length;e<r;n=++e)o[n],(i=this.getMarginOfBlockElementAtIndex(n))&&(i.top>2*t.top&&this.prependStringToTextAtIndex("\n",n),a.push(i.bottom>2*t.bottom?this.appendStringToTextAtIndex("\n",n):void 0));return a},e.prototype.getMarginOfBlockElementAtIndex=function(t){var e,n;return!(e=this.blockElements[t])||(n=_(e),0<=R.call(A(),n)||0<=R.call(this.processedElements,e))?void 0:o(e)},e.prototype.getMarginOfDefaultBlockElement=function(){var t;return t=C(L.config.blockAttributes["default"].tagName),this.containerElement.appendChild(t),o(t)},o=function(t){var e;return"block"===(e=window.getComputedStyle(t)).display?{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}:void 0},n=RegExp("[^\\S"+L.NON_BREAKING_SPACE+"]"),p=function(t){return t.replace(RegExp(""+n.source,"g")," ").replace(/\ {2,}/g," ")},l=function(t){return t.replace(RegExp("^"+n.source+"+"),"")},g=function(t){return RegExp("^"+n.source+"*$").test(t)},f=function(t){return/\s$/.test(t)},e}(L.BasicObject)}.call(this),function(){var f,s,b,w,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty,d=[].slice,p=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};f=L.arraysAreEqual,b=L.normalizeRange,w=L.rangeIsCollapsed,s=L.getBlockConfig,L.Document=function(t){function e(t){null==t&&(t=[]),e.__super__.constructor.apply(this,arguments),0===t.length&&(t=[new L.Block]),this.blockList=L.SplittableList.box(t)}var h;return n(e,t),e.fromJSON=function(r){var i;return new this(function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(L.Block.fromJSON(i));return n}())},e.fromHTML=function(t,e){return L.HTMLParser.parse(t,e).getDocument()},e.fromString=function(t,e){var n;return n=L.Text.textForStringWithAttributes(t,e),new this([new L.Block(n)])},e.prototype.isEmpty=function(){var t;return 1===this.blockList.length&&((t=this.getBlockAtIndex(0)).isEmpty()&&!t.hasAttributes())},e.prototype.copy=function(t){var e;return null==t&&(t={}),e=t.consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray(),new this.constructor(e)},e.prototype.copyUsingObjectsFromDocument=function(t){var e;return e=new L.ObjectMap(t.getObjects()),this.copyUsingObjectMap(e)},e.prototype.copyUsingObjectMap=function(i){var o,t,a;return t=function(){var t,e,n,r;for(r=[],t=0,e=(n=this.getBlocks()).length;t<e;t++)o=n[t],r.push((a=i.find(o))?a:o.copyUsingObjectMap(i));return r}.call(this),new this.constructor(t)},e.prototype.copyWithBaseBlockAttributes=function(i){var o,a,t;return null==i&&(i=[]),t=function(){var t,e,n,r;for(r=[],t=0,e=(n=this.getBlocks()).length;t<e;t++)a=n[t],o=i.concat(a.getAttributes()),r.push(a.copyWithAttributes(o));return r}.call(this),new this.constructor(t)},e.prototype.replaceBlock=function(t,e){var n;return-1===(n=this.blockList.indexOf(t))?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,n))},e.prototype.insertDocumentAtRange=function(t,e){var n,r,i,o,a,s,l;return r=t.blockList,a=(e=b(e))[0],i=(s=this.locationFromPosition(a)).index,o=s.offset,n=(l=this).getBlockAtPosition(a),w(e)&&n.isEmpty()&&!n.hasAttributes()?l=new this.constructor(l.blockList.removeObjectAtIndex(i)):n.getBlockBreakPosition()===o&&a++,l=l.removeTextAtRange(e),new this.constructor(l.blockList.insertSplittableListAtPosition(r,a))},e.prototype.mergeDocumentAtRange=function(t,e){var n,r,i,o,a,s,l,u,c,h,d,p;return d=(e=b(e))[0],h=this.locationFromPosition(d),r=this.getBlockAtIndex(h.index).getAttributes(),n=t.getBaseBlockAttributes(),p=r.slice(-n.length),f(n,p)?(l=r.slice(0,-n.length),s=t.copyWithBaseBlockAttributes(l)):s=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(r),i=s.getBlockCount(),o=s.getBlockAtIndex(0),f(r,o.getAttributes())?(a=o.getTextWithoutBlockBreak(),c=this.insertTextAtRange(a,e),1<i&&(s=new this.constructor(s.getBlocks().slice(1)),u=d+a.getLength(),c=c.insertDocumentAtRange(s,u))):c=this.insertDocumentAtRange(s,e),c},e.prototype.insertTextAtRange=function(e,t){var n,r,i,o,a;return a=(t=b(t))[0],r=(o=this.locationFromPosition(a)).index,i=o.offset,n=this.removeTextAtRange(t),new this.constructor(n.blockList.editObjectAtIndex(r,function(t){return t.copyWithText(t.text.insertTextAtPosition(e,i))}))},e.prototype.removeTextAtRange=function(t){var e,n,r,i,o,a,s,l,u,c,h,d,p,f,g,m,v,y;return l=(c=t=b(t))[0],m=c[1],w(t)?this:(a=(h=this.locationRangeFromRange(t))[0],f=h[1],o=a.index,s=a.offset,i=this.getBlockAtIndex(o),p=f.index,g=f.offset,d=this.getBlockAtIndex(p),m-l==1&&i.getBlockBreakPosition()===s&&d.getBlockBreakPosition()!==g&&"\n"===d.text.getStringAtPosition(g)?r=this.blockList.editObjectAtIndex(p,function(t){return t.copyWithText(t.text.removeTextAtRange([g,g+1]))}):(u=i.text.getTextAtRange([0,s]),v=d.text.getTextAtRange([g,d.getLength()]),y=u.appendText(v),n=o!==p&&0===s&&i.getAttributeLevel()>=d.getAttributeLevel()?d.copyWithText(y):i.copyWithText(y),e=p+1-o,r=this.blockList.splice(o,e,n)),new this.constructor(r))},e.prototype.moveTextFromRangeToPosition=function(t,e){var n,r,i,o,a,s,l,u,c,h;if(c=(s=t=b(t))[0],i=s[1],c<=e&&e<=i)return this;if(r=this.getDocumentAtRange(t),u=this.removeTextAtRange(t),(a=c<e)&&(e-=r.getLength()),!u.firstBlockInRangeIsEntirelySelected(t)){if(o=(l=r.getBlocks())[0],0===(n=2<=l.length?d.call(l,1):[]).length?(h=o.getTextWithoutBlockBreak(),a&&(e+=1)):h=o.text,u=u.insertTextAtRange(h,e),0===n.length)return u;r=new this.constructor(n),e+=h.getLength()}return u.insertDocumentAtRange(r,e)},e.prototype.addAttributeAtRange=function(r,i,t){var o;return o=this.blockList,this.eachBlockAtRange(t,function(t,e,n){return o=o.editObjectAtIndex(n,function(){return s(r)?t.addAttribute(r,i):e[0]===e[1]?t:t.copyWithText(t.text.addAttributeAtRange(r,i,e))})}),new this.constructor(o)},e.prototype.addAttribute=function(n,r){var i;return i=this.blockList,this.eachBlock(function(t,e){return i=i.editObjectAtIndex(e,function(){return t.addAttribute(n,r)})}),new this.constructor(i)},e.prototype.removeAttributeAtRange=function(r,t){var i;return i=this.blockList,this.eachBlockAtRange(t,function(t,e,n){return s(r)?i=i.editObjectAtIndex(n,function(){return t.removeAttribute(r)}):e[0]!==e[1]?i=i.editObjectAtIndex(n,function(){return t.copyWithText(t.text.removeAttributeAtRange(r,e))}):void 0}),new this.constructor(i)},e.prototype.updateAttributesForAttachment=function(e,n){var t,r,i;return r=this.getRangeOfAttachment(n)[0],t=this.locationFromPosition(r).index,i=this.getTextAtIndex(t),new this.constructor(this.blockList.editObjectAtIndex(t,function(t){return t.copyWithText(i.updateAttributesForAttachment(e,n))}))},e.prototype.removeAttributeForAttachment=function(t,e){var n;return n=this.getRangeOfAttachment(e),this.removeAttributeAtRange(t,n)},e.prototype.insertBlockBreakAtRange=function(t){var e,n,r,i;return i=(t=b(t))[0],r=this.locationFromPosition(i).offset,n=this.removeTextAtRange(t),0===r&&(e=[new L.Block]),new this.constructor(n.blockList.insertSplittableListAtPosition(new L.SplittableList(e),i))},e.prototype.applyBlockAttributeAtRange=function(t,e,n){var r,i,o,a;return i=(o=this.expandRangeToLineBreaksAndSplitBlocks(n)).document,n=o.range,(r=s(t)).listAttribute?(i=(a=(i=i.removeLastListAttributeAtRange(n,{exceptAttributeName:t})).convertLineBreaksToBlockBreaksInRange(n)).document,n=a.range):i=r.terminal?i.removeLastTerminalAttributeAtRange(n):i.consolidateBlocksAtRange(n),i.addAttributeAtRange(t,e,n)},e.prototype.removeLastListAttributeAtRange=function(t,i){var o;return null==i&&(i={}),o=this.blockList,this.eachBlockAtRange(t,function(t,e,n){var r;if((r=t.getLastAttribute())&&s(r).listAttribute&&r!==i.exceptAttributeName)return o=o.editObjectAtIndex(n,function(){return t.removeAttribute(r)})}),new this.constructor(o)},e.prototype.removeLastTerminalAttributeAtRange=function(t){var i;return i=this.blockList,this.eachBlockAtRange(t,function(t,e,n){var r;if((r=t.getLastAttribute())&&s(r).terminal)return i=i.editObjectAtIndex(n,function(){return t.removeAttribute(r)})}),new this.constructor(i)},e.prototype.firstBlockInRangeIsEntirelySelected=function(t){var e,n,r,i,o,a;return a=(i=t=b(t))[0],e=i[1],n=this.locationFromPosition(a),o=this.locationFromPosition(e),0===n.offset&&n.index<o.index||n.index===o.index&&(r=this.getBlockAtIndex(n.index).getLength(),0===n.offset&&o.offset===r)},e.prototype.expandRangeToLineBreaksAndSplitBlocks=function(t){var e,n,r,i,o,a,s,l,u;return u=(a=t=b(t))[0],i=a[1],l=this.locationFromPosition(u),r=this.locationFromPosition(i),s=(e=this).getBlockAtIndex(l.index),null!=(l.offset=s.findLineBreakInDirectionFromPosition("backward",l.offset))&&(o=e.positionFromLocation(l),e=e.insertBlockBreakAtRange([o,o+1]),r.index+=1,r.offset-=e.getBlockAtIndex(l.index).getLength(),l.index+=1),(l.offset=0)===r.offset&&r.index>l.index?(r.index-=1,r.offset=e.getBlockAtIndex(r.index).getBlockBreakPosition()):("\n"===(n=e.getBlockAtIndex(r.index)).text.getStringAtRange([r.offset-1,r.offset])?r.offset-=1:r.offset=n.findLineBreakInDirectionFromPosition("forward",r.offset),r.offset!==n.getBlockBreakPosition()&&(o=e.positionFromLocation(r),e=e.insertBlockBreakAtRange([o,o+1]))),u=e.positionFromLocation(l),i=e.positionFromLocation(r),{document:e,range:t=b([u,i])}},e.prototype.convertLineBreaksToBlockBreaksInRange=function(t){var e,n,r;return n=(t=b(t))[0],r=this.getStringAtRange(t).slice(0,-1),e=this,r.replace(/.*?\n/g,function(t){return n+=t.length,e=e.insertBlockBreakAtRange([n-1,n])}),{document:e,range:t}},e.prototype.consolidateBlocksAtRange=function(t){var e,n,r,i,o;return o=(r=t=b(t))[0],n=r[1],i=this.locationFromPosition(o).index,e=this.locationFromPosition(n).index,new this.constructor(this.blockList.consolidateFromIndexToIndex(i,e))},e.prototype.getDocumentAtRange=function(t){var e;return t=b(t),e=this.blockList.getSplittableListInRange(t).toArray(),new this.constructor(e)},e.prototype.getStringAtRange=function(t){return this.getDocumentAtRange(t).toString()},e.prototype.getBlockAtIndex=function(t){return this.blockList.getObjectAtIndex(t)},e.prototype.getBlockAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getBlockAtIndex(e)},e.prototype.getTextAtIndex=function(t){var e;return null!=(e=this.getBlockAtIndex(t))?e.text:void 0},e.prototype.getTextAtPosition=function(t){var e;return e=this.locationFromPosition(t).index,this.getTextAtIndex(e)},e.prototype.getPieceAtPosition=function(t){var e,n,r;return e=(r=this.locationFromPosition(t)).index,n=r.offset,this.getTextAtIndex(e).getPieceAtPosition(n)},e.prototype.getCharacterAtPosition=function(t){var e,n,r;return e=(r=this.locationFromPosition(t)).index,n=r.offset,this.getTextAtIndex(e).getStringAtRange([n,n+1])},e.prototype.getLength=function(){return this.blockList.getEndPosition()},e.prototype.getBlocks=function(){return this.blockList.toArray()},e.prototype.getBlockCount=function(){return this.blockList.length},e.prototype.getEditCount=function(){return this.editCount},e.prototype.eachBlock=function(t){return this.blockList.eachObject(t)},e.prototype.eachBlockAtRange=function(t,e){var n,r,i,o,a,s,l,u,c,h,d,p;if(d=(s=t=b(t))[0],i=s[1],h=this.locationFromPosition(d),r=this.locationFromPosition(i),h.index===r.index)return n=this.getBlockAtIndex(h.index),p=[h.offset,r.offset],e(n,p,h.index);for(c=[],a=o=l=h.index,u=r.index;l<=u?o<=u:u<=o;a=l<=u?++o:--o)(n=this.getBlockAtIndex(a))?(p=function(){switch(a){case h.index:return[h.offset,n.text.getLength()];case r.index:return[0,r.offset];default:return[0,n.text.getLength()]}}(),c.push(e(n,p,a))):c.push(void 0);return c},e.prototype.getCommonAttributesAtRange=function(t){var n,e,r;return e=(t=b(t))[0],w(t)?this.getCommonAttributesAtPosition(e):(r=[],n=[],this.eachBlockAtRange(t,function(t,e){return e[0]!==e[1]?(r.push(t.text.getCommonAttributesAtRange(e)),n.push(h(t))):void 0}),L.Hash.fromCommonAttributesOfObjects(r).merge(L.Hash.fromCommonAttributesOfObjects(n)).toObject())},e.prototype.getCommonAttributesAtPosition=function(t){var e,n,r,i,o,a,s,l,u,c;if(o=(u=this.locationFromPosition(t)).index,l=u.offset,!(r=this.getBlockAtIndex(o)))return{};for(s in i=h(r),e=r.text.getAttributesAtPosition(l),n=r.text.getAttributesAtPosition(l-1),a=function(){var t,e;for(s in e=[],t=L.config.textAttributes)(c=t[s]).inheritable&&e.push(s);return e}(),n)((c=n[s])===e[s]||0<=p.call(a,s))&&(i[s]=c);return i},e.prototype.getRangeOfCommonAttributeAtPosition=function(t,e){var n,r,i,o,a,s,l,u;return i=(a=this.locationFromPosition(e)).index,o=a.offset,u=(s=this.getTextAtIndex(i).getExpandedRangeForAttributeAtOffset(t,o))[0],r=s[1],l=this.positionFromLocation({index:i,offset:u}),n=this.positionFromLocation({index:i,offset:r}),b([l,n])},e.prototype.getBaseBlockAttributes=function(){var r,i,t,e,o,a,n;for(r=this.getBlockAtIndex(0).getAttributes(),t=e=1,n=this.getBlockCount();1<=n?e<n:n<e;t=1<=n?++e:--e)i=this.getBlockAtIndex(t).getAttributes(),a=Math.min(r.length,i.length),r=function(){var t,e,n;for(n=[],o=t=0,e=a;(0<=e?t<e:e<t)&&i[o]===r[o];o=0<=e?++t:--t)n.push(i[o]);return n}();return r},h=function(t){var e,n;return n={},(e=t.getLastAttribute())&&(n[e]=!0),n},e.prototype.getAttachmentById=function(t){var e,n,r,i;for(n=0,r=(i=this.getAttachments()).length;n<r;n++)if((e=i[n]).id===t)return e},e.prototype.getAttachmentPieces=function(){var n;return n=[],this.blockList.eachObject(function(t){var e;return e=t.text,n=n.concat(e.getAttachmentPieces())}),n},e.prototype.getAttachments=function(){var t,e,n,r,i;for(i=[],t=0,e=(r=this.getAttachmentPieces()).length;t<e;t++)n=r[t],i.push(n.attachment);return i},e.prototype.getRangeOfAttachment=function(t){var e,n,r,i,o,a,s;for(n=e=i=0,r=(o=this.blockList.toArray()).length;e<r;n=++e){if(s=(a=o[n].text).getRangeOfAttachment(t))return b([i+s[0],i+s[1]]);i+=a.getLength()}},e.prototype.getLocationRangeOfAttachment=function(t){var e;return e=this.getRangeOfAttachment(t),this.locationRangeFromRange(e)},e.prototype.getAttachmentPieceForAttachment=function(t){var e,n,r,i;for(e=0,n=(i=this.getAttachmentPieces()).length;e<n;e++)if((r=i[e]).attachment===t)return r},e.prototype.locationFromPosition=function(t){var e,n;return null!=(n=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t))).index?n:{index:(e=this.getBlocks()).length-1,offset:e[e.length-1].getLength()}},e.prototype.positionFromLocation=function(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)},e.prototype.locationRangeFromPosition=function(t){return b(this.locationFromPosition(t))},e.prototype.locationRangeFromRange=function(t){var e,n,r,i;if(t=b(t))return i=t[0],n=t[1],r=this.locationFromPosition(i),e=this.locationFromPosition(n),b([r,e])},e.prototype.rangeFromLocationRange=function(t){var e,n;return t=b(t),e=this.positionFromLocation(t[0]),w(t)||(n=this.positionFromLocation(t[1])),b([e,n])},e.prototype.isEqualTo=function(t){return this.blockList.isEqualTo(null!=t?t.blockList:void 0)},e.prototype.getTexts=function(){var t,e,n,r,i;for(i=[],e=0,n=(r=this.getBlocks()).length;e<n;e++)t=r[e],i.push(t.text);return i},e.prototype.getPieces=function(){var t,e,n,r,i;for(n=[],t=0,e=(r=this.getTexts()).length;t<e;t++)i=r[t],n.push.apply(n,i.getPieces());return n},e.prototype.getObjects=function(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())},e.prototype.toSerializableDocument=function(){var e;return e=[],this.blockList.eachObject(function(t){return e.push(t.copyWithText(t.text.toSerializableText()))}),new this.constructor(e)},e.prototype.toString=function(){return this.blockList.toString()},e.prototype.toJSON=function(){return this.blockList.toJSON()},e.prototype.toConsole=function(){var i;return JSON.stringify(function(){var t,e,n,r;for(r=[],t=0,e=(n=this.blockList.toArray()).length;t<e;t++)i=n[t],r.push(JSON.parse(i.text.toConsole()));return r}.call(this))},e}(L.Object)}.call(this),function(){L.LineBreakInsertion=function(){function t(t){var e;this.composition=t,this.document=this.composition.document,e=this.composition.getSelectedRange(),this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}return t.prototype.shouldInsertBlockBreak=function(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?0!==this.startLocation.offset:this.breaksOnReturn&&"\n"!==this.nextCharacter},t.prototype.shouldBreakFormattedBlock=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&"\n"===this.nextCharacter||"\n"===this.previousCharacter)},t.prototype.shouldDecreaseListLevel=function(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()},t.prototype.shouldPrependListItem=function(){return this.block.isListItem()&&0===this.startLocation.offset&&!this.block.isEmpty()},t.prototype.shouldRemoveLastBlockAttribute=function(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()},t}()}.call(this),function(){var r,i,a,o,s,l,u,c,h,d,p=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;l=L.normalizeRange,h=L.rangesAreEqual,c=L.rangeIsCollapsed,u=L.objectsAreEqual,r=L.arrayStartsWith,d=L.summarizeArrayChange,a=L.getAllAttributeNames,o=L.getBlockConfig,s=L.getTextConfig,i=L.extend,L.Composition=function(t){function e(){this.document=new L.Document,this.attachments=[],this.currentAttributes={},this.revision=0}var n;return p(e,t),e.prototype.setDocument=function(t){var e;return t.isEqualTo(this.document)?void 0:(this.document=t,this.refreshAttachments(),this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeDocument?e.compositionDidChangeDocument(t):void 0)},e.prototype.getSnapshot=function(){return{document:this.document,selectedRange:this.getSelectedRange()}},e.prototype.loadSnapshot=function(t){var e,n,r,i;return e=t.document,i=t.selectedRange,null!=(n=this.delegate)&&"function"==typeof n.compositionWillLoadSnapshot&&n.compositionWillLoadSnapshot(),this.setDocument(null!=e?e:new L.Document),this.setSelection(null!=i?i:[0,0]),null!=(r=this.delegate)&&"function"==typeof r.compositionDidLoadSnapshot?r.compositionDidLoadSnapshot():void 0},e.prototype.insertText=function(t,e){var n,r,i,o;return o=(null!=e?e:{updatePosition:!0}).updatePosition,r=this.getSelectedRange(),this.setDocument(this.document.insertTextAtRange(t,r)),n=(i=r[0])+t.getLength(),o&&this.setSelection(n),this.notifyDelegateOfInsertionAtRange([i,n])},e.prototype.insertBlock=function(t){var e;return null==t&&(t=new L.Block),e=new L.Document([t]),this.insertDocument(e)},e.prototype.insertDocument=function(t){var e,n,r;return null==t&&(t=new L.Document),n=this.getSelectedRange(),this.setDocument(this.document.insertDocumentAtRange(t,n)),e=(r=n[0])+t.getLength(),this.setSelection(e),this.notifyDelegateOfInsertionAtRange([r,e])},e.prototype.insertString=function(t,e){var n,r;return n=this.getCurrentTextAttributes(),r=L.Text.textForStringWithAttributes(t,n),this.insertText(r,e)},e.prototype.insertBlockBreak=function(){var t,e,n;return e=this.getSelectedRange(),this.setDocument(this.document.insertBlockBreakAtRange(e)),t=(n=e[0])+1,this.setSelection(t),this.notifyDelegateOfInsertionAtRange([n,t])},e.prototype.insertLineBreak=function(){var t,e;return(e=new L.LineBreakInsertion(this)).shouldDecreaseListLevel()?(this.decreaseListLevel(),this.setSelection(e.startPosition)):e.shouldPrependListItem()?(t=new L.Document([e.block.copyWithoutText()]),this.insertDocument(t)):e.shouldInsertBlockBreak()?this.insertBlockBreak():e.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():e.shouldBreakFormattedBlock()?this.breakFormattedBlock(e):this.insertString("\n")},e.prototype.insertHTML=function(t){var e,n,r,i;return i=this.getPosition(),r=this.document.getLength(),e=L.Document.fromHTML(t),this.setDocument(this.document.mergeDocumentAtRange(e,this.getSelectedRange())),n=i+(this.document.getLength()-r),this.setSelection(n),this.notifyDelegateOfInsertionAtRange([n,n])},e.prototype.replaceHTML=function(t){var e,n,r;return e=L.Document.fromHTML(t).copyUsingObjectsFromDocument(this.document),n=this.getLocationRange({strict:!1}),r=this.document.rangeFromLocationRange(n),this.setDocument(e),this.setSelection(r)},e.prototype.insertFile=function(t){var e,n;return(null!=(n=this.delegate)?n.compositionShouldAcceptFile(t):void 0)?(e=L.Attachment.attachmentForFile(t),this.insertAttachment(e)):void 0},e.prototype.insertFiles=function(t){var e,n,r,i,o,a,s;for(s=new L.Text,i=0,o=t.length;i<o;i++)r=t[i],(null!=(a=this.delegate)?a.compositionShouldAcceptFile(r):void 0)&&(e=L.Attachment.attachmentForFile(r),n=L.Text.textForAttachmentWithAttributes(e,this.currentAttributes),s=s.appendText(n));return this.insertText(s)},e.prototype.insertAttachment=function(t){var e;return e=L.Text.textForAttachmentWithAttributes(t,this.currentAttributes),this.insertText(e)},e.prototype.deleteInDirection=function(t){var e,n,r,i,o,a,s;return i=this.getLocationRange(),o=this.getSelectedRange(),(a=c(o))?r="backward"===t&&0===i[0].offset:s=i[0].index!==i[1].index,!(r&&this.canDecreaseBlockAttributeLevel()&&((n=this.getBlock()).isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(o[0]),n.isEmpty()))&&(a&&(o=this.getExpandedRangeInDirection(t),"backward"===t&&(e=this.getAttachmentAtRange(o))),e?(this.editAttachment(e),!1):(this.setDocument(this.document.removeTextAtRange(o)),this.setSelection(o[0]),!r&&!s&&void 0))},e.prototype.moveTextFromRange=function(t){var e;return e=this.getSelectedRange()[0],this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)},e.prototype.removeAttachment=function(t){var e;return(e=this.document.getRangeOfAttachment(t))?(this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])):void 0},e.prototype.removeLastBlockAttribute=function(){var t,e,n,r;return r=(n=this.getSelectedRange())[0],e=n[1],t=this.document.getBlockAtPosition(e),
this.removeCurrentAttribute(t.getLastAttribute()),this.setSelection(r)},n=" ",e.prototype.insertPlaceholder=function(){return this.placeholderPosition=this.getPosition(),this.insertString(n)},e.prototype.selectPlaceholder=function(){return null!=this.placeholderPosition?(this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+n.length]),this.getSelectedRange()):void 0},e.prototype.forgetPlaceholder=function(){return this.placeholderPosition=null},e.prototype.hasCurrentAttribute=function(t){var e;return null!=(e=this.currentAttributes[t])&&!1!==e},e.prototype.toggleCurrentAttribute=function(t){var e;return(e=!this.currentAttributes[t])?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)},e.prototype.canSetCurrentAttribute=function(t){return o(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)},e.prototype.canSetCurrentTextAttribute=function(t){switch(t){case"href":return!this.selectionContainsAttachmentWithAttribute(t);default:return!0}},e.prototype.canSetCurrentBlockAttribute=function(){var t;if(t=this.getBlock())return!t.isTerminalBlock()},e.prototype.setCurrentAttribute=function(t,e){return o(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())},e.prototype.setTextAttribute=function(t,e){var n,r;if(n=this.getSelectedRange())return n[0]!==n[1]?this.setDocument(this.document.addAttributeAtRange(t,e,n)):"href"===t?(r=L.Text.textForStringWithAttributes(e,{href:e}),this.insertText(r)):void 0},e.prototype.setBlockAttribute=function(t,e){var n;if(n=this.getSelectedRange())return this.canSetCurrentAttribute(t)?(this.getBlock(),this.setDocument(this.document.applyBlockAttributeAtRange(t,e,n)),this.setSelection(n)):void 0},e.prototype.removeCurrentAttribute=function(t){return o(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())},e.prototype.removeTextAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},e.prototype.removeBlockAttribute=function(t){var e;if(e=this.getSelectedRange())return this.setDocument(this.document.removeAttributeAtRange(t,e))},e.prototype.canDecreaseNestingLevel=function(){var t;return 0<(null!=(t=this.getBlock())?t.getNestingLevel():void 0)},e.prototype.canIncreaseNestingLevel=function(){var t,e,n;if(t=this.getBlock())return null!=(n=o(t.getLastNestableAttribute()))&&n.listAttribute?(e=this.getPreviousBlock())?r(e.getListItemAttributes(),t.getListItemAttributes()):void 0:0<t.getNestingLevel()},e.prototype.decreaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))},e.prototype.increaseNestingLevel=function(){var t;if(t=this.getBlock())return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))},e.prototype.canDecreaseBlockAttributeLevel=function(){var t;return 0<(null!=(t=this.getBlock())?t.getAttributeLevel():void 0)},e.prototype.decreaseBlockAttributeLevel=function(){var t,e;return(t=null!=(e=this.getBlock())?e.getLastAttribute():void 0)?this.removeCurrentAttribute(t):void 0},e.prototype.decreaseListLevel=function(){var t,e,n,r,i,o;for(o=this.getSelectedRange()[0],n=i=this.document.locationFromPosition(o).index,t=this.getBlock().getAttributeLevel();(e=this.document.getBlockAtIndex(n+1))&&e.isListItem()&&e.getAttributeLevel()>t;)n++;return o=this.document.positionFromLocation({index:i,offset:0}),r=this.document.positionFromLocation({index:n,offset:0}),this.setDocument(this.document.removeLastListAttributeAtRange([o,r]))},e.prototype.updateCurrentAttributes=function(){var t,e,n,r,i,o;if(o=this.getSelectedRange({ignoreLock:!0})){for(e=this.document.getCommonAttributesAtRange(o),n=0,r=(i=a()).length;n<r;n++)e[t=i[n]]||this.canSetCurrentAttribute(t)||(e[t]=!1);if(!u(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}},e.prototype.getCurrentAttributes=function(){return i.call({},this.currentAttributes)},e.prototype.getCurrentTextAttributes=function(){var t,e,n,r;for(e in t={},n=this.currentAttributes)r=n[e],s(e)&&(t[e]=r);return t},e.prototype.freezeSelection=function(){return this.setCurrentAttribute("frozen",!0)},e.prototype.thawSelection=function(){return this.removeCurrentAttribute("frozen")},e.prototype.hasFrozenSelection=function(){return this.hasCurrentAttribute("frozen")},e.proxyMethod("getSelectionManager().getPointRange"),e.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),e.proxyMethod("getSelectionManager().locationIsCursorTarget"),e.proxyMethod("getSelectionManager().selectionIsExpanded"),e.proxyMethod("delegate?.getSelectionManager"),e.prototype.setSelection=function(t){var e,n;return e=this.document.locationRangeFromRange(t),null!=(n=this.delegate)?n.compositionDidRequestChangingSelectionToLocationRange(e):void 0},e.prototype.getSelectedRange=function(){var t;return(t=this.getLocationRange())?this.document.rangeFromLocationRange(t):void 0},e.prototype.setSelectedRange=function(t){var e;return e=this.document.locationRangeFromRange(t),this.getSelectionManager().setLocationRange(e)},e.prototype.getPosition=function(){var t;return(t=this.getLocationRange())?this.document.positionFromLocation(t[0]):void 0},e.prototype.getLocationRange=function(t){var e;return null!=(e=this.getSelectionManager().getLocationRange(t))?e:l({index:0,offset:0})},e.prototype.getExpandedRangeInDirection=function(t){var e,n,r;return r=(n=this.getSelectedRange())[0],e=n[1],"backward"===t?r=this.translateUTF16PositionFromOffset(r,-1):e=this.translateUTF16PositionFromOffset(e,1),l([r,e])},e.prototype.moveCursorInDirection=function(t){var e,n,r,i;return this.editingAttachment?r=this.document.getRangeOfAttachment(this.editingAttachment):(i=this.getSelectedRange(),r=this.getExpandedRangeInDirection(t),n=!h(i,r)),this.setSelectedRange("backward"===t?r[0]:r[1]),n&&(e=this.getAttachmentAtRange(r))?this.editAttachment(e):void 0},e.prototype.expandSelectionInDirection=function(t){var e;return e=this.getExpandedRangeInDirection(t),this.setSelectedRange(e)},e.prototype.expandSelectionForEditing=function(){return this.hasCurrentAttribute("href")?this.expandSelectionAroundCommonAttribute("href"):void 0},e.prototype.expandSelectionAroundCommonAttribute=function(t){var e,n;return e=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(t,e),this.setSelectedRange(n)},e.prototype.selectionContainsAttachmentWithAttribute=function(t){var e,n,r,i;if(i=this.getSelectedRange()){for(e=0,n=(r=this.document.getDocumentAtRange(i).getAttachments()).length;e<n;e++)if(r[e].hasAttribute(t))return!0;return!1}},e.prototype.selectionIsInCursorTarget=function(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())},e.prototype.positionIsCursorTarget=function(t){var e;return(e=this.document.locationFromPosition(t))?this.locationIsCursorTarget(e):void 0},e.prototype.positionIsBlockBreak=function(t){var e;return null!=(e=this.document.getPieceAtPosition(t))?e.isBlockBreak():void 0},e.prototype.getSelectedDocument=function(){var t;return(t=this.getSelectedRange())?this.document.getDocumentAtRange(t):void 0},e.prototype.getAttachments=function(){return this.attachments.slice(0)},e.prototype.refreshAttachments=function(){var t,e,n,r,i,o,a,s,l,u,c,h;for(n=this.document.getAttachments(),t=(s=d(this.attachments,n)).added,c=s.removed,this.attachments=n,r=0,o=c.length;r<o;r++)((e=c[r]).delegate=null)!=(l=this.delegate)&&"function"==typeof l.compositionDidRemoveAttachment&&l.compositionDidRemoveAttachment(e);for(h=[],i=0,a=t.length;i<a;i++)(e=t[i]).delegate=this,h.push(null!=(u=this.delegate)&&"function"==typeof u.compositionDidAddAttachment?u.compositionDidAddAttachment(e):void 0);return h},e.prototype.attachmentDidChangeAttributes=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidEditAttachment?e.compositionDidEditAttachment(t):void 0},e.prototype.attachmentDidChangePreviewURL=function(t){var e;return this.revision++,null!=(e=this.delegate)&&"function"==typeof e.compositionDidChangeAttachmentPreviewURL?e.compositionDidChangeAttachmentPreviewURL(t):void 0},e.prototype.editAttachment=function(t){var e;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,null!=(e=this.delegate)&&"function"==typeof e.compositionDidStartEditingAttachment?e.compositionDidStartEditingAttachment(this.editingAttachment):void 0},e.prototype.stopEditingAttachment=function(){var t;if(this.editingAttachment)return null!=(t=this.delegate)&&"function"==typeof t.compositionDidStopEditingAttachment&&t.compositionDidStopEditingAttachment(this.editingAttachment),this.editingAttachment=null},e.prototype.canEditAttachmentCaption=function(){var t;return null!=(t=this.editingAttachment)?t.isPreviewable():void 0},e.prototype.updateAttributesForAttachment=function(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))},e.prototype.removeAttributeForAttachment=function(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))},e.prototype.breakFormattedBlock=function(t){var e,n,r,i,o;return n=t.document,e=t.block,o=[(i=t.startPosition)-1,i],e.getBlockBreakPosition()===t.startLocation.offset?(e.breaksOnReturn()&&"\n"===t.nextCharacter?i+=1:n=n.removeTextAtRange(o),o=[i,i]):"\n"===t.nextCharacter?"\n"===t.previousCharacter?o=[i-1,i+1]:(o=[i,i+1],i+=1):t.startLocation.offset-1!=0&&(i+=1),r=new L.Document([e.removeLastAttribute().copyWithoutText()]),this.setDocument(n.insertDocumentAtRange(r,o)),this.setSelection(i)},e.prototype.getPreviousBlock=function(){var t,e;return(e=this.getLocationRange())&&0<(t=e[0].index)?this.document.getBlockAtIndex(t-1):void 0},e.prototype.getBlock=function(){var t;return(t=this.getLocationRange())?this.document.getBlockAtIndex(t[0].index):void 0},e.prototype.getAttachmentAtRange=function(t){var e;return(e=this.document.getDocumentAtRange(t)).toString()===L.OBJECT_REPLACEMENT_CHARACTER+"\n"?e.getAttachments()[0]:void 0},e.prototype.notifyDelegateOfCurrentAttributesChange=function(){var t;return null!=(t=this.delegate)&&"function"==typeof t.compositionDidChangeCurrentAttributes?t.compositionDidChangeCurrentAttributes(this.currentAttributes):void 0},e.prototype.notifyDelegateOfInsertionAtRange=function(t){var e;return null!=(e=this.delegate)&&"function"==typeof e.compositionDidPerformInsertionAtRange?e.compositionDidPerformInsertionAtRange(t):void 0},e.prototype.translateUTF16PositionFromOffset=function(t,e){var n,r;return n=(r=this.document.toUTF16String()).offsetFromUCS2Offset(t),r.offsetToUCS2Offset(n+e)},e}(L.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.UndoManager=function(t){function e(t){this.composition=t,this.undoEntries=[],this.redoEntries=[]}var s;return n(e,t),e.prototype.recordUndoEntry=function(t,e){var n,r,i,o,a;return r=(o=null!=e?e:{}).context,n=o.consolidatable,i=this.undoEntries.slice(-1)[0],n&&s(i,t,r)?void 0:(a=this.createEntry({description:t,context:r}),this.undoEntries.push(a),this.redoEntries=[])},e.prototype.undo=function(){var t,e;return(e=this.undoEntries.pop())?(t=this.createEntry(e),this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)):void 0},e.prototype.redo=function(){var t,e;return(t=this.redoEntries.pop())?(e=this.createEntry(t),this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)):void 0},e.prototype.canUndo=function(){return 0<this.undoEntries.length},e.prototype.canRedo=function(){return 0<this.redoEntries.length},e.prototype.createEntry=function(t){var e,n,r;return n=(r=null!=t?t:{}).description,e=r.context,{description:null!=n?n.toString():void 0,context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}},s=function(t,e,n){return(null!=t?t.description:void 0)===(null!=e?e.toString():void 0)&&(null!=t?t.context:void 0)===JSON.stringify(n)},e}(L.BasicObject)}.call(this),function(){L.Editor=function(){function t(t,e,n){this.composition=t,this.selectionManager=e,this.element=n,this.undoManager=new L.UndoManager(this.composition)}return t.prototype.loadDocument=function(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})},t.prototype.loadHTML=function(t){return null==t&&(t=""),this.loadDocument(L.Document.fromHTML(t,{referenceElement:this.element}))},t.prototype.loadJSON=function(t){var e,n;return e=t.document,n=t.selectedRange,e=L.Document.fromJSON(e),this.loadSnapshot({document:e,selectedRange:n})},t.prototype.loadSnapshot=function(t){return this.undoManager=new L.UndoManager(this.composition),this.composition.loadSnapshot(t)},t.prototype.getDocument=function(){return this.composition.document},t.prototype.getSelectedDocument=function(){return this.composition.getSelectedDocument()},t.prototype.getSnapshot=function(){return this.composition.getSnapshot()},t.prototype.toJSON=function(){return this.getSnapshot()},t.prototype.deleteInDirection=function(t){return this.composition.deleteInDirection(t)},t.prototype.insertAttachment=function(t){return this.composition.insertAttachment(t)},t.prototype.insertDocument=function(t){return this.composition.insertDocument(t)},t.prototype.insertFile=function(t){return this.composition.insertFile(t)},t.prototype.insertHTML=function(t){return this.composition.insertHTML(t)},t.prototype.insertString=function(t){return this.composition.insertString(t)},t.prototype.insertText=function(t){return this.composition.insertText(t)},t.prototype.insertLineBreak=function(){return this.composition.insertLineBreak()},t.prototype.getSelectedRange=function(){return this.composition.getSelectedRange()},t.prototype.getPosition=function(){return this.composition.getPosition()},t.prototype.getClientRectAtPosition=function(t){var e;return e=this.getDocument().locationRangeFromRange([t,t+1]),this.selectionManager.getClientRectAtLocationRange(e)},t.prototype.expandSelectionInDirection=function(t){return this.composition.expandSelectionInDirection(t)},t.prototype.moveCursorInDirection=function(t){return this.composition.moveCursorInDirection(t)},t.prototype.setSelectedRange=function(t){return this.composition.setSelectedRange(t)},t.prototype.activateAttribute=function(t,e){return null==e&&(e=!0),this.composition.setCurrentAttribute(t,e)},t.prototype.attributeIsActive=function(t){return this.composition.hasCurrentAttribute(t)},t.prototype.canActivateAttribute=function(t){return this.composition.canSetCurrentAttribute(t)},t.prototype.deactivateAttribute=function(t){return this.composition.removeCurrentAttribute(t)},t.prototype.canDecreaseNestingLevel=function(){return this.composition.canDecreaseNestingLevel()},t.prototype.canIncreaseNestingLevel=function(){return this.composition.canIncreaseNestingLevel()},t.prototype.decreaseNestingLevel=function(){return this.canDecreaseNestingLevel()?this.composition.decreaseNestingLevel():void 0},t.prototype.increaseNestingLevel=function(){return this.canIncreaseNestingLevel()?this.composition.increaseNestingLevel():void 0},t.prototype.canDecreaseIndentationLevel=function(){return this.canDecreaseNestingLevel()},t.prototype.canIncreaseIndentationLevel=function(){return this.canIncreaseNestingLevel()},t.prototype.decreaseIndentationLevel=function(){return this.decreaseNestingLevel()},t.prototype.increaseIndentationLevel=function(){return this.increaseNestingLevel()},t.prototype.canRedo=function(){return this.undoManager.canRedo()},t.prototype.canUndo=function(){return this.undoManager.canUndo()},t.prototype.recordUndoEntry=function(t,e){var n,r,i;return r=(i=null!=e?e:{}).context,n=i.consolidatable,this.undoManager.recordUndoEntry(t,{context:r,consolidatable:n})},t.prototype.redo=function(){return this.canRedo()?this.undoManager.redo():void 0},t.prototype.undo=function(){return this.canUndo()?this.undoManager.undo():void 0},t}()}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.ManagedAttachment=function(t){function e(t,e){var n;this.attachmentManager=t,this.attachment=e,n=this.attachment,this.id=n.id,this.file=n.file}return n(e,t),e.prototype.remove=function(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)},e.proxyMethod("attachment.getAttribute"),e.proxyMethod("attachment.hasAttribute"),e.proxyMethod("attachment.setAttribute"),e.proxyMethod("attachment.getAttributes"),e.proxyMethod("attachment.setAttributes"),e.proxyMethod("attachment.isPending"),e.proxyMethod("attachment.isPreviewable"),e.proxyMethod("attachment.getURL"),e.proxyMethod("attachment.getHref"),e.proxyMethod("attachment.getFilename"),e.proxyMethod("attachment.getFilesize"),e.proxyMethod("attachment.getFormattedFilesize"),e.proxyMethod("attachment.getExtension"),e.proxyMethod("attachment.getContentType"),e.proxyMethod("attachment.getFile"),e.proxyMethod("attachment.setFile"),e.proxyMethod("attachment.releaseFile"),e.proxyMethod("attachment.getUploadProgress"),e.proxyMethod("attachment.setUploadProgress"),e}(L.BasicObject)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;L.AttachmentManager=function(t){function e(t){var e,n,r;for(null==t&&(t=[]),this.managedAttachments={},n=0,r=t.length;n<r;n++)e=t[n],this.manageAttachment(e)}return n(e,t),e.prototype.getAttachments=function(){var t,e,n,r;for(e in r=[],n=this.managedAttachments)t=n[e],r.push(t);return r},e.prototype.manageAttachment=function(t){var e,n;return null!=(e=this.managedAttachments)[n=t.id]?e[n]:e[n]=new L.ManagedAttachment(this,t)},e.prototype.attachmentIsManaged=function(t){return t.id in this.managedAttachments},e.prototype.requestRemovalOfAttachment=function(t){var e;return this.attachmentIsManaged(t)&&null!=(e=this.delegate)&&"function"==typeof e.attachmentManagerDidRequestRemovalOfAttachment?e.attachmentManagerDidRequestRemovalOfAttachment(t):void 0},e.prototype.unmanageAttachment=function(t){var e;return e=this.managedAttachments[t.id],delete this.managedAttachments[t.id],e},e}(L.BasicObject)}.call(this),function(){var d,p,n,s,f,l,g,r,m,i,v;d=L.elementContainsNode,p=L.findChildIndexOfNode,f=L.nodeIsBlockStart,l=L.nodeIsBlockStartComment,s=L.nodeIsBlockContainer,g=L.nodeIsCursorTarget,r=L.nodeIsEmptyTextNode,m=L.nodeIsTextNode,n=L.nodeIsAttachmentElement,i=L.tagName,v=L.walkTree,L.LocationMapper=function(){function t(t){this.element=t}var a,c,h,e;return t.prototype.findLocationFromContainerAndOffset=function(t,e,n){var r,i,o,a,s,l,u;for(l=(null!=n?n:{strict:!0}).strict,o=!1,a={index:i=0,offset:0},(r=this.findAttachmentElementParentForNode(t))&&(t=r.parentNode,e=p(r)),u=v(this.element,{usingFilter:h});u.nextNode();){if((s=u.currentNode)===t&&m(t)){g(s)||(a.offset+=e);break}if(s.parentNode===t){if(i++===e)break}else if(!d(t,s)&&0<i)break;f(s,{strict:l})?(o&&a.index++,o=!(a.offset=0)):a.offset+=c(s)}return a},t.prototype.findContainerAndOffsetFromLocation=function(t){var e,n,r,i,o;if(0===t.index&&0===t.offset){for(e=this.element,i=0;e.firstChild;)if(e=e.firstChild,s(e)){i=1;break}return[e,i]}if(n=(o=this.findNodeAndOffsetFromLocation(t))[0],r=o[1],n){if(m(n))(e=n).textContent,i=t.offset-r;else{if(e=n.parentNode,!f(n.previousSibling)&&!s(e))for(;n===e.lastChild&&(e=(n=e).parentNode,!s(e)););i=p(n),0!==t.offset&&i++}return[e,i]}},t.prototype.findNodeAndOffsetFromLocation=function(t){var e,n,r,i,o,a,s,l;for(n=s=0,r=(l=this.getSignificantNodesForIndex(t.index)).length;n<r;n++){if(e=l[n],i=c(e),t.offset<=s+i)if(m(e)){if(o=e,a=s,t.offset===a&&g(o))break}else o||(o=e,a=s);if((s+=i)>t.offset)break}return[o,a]},t.prototype.findAttachmentElementParentForNode=function(t){for(;t&&t!==this.element;){if(n(t))return t;t=t.parentNode}},t.prototype.getSignificantNodesForIndex=function(t){var e,n,r,i,o;for(r=[],o=v(this.element,{usingFilter:a}),i=!1;o.nextNode();)if(n=o.currentNode,l(n)){if(null!=e?e++:e=0,e===t)i=!0;else if(i)break}else i&&r.push(n);return r},c=function(t){return t.nodeType===Node.TEXT_NODE?g(t)?0:t.textContent.length:"br"===i(t)||n(t)?1:0},a=function(t){return e(t)===NodeFilter.FILTER_ACCEPT?h(t):NodeFilter.FILTER_REJECT},e=function(t){return r(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},h=function(t){return n(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},t}()}.call(this),function(){var c,h,n=[].slice;c=L.getDOMRange,h=L.setDOMRange,L.PointMapper=function(){function t(){}return t.prototype.createDOMRangeFromPoint=function(t){var e,n,r,i,o,a,s,l;if(s=t.x,l=t.y,document.caretPositionFromPoint)return r=(o=document.caretPositionFromPoint(s,l)).offsetNode,n=o.offset,(e=document.createRange()).setStart(r,n),e;if(document.caretRangeFromPoint)return document.caretRangeFromPoint(s,l);if(document.body.createTextRange){i=c();try{(a=document.body.createTextRange()).moveToPoint(s,l),a.select()}catch(u){}return e=c(),h(i),e}},t.prototype.getClientRectsForDOMRange=function(t){var e;return[(e=n.call(t.getClientRects()))[0],e[e.length-1]]},t}()}.call(this),function(){var r,i=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=L.getDOMRange,L.SelectionChangeObserver=function(t){function e(){this.run=i(this.run,this),this.update=i(this.update,this),this.selectionManagers=[]}var n;return o(e,t),e.prototype.start=function(){return this.started?void 0:(this.started=!0,"onselectionchange"in document?document.addEventListener("selectionchange",this.update,!0):this.run())},e.prototype.stop=function(){return this.started?(this.started=!1,document.removeEventListener("selectionchange",this.update,!0)):void 0},e.prototype.registerSelectionManager=function(t){return s.call(this.selectionManagers,t)<0?(this.selectionManagers.push(t),this.start()):void 0},e.prototype.unregisterSelectionManager=function(i){var o;return this.selectionManagers=function(){var t,e,n,r;for(r=[],t=0,e=(n=this.selectionManagers).length;t<e;t++)(o=n[t])!==i&&r.push(o);return r}.call(this),0===this.selectionManagers.length?this.stop():void 0},e.prototype.notifySelectionManagersOfSelectionChange=function(){var t,e,n,r,i;for(r=[],t=0,e=(n=this.selectionManagers).length;t<e;t++)i=n[t],r.push(i.selectionDidChange());return r},e.prototype.update=function(){var t;return t=r(),n(t,this.domRange)?void 0:(this.domRange=t,this.notifySelectionManagersOfSelectionChange())},e.prototype.reset=function(){return this.domRange=null,this.update()},e.prototype.run=function(){return this.started?(this.update(),requestAnimationFrame(this.run)):void 0},n=function(t,e){return(null!=t?t.startContainer:void 0)===(null!=e?e.startContainer:void 0)&&(null!=t?t.startOffset:void 0)===(null!=e?e.startOffset:void 0)&&(null!=t?t.endContainer:void 0)===(null!=e?e.endContainer:void 0)&&(null!=t?t.endOffset:void 0)===(null!=e?e.endOffset:void 0)},e}(L.BasicObject),null==L.selectionChangeObserver&&(L.selectionChangeObserver=new L.SelectionChangeObserver)}.call(this),function(){var s,n,r,l,i,o,a,u,c,h,d=function(t,e){return function(){return t.apply(e,arguments)}},p=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;r=L.getDOMSelection,n=L.getDOMRange,h=L.setDOMRange,s=L.elementContainsNode,o=L.nodeIsCursorTarget,i=L.innerElementIsActive,l=L.handleEvent,a=L.normalizeRange,u=L.rangeIsCollapsed,c=L.rangesAreEqual,L.SelectionManager=function(t){function e(t){this.element=t,this.selectionDidChange=d(this.selectionDidChange,this),this.didMouseDown=d(this.didMouseDown,this),this.locationMapper=new L.LocationMapper(this.element),this.pointMapper=new L.PointMapper,this.lockCount=0,l("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}return p(e,t),e.prototype.getLocationRange=function(t){var e;return null==t&&(t={}),!1===t.strict?this.createLocationRangeFromDOMRange(n(),{strict:!1}):t.ignoreLock?this.currentLocationRange:null!=(e=this.lockedLocationRange)?e:this.currentLocationRange},e.prototype.setLocationRange=function(t){var e;if(!this.lockedLocationRange)return t=a(t),(e=this.createDOMRangeFromLocationRange(t))?(h(e),this.updateCurrentLocationRange(t)):void 0},e.prototype.setLocationRangeFromPointRange=function(t){var e,n;return t=a(t),n=this.getLocationAtPoint(t[0]),e=this.getLocationAtPoint(t[1]),this.setLocationRange([n,e])},e.prototype.getClientRectAtLocationRange=function(t){var e;return(e=this.createDOMRangeFromLocationRange(t))?this.getClientRectsForDOMRange(e)[1]:void 0},e.prototype.locationIsCursorTarget=function(t){var e,n;return e=(n=this.findNodeAndOffsetFromLocation(t))[0],n[1],o(e)},e.prototype.lock=function(){return 0==this.lockCount++?(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange()):void 0},e.prototype.unlock=function(){var t;return 0==--this.lockCount&&(t=this.lockedLocationRange,(this.lockedLocationRange=null)!=t)?this.setLocationRange(t):void 0},e.prototype.clearSelection=function(){var t;return null!=(t=r())?t.removeAllRanges():void 0},e.prototype.selectionIsCollapsed=function(){var t;return!0===(null!=(t=n())?t.collapsed:void 0)},e.prototype.selectionIsExpanded=function(){return!this.selectionIsCollapsed()},e.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),e.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),e.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),e.proxyMethod("pointMapper.createDOMRangeFromPoint"),e.proxyMethod("pointMapper.getClientRectsForDOMRange"),e.prototype.didMouseDown=function(){return this.pauseTemporarily()},e.prototype.pauseTemporarily=function(){var i,o,n,r,a;return this.paused=!0,a=this,o=function(){var t,e;for(a.paused=!1,clearTimeout(r),t=0,e=n.length;t<e;t++)n[t].destroy();return s(document,a.element)?a.selectionDidChange():void 0},r=setTimeout(o,200),n=function(){var t,e,n,r;for(r=[],t=0,e=(n=["mousemove","keydown"]).length;t<e;t++)i=n[t],r.push(l(i,{onElement:document,withCallback:o}));return r}()},e.prototype.selectionDidChange=function(){return this.paused||i(this.element)?void 0:this.updateCurrentLocationRange()},e.prototype.updateCurrentLocationRange=function(t){var e;return(null!=t?t:t=this.createLocationRangeFromDOMRange(n()))&&!c(t,this.currentLocationRange)?(this.currentLocationRange=t,null!=(e=this.delegate)&&"function"==typeof e.locationRangeDidChange?e.locationRangeDidChange(this.currentLocationRange.slice(0)):void 0):void 0},e.prototype.createDOMRangeFromLocationRange=function(t){var e,n,r,i;return r=this.findContainerAndOffsetFromLocation(t[0]),n=u(t)?r:null!=(i=this.findContainerAndOffsetFromLocation(t[1]))?i:r,null!=r&&null!=n?((e=document.createRange()).setStart.apply(e,r),e.setEnd.apply(e,n),e):void 0},e.prototype.createLocationRangeFromDOMRange=function(t,e){var n,r;if(null!=t&&this.domRangeWithinElement(t)&&(r=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e)))return t.collapsed||(n=this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e)),a([r,n])},e.prototype.getLocationAtPoint=function(t){var e,n;return(e=this.createDOMRangeFromPoint(t))&&null!=(n=this.createLocationRangeFromDOMRange(e))?n[0]:void 0},e.prototype.domRangeWithinElement=function(t){return t.collapsed?s(this.element,t.startContainer):s(this.element,t.startContainer)&&s(this.element,t.endContainer)},e}(L.BasicObject)}.call(this),function(){var n,r,i,o=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,s=[].slice;r=L.rangeIsCollapsed,i=L.rangesAreEqual,n=L.objectsAreEqual,L.EditorController=function(t){function e(t){var e,n;this.editorElement=t.editorElement,e=t.document,n=t.html,this.selectionManager=new L.SelectionManager(this.editorElement),(this.selectionManager.delegate=this).composition=new L.Composition,(this.composition.delegate=this).attachmentManager=new L.AttachmentManager(this.composition.getAttachments()),(this.attachmentManager.delegate=this).inputController=new L.InputController(this.editorElement),(this.inputController.delegate=this).inputController.responder=this.composition,this.compositionController=new L.CompositionController(this.editorElement,this.composition),(this.compositionController.delegate=this).toolbarController=new L.ToolbarController(this.editorElement.toolbarElement),(this.toolbarController.delegate=this).editor=new L.Editor(this.composition,this.selectionManager,this.editorElement),null!=e?this.editor.loadDocument(e):this.editor.loadHTML(n)}return o(e,t),e.prototype.registerSelectionManager=function(){return L.selectionChangeObserver.registerSelectionManager(this.selectionManager)},e.prototype.unregisterSelectionManager=function(){return L.selectionChangeObserver.unregisterSelectionManager(this.selectionManager)},e.prototype.compositionDidChangeDocument=function(){return this.editorElement.notify("document-change"),this.handlingInput?void 0:this.render()},e.prototype.compositionDidChangeCurrentAttributes=function(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.editorElement.notify("attributes-change",{attributes:this.currentAttributes})},e.prototype.compositionDidPerformInsertionAtRange=function(t){return this.pasting?this.pastedRange=t:void 0},e.prototype.compositionShouldAcceptFile=function(t){return this.editorElement.notify("file-accept",{file:t})},e.prototype.compositionDidAddAttachment=function(t){var e;return e=this.attachmentManager.manageAttachment(t),this.editorElement.notify("attachment-add",{attachment:e})},e.prototype.compositionDidEditAttachment=function(t){var e;return this.compositionController.rerenderViewForObject(t),e=this.attachmentManager.manageAttachment(t),this.editorElement.notify("attachment-edit",{attachment:e}),this.editorElement.notify("change")},e.prototype.compositionDidChangeAttachmentPreviewURL=function(t){return this.compositionController.invalidateViewForObject(t),this.editorElement.notify("change")},e.prototype.compositionDidRemoveAttachment=function(t){var e;return e=this.attachmentManager.unmanageAttachment(t),this.editorElement.notify("attachment-remove",{attachment:e})},e.prototype.compositionDidStartEditingAttachment=function(t){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t),this.selectionManager.setLocationRange(this.attachmentLocationRange)},e.prototype.compositionDidStopEditingAttachment=function(){return this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null},e.prototype.compositionDidRequestChangingSelectionToLocationRange=function(t){return!this.loadingSnapshot||this.isFocused()?(this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()):void 0},e.prototype.compositionWillLoadSnapshot=function(){return this.loadingSnapshot=!0},e.prototype.compositionDidLoadSnapshot=function(){return this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1},e.prototype.getSelectionManager=function(){return this.selectionManager},e.proxyMethod("getSelectionManager().setLocationRange"),e.proxyMethod("getSelectionManager().getLocationRange"),e.prototype.attachmentManagerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},e.prototype.compositionControllerWillSyncDocumentView=function(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()},e.prototype.compositionControllerDidSyncDocumentView=function(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.editorElement.notify("sync")},e.prototype.compositionControllerDidRender=function(){return null!=this.requestedLocationRange&&(
this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.composition.updateCurrentAttributes(),this.editorElement.notify("render")),this.renderedCompositionRevision=this.composition.revision},e.prototype.compositionControllerDidFocus=function(){return this.toolbarController.hideDialog(),this.editorElement.notify("focus")},e.prototype.compositionControllerDidBlur=function(){return this.editorElement.notify("blur")},e.prototype.compositionControllerDidSelectAttachment=function(t){return this.composition.editAttachment(t)},e.prototype.compositionControllerDidRequestDeselectingAttachment=function(t){var e,n;return e=null!=(n=this.attachmentLocationRange)?n:this.composition.document.getLocationRangeOfAttachment(t),this.selectionManager.setLocationRange(e[1])},e.prototype.compositionControllerWillUpdateAttachment=function(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})},e.prototype.compositionControllerDidRequestRemovalOfAttachment=function(t){return this.removeAttachment(t)},e.prototype.inputControllerWillHandleInput=function(){return this.handlingInput=!0,this.requestedRender=!1},e.prototype.inputControllerDidRequestRender=function(){return this.requestedRender=!0},e.prototype.inputControllerDidHandleInput=function(){return this.handlingInput=!1,this.requestedRender?(this.requestedRender=!1,this.render()):void 0},e.prototype.inputControllerDidAllowUnhandledInput=function(){return this.editorElement.notify("change")},e.prototype.inputControllerDidRequestReparse=function(){return this.reparse()},e.prototype.inputControllerWillPerformTyping=function(){return this.recordTypingUndoEntry()},e.prototype.inputControllerWillCutText=function(){return this.editor.recordUndoEntry("Cut")},e.prototype.inputControllerWillPasteText=function(){return this.editor.recordUndoEntry("Paste"),this.pasting=!0},e.prototype.inputControllerDidPaste=function(t){var e;return e=this.pastedRange,this.pastedRange=null,this.pasting=null,this.editorElement.notify("paste",{pasteData:t,range:e})},e.prototype.inputControllerWillMoveText=function(){return this.editor.recordUndoEntry("Move")},e.prototype.inputControllerWillAttachFiles=function(){return this.editor.recordUndoEntry("Drop Files")},e.prototype.inputControllerDidReceiveKeyboardCommand=function(t){return this.toolbarController.applyKeyboardCommand(t)},e.prototype.inputControllerDidStartDrag=function(){return this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()},e.prototype.inputControllerDidReceiveDragOverPoint=function(t){return this.selectionManager.setLocationRangeFromPointRange(t)},e.prototype.inputControllerDidCancelDrag=function(){return this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null},e.prototype.locationRangeDidChange=function(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!i(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.editorElement.notify("selection-change")},e.prototype.toolbarDidClickButton=function(){return this.getLocationRange()?void 0:this.setLocationRange({index:0,offset:0})},e.prototype.toolbarDidInvokeAction=function(t){return this.invokeAction(t)},e.prototype.toolbarDidToggleAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.toggleCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarDidUpdateAttribute=function(t,e){return this.recordFormattingUndoEntry(),this.composition.setCurrentAttribute(t,e),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarDidRemoveAttribute=function(t){return this.recordFormattingUndoEntry(),this.composition.removeCurrentAttribute(t),this.render(),this.selectionFrozen?void 0:this.editorElement.focus()},e.prototype.toolbarWillShowDialog=function(){return this.composition.expandSelectionForEditing(),this.freezeSelection()},e.prototype.toolbarDidShowDialog=function(t){return this.editorElement.notify("toolbar-dialog-show",{dialogName:t})},e.prototype.toolbarDidHideDialog=function(t){return this.thawSelection(),this.editorElement.focus(),this.editorElement.notify("toolbar-dialog-hide",{dialogName:t})},e.prototype.freezeSelection=function(){return this.selectionFrozen?void 0:(this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render())},e.prototype.thawSelection=function(){return this.selectionFrozen?(this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()):void 0},e.prototype.actions={undo:{test:function(){return this.editor.canUndo()},perform:function(){return this.editor.undo()}},redo:{test:function(){return this.editor.canRedo()},perform:function(){return this.editor.redo()}},link:{test:function(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}},increaseBlockLevel:{test:function(){return this.editor.canIncreaseNestingLevel()},perform:function(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseBlockLevel:{test:function(){return this.editor.canDecreaseNestingLevel()},perform:function(){return this.editor.decreaseNestingLevel()&&this.render()}}},e.prototype.canInvokeAction=function(t){var e,n;return!!this.actionIsExternal(t)||!!(null!=(e=this.actions[t])&&null!=(n=e.test)?n.call(this):void 0)},e.prototype.invokeAction=function(t){var e,n;return this.actionIsExternal(t)?this.editorElement.notify("action-invoke",{actionName:t}):null!=(e=this.actions[t])&&null!=(n=e.perform)?n.call(this):void 0},e.prototype.actionIsExternal=function(t){return/^x-./.test(t)},e.prototype.getCurrentActions=function(){var t,e;for(t in e={},this.actions)e[t]=this.canInvokeAction(t);return e},e.prototype.updateCurrentActions=function(){var t;return t=this.getCurrentActions(),n(t,this.currentActions)?void 0:(this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.editorElement.notify("actions-change",{actions:this.currentActions}))},e.prototype.reparse=function(){return this.composition.replaceHTML(this.editorElement.innerHTML)},e.prototype.render=function(){return this.compositionController.render()},e.prototype.removeAttachment=function(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()},e.prototype.recordFormattingUndoEntry=function(){var t;return t=this.selectionManager.getLocationRange(),r(t)?void 0:this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})},e.prototype.recordTypingUndoEntry=function(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})},e.prototype.getUndoContext=function(){var t;return t=1<=arguments.length?s.call(arguments,0):[],[this.getLocationContext(),this.getTimeContext()].concat(s.call(t))},e.prototype.getLocationContext=function(){var t;return t=this.selectionManager.getLocationRange(),r(t)?t[0].index:t},e.prototype.getTimeContext=function(){return 0<L.config.undoInterval?Math.floor((new Date).getTime()/L.config.undoInterval):0},e.prototype.isFocused=function(){var t;return this.editorElement===(null!=(t=this.editorElement.ownerDocument)?t.activeElement:void 0)},e}(L.Controller)}.call(this),function(){var t,e,n,r,i,o,a,s,l,u,c,h;r=L.makeElement,i=L.selectionElements,o=L.triggerEvent,e=L.handleEvent,n=L.handleEventOnce,t=L.AttachmentView.attachmentSelector,L.registerElement("trix-editor",(u=0,a=function(t){return!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t?t.focus():void 0},c=function(t){return t.hasAttribute("contenteditable")?void 0:(t.setAttribute("contenteditable",""),n("focus",{onElement:t,withCallback:function(){return s(t)}}))},s=function(t){return l(t),h(t)},l=function(t){return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("enableObjectResizing"):void 0)?(document.execCommand("enableObjectResizing",!1,!1),e("mscontrolselect",{onElement:t,preventDefault:!0})):void 0},h=function(){var t;return("function"==typeof document.queryCommandSupported?document.queryCommandSupported("DefaultParagraphSeparator"):void 0)&&("div"===(t=L.config.blockAttributes["default"].tagName)||"p"===t)?document.execCommand("DefaultParagraphSeparator",!1,t):void 0},{defaultCSS:"%t:empty:not(:focus)::before {\n  content: attr(placeholder);\n  color: graytext;\n}\n\n%t a[contenteditable=false] {\n  cursor: text;\n}\n\n%t img {\n  max-width: 100%;\n  height: auto;\n}\n\n%t "+t+" figcaption textarea {\n  resize: none;\n}\n\n%t "+t+" figcaption textarea.trix-autoresize-clone {\n  position: absolute;\n  left: -9999px;\n  max-height: 0px;\n}\n\n%t "+t+'[data-trix-mutable] figcaption:empty::before {\n  content: "'+L.config.lang.captionPrompt+'";\n  color: graytext;\n}\n\n%t '+i.selector+" { "+i.cssText+" }",trixId:{get:function(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++u),this.trixId)}},toolbarElement:{get:function(){var t,e,n;return this.hasAttribute("toolbar")?null!=(e=this.ownerDocument)?e.getElementById(this.getAttribute("toolbar")):void 0:this.parentElement?(n="trix-toolbar-"+this.trixId,this.setAttribute("toolbar",n),t=r("trix-toolbar",{id:n}),this.parentElement.insertBefore(t,this),t):void 0}},inputElement:{get:function(){var t,e,n;return this.hasAttribute("input")?null!=(n=this.ownerDocument)?n.getElementById(this.getAttribute("input")):void 0:this.parentElement?(e="trix-input-"+this.trixId,this.setAttribute("input",e),t=r("input",{type:"hidden",id:e}),this.parentElement.insertBefore(t,this.nextElementSibling),t):void 0}},editor:{get:function(){var t;return null!=(t=this.editorController)?t.editor:void 0}},name:{get:function(){var t;return null!=(t=this.inputElement)?t.name:void 0}},value:{get:function(){var t;return null!=(t=this.inputElement)?t.value:void 0},set:function(t){var e;return this.defaultValue=t,null!=(e=this.editor)?e.loadHTML(this.defaultValue):void 0}},notify:function(t,e){var n;switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notify("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":null!=(n=this.inputElement)&&(n.value=L.serializeToContentType(this,"text/html"))}return this.editorController?o("trix-"+t,{onElement:this,attributes:e}):void 0},createdCallback:function(){return c(this)},attachedCallback:function(){return this.hasAttribute("data-trix-internal")?void 0:(null==this.editorController&&(this.editorController=new L.EditorController({editorElement:this,html:this.defaultValue=this.value})),this.editorController.registerSelectionManager(),this.registerResetListener(),a(this),requestAnimationFrame((t=this,function(){return t.notify("initialize")})));var t},detachedCallback:function(){var t;return null!=(t=this.editorController)&&t.unregisterSelectionManager(),this.unregisterResetListener()},registerResetListener:function(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)},unregisterResetListener:function(){return window.removeEventListener("reset",this.resetListener,!1)},resetBubbled:function(t){var e;return t.target!==(null!=(e=this.inputElement)?e.form:void 0)||t.defaultPrevented?void 0:this.reset()},reset:function(){return this.value=this.defaultValue}}))}.call(this),function(){}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=L:"function"==typeof define&&define.amd&&define(L)}.call(this),$(document).ready(function(){$("#datatable").DataTable({language:{lengthMenu:"Exibir _MENU_ registro por p\xe1ginas",info:"Exibindo p\xe1gina _PAGE_ de _PAGES_",infoEmpty:"N\xe3o foram encontrados registros",infoFiltered:"",search:"Buscar:",paginate:{first:"Primeira",last:"\xdaltima",next:"Proxima",previous:"Anterior"},loadingRecords:"Carregando...",processing:"Processando...",zeroRecords:"Sem registros compat\xedveis"}}),$("#AnexImagem").click(function(){$("#validationImage").click()})}),document.getElementById("validationImage").addEventListener("change",readImage,!1);